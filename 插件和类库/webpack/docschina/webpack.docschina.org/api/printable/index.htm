<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta name="theme-color" content="#2B3A42"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="robots" content="noindex,nofollow"/><title>webpack å®˜æ–¹ä¸­æ–‡æ–‡æ¡£</title><meta name="description" content="webpack æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨ã€‚å®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯å°† JavaScript æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‰“åŒ…åçš„æ–‡ä»¶ç”¨äºåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œä½†å®ƒä¹Ÿèƒ½å¤Ÿèƒœä»»è½¬æ¢ï¼ˆtransformï¼‰ã€æ‰“åŒ…ï¼ˆbundleï¼‰æˆ–åŒ…è£¹ï¼ˆpackageï¼‰ä»»ä½•èµ„æº(resource or asset)ã€‚"/><meta property="og:site_name" content="webpack"/><meta property="og:type" content="website"/><meta property="og:title" content="webpack å®˜æ–¹ä¸­æ–‡æ–‡æ¡£"/><meta property="og:description" name="description" content="webpack æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å™¨ã€‚å®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯å°† JavaScript æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œæ‰“åŒ…åçš„æ–‡ä»¶ç”¨äºåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œä½†å®ƒä¹Ÿèƒ½å¤Ÿèƒœä»»è½¬æ¢ï¼ˆtransformï¼‰ã€æ‰“åŒ…ï¼ˆbundleï¼‰æˆ–åŒ…è£¹ï¼ˆpackageï¼‰ä»»ä½•èµ„æº(resource or asset)ã€‚"/><meta property="og:image" content="https://webpack.js.org/icon-pwa-512x512.d3dae4189855b3a72ff9.png"/><meta property="twitter:card" content="summary"/><meta property="twitter:site" content="@webpack"/><meta property="twitter:creator" content="@webpack"/><meta property="twitter:domain" content="https://webpack.js.org/"/><meta name="keywords" content="webpack5, webpack, webpack ä¸­æ–‡æ–‡æ¡£, å°è®°ä¸­æ–‡, docschina, docschina.org, webpack.docschina.org, doc.react-china.org, nodejs.cn, vue.docschina.org, babel.docschina.org, parceljs.docschina.org, rollup.docschina.org, koajs.docschina.org"/><link rel="icon" type="image/x-icon" href="/favicon.f326220248556af65f41.ico"/><link rel="stylesheet" href="../../index.62a0b2891bdf09ef93b2.css" tppabs="https://webpack.docschina.org/index.62a0b2891bdf09ef93b2.css"/><link rel="manifest" href="/manifest.json"/><link rel="canonical" href="https://webpack.js.org/api/printable/"/><meta name="mobile-web-app-capable" content="yes"/><link rel="icon" sizes="192x192" href="/icon_192x192.png"/><link rel="icon" sizes="512x512" href="/icon_512x512.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="webpack"/><link rel="apple-touch-icon" href="/icon_180x180.png"/><link rel="mask-icon" href="/logo-on-white-bg.47eff95f9c01c5972f6f.svg" color="#465e69"/><meta name="msapplication-TileImage" content="/icon_150x150.png"/><meta name="msapplication-TileColor" content="#465e69"/></head><body><div id="root"><div class="site"><div class="site__header"><div class="notification-bar"><div class="container notification-bar__inner"><p>Webpack 5 ç°å·²æ­£å¼å‘å¸ƒã€‚è¯·é˜…è¯»æˆ‘ä»¬çš„ <a href="../../blog/2020-10-10-webpack-5-release/index.htm" tppabs="https://webpack.docschina.org/blog/2020-10-10-webpack-5-release/">å‘å¸ƒå…¬å‘Š</a>ã€‚å¦‚è¿˜æœªå‡†å¤‡å‡çº§ï¼Œè¯·é˜…è¯» <a href="javascript:if(confirm('https://v4.webpack.docschina.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://v4.webpack.docschina.org/'" tppabs="https://v4.webpack.docschina.org/">webpack 4 æ–‡æ¡£</a>ã€‚</p></div></div><header class="navigation   "><section class="navigation__inner"><button aria-label="Open menu" class="navigation__mobile"><svg viewBox="-62 138 25 25"><g><g><path d="M-60.2,140.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,141-61.2,140.2-60.2,140.2z"></path><path d="M-60.2,148.7h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,149.5-61.2,148.7-60.2,148.7z"></path><path d="M-60.2,157.2h20.9c1,0,1.8,0.8,1.8,1.8l0,0c0,1-0.8,1.8-1.8,1.8h-20.9c-1,0-1.8-0.8-1.8-1.8l0,0 C-62,158-61.2,157.2-60.2,157.2z"></path></g></g></svg></button><a class="navigation__logo" href="../../index-1.htm" tppabs="https://webpack.docschina.org/"><img class="logo" src="../../site-logo.1fcab817090e78435061.svg" tppabs="https://webpack.docschina.org/site-logo.1fcab817090e78435061.svg" alt="webpack logo"/></a><nav class="navigation__items"><a class="navigation__item  navigation__item--active" href="../../concepts/index.htm" tppabs="https://webpack.docschina.org/concepts/">ä¸­æ–‡æ–‡æ¡£</a><a class="navigation__item  " href="../../contribute/index.htm" tppabs="https://webpack.docschina.org/contribute/">å‚ä¸è´¡çŒ®</a><a class="navigation__item  " href="../../vote/index.htm" tppabs="https://webpack.docschina.org/vote/">æŠ•ç¥¨</a><a class="navigation__item  " href="../../blog/index.htm" tppabs="https://webpack.docschina.org/blog/">åšå®¢</a><a href="javascript:if(confirm('https://docschina.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://docschina.org/'" tppabs="https://docschina.org/" target="_blank" rel="noopener noreferrer" class="navigation__item  ">å°è®°ä¸­æ–‡</a><a href="javascript:if(confirm('https://github.com/webpack/webpack  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/webpack'" tppabs="https://github.com/webpack/webpack" target="_blank" rel="noopener noreferrer" title="GitHub Repository" class="navigation__item navigation__item--icon "><svg viewBox="0 0 24 24" aria-hidden="true" fill="#fff" width="16"><path d="M12 2A10 10 0 002 12a10 10 0 006.8 9.5c.5 0 .7-.2.7-.5v-1.7C6.7 20 6.1 18 6.1 18c-.4-1.2-1-1.5-1-1.5-1-.6 0-.6 0-.6 1 0 1.5 1 1.5 1 .9 1.6 2.4 1.1 3 .9 0-.7.3-1.1.6-1.4-2.2-.2-4.6-1-4.6-4.9 0-1.1.4-2 1-2.7 0-.3-.4-1.3.2-2.7 0 0 .8-.2 2.7 1a9.4 9.4 0 015 0c2-1.2 2.8-1 2.8-1 .5 1.4.1 2.4 0 2.7.7.7 1 1.6 1 2.7 0 3.8-2.3 4.7-4.5 5 .4.2.7.8.7 1.8V21c0 .3.2.6.7.5 4-1.3 6.8-5 6.8-9.5A10 10 0 0012 2z"></path></svg></a><a href="javascript:if(confirm('https://twitter.com/webpack  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://twitter.com/webpack'" tppabs="https://twitter.com/webpack" target="_blank" rel="noopener noreferrer" title="webpack on Twitter" class="navigation__item navigation__item--icon "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" aria-hidden="true" fill="#fff" width="16"><path d="M28 6.937c-.957.425-1.985.711-3.064.84a5.343 5.343 0 002.345-2.951 10.696 10.696 0 01-3.388 1.295 5.334 5.334 0 00-9.089 4.864A15.143 15.143 0 013.809 5.411a5.321 5.321 0 00-.721 2.683 5.33 5.33 0 002.372 4.439 5.323 5.323 0 01-2.416-.667v.067a5.335 5.335 0 004.279 5.23 5.336 5.336 0 01-2.409.092 5.34 5.34 0 004.983 3.705 10.699 10.699 0 01-6.625 2.284c-.43 0-.855-.025-1.273-.075a15.102 15.102 0 008.177 2.396c9.812 0 15.176-8.128 15.176-15.177 0-.231-.005-.461-.015-.69A10.855 10.855 0 0028 6.937z"></path></svg></a><a href="javascript:if(confirm('https://stackoverflow.com/questions/tagged/webpack  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://stackoverflow.com/questions/tagged/webpack'" tppabs="https://stackoverflow.com/questions/tagged/webpack" target="_blank" rel="noopener noreferrer" title="webpack on Stack Overflow" class="navigation__item navigation__item--icon "><svg viewBox="0 0 24 24" aria-hidden="true" fill="#fff" width="16"><path d="M17.4 20.2v-5.4h1.8V22H3v-7.2h1.8v5.4h12.6M6.8 14.3l.3-1.7 8.8 1.8-.3 1.8-8.8-1.9m1.1-4.2l.8-1.6 8.1 3.8-.7 1.6-8.2-3.8m2.3-4l1.1-1.4 7 5.8-1.2 1.4L10 6m4.7-4L20 9l-1.4 1-5.4-7 1.4-1m-8 16.5v-1.8h9v1.8h-9z"></path></svg></a><span class="navigation__item navigation__item--icon"><nav class="dropdown navigation__languages"><button aria-haspopup="true" aria-expanded="false" aria-label="Select language"><img class="dropdown__language" alt="select language" src="../../language-icon.87a028c9bf555eeb5932.svg" tppabs="https://webpack.docschina.org/language-icon.87a028c9bf555eeb5932.svg"/><i aria-hidden="true" class="dropdown__arrow"></i></button><div class="dropdown__list "><ul><li><a href="javascript:if(confirm('https://webpack.js.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://webpack.js.org/'" tppabs="https://webpack.js.org/"><span>English</span></a></li><li><a href="../../index-1.htm" tppabs="https://webpack.docschina.org/"><span lang="zh">ä¸­æ–‡</span></a></li></ul></div></nav></span></nav><div class="navigation-search "><input type="text" class="navigation-search__input" placeholder="Search this site..." value=""/><button aria-label="Hide search box" class="navigation-search__icon navigation-search__clear"><svg viewBox="-137 138 25 25"><g transform="translate(0,-952.36218)"><path d="M-131.3,1094.4c-0.4,0-0.9,0.1-1.2,0.5c-0.7,0.7-0.7,1.7,0,2.4l5.6,5.6l-5.6,5.6c-0.7,0.7-0.7,1.7,0,2.4 c0.7,0.7,1.7,0.7,2.4,0l5.6-5.6l5.6,5.6c0.7,0.7,1.7,0.7,2.4,0c0.7-0.7,0.7-1.7,0-2.4l-5.6-5.6l5.6-5.6c0.7-0.7,0.7-1.7,0-2.4 c-0.7-0.7-1.7-0.7-2.4,0l-5.6,5.6l-5.6-5.6C-130.5,1094.5-130.9,1094.4-131.3,1094.4L-131.3,1094.4z"></path></g></svg></button><button aria-label="Show search box" class="navigation-search__icon navigation-search__search"><svg viewBox="-137 138 25 25"><g><path d="M-114.6,162.6l-7.5-7.5c-0.6-0.6-0.6-1.6,0-2.1l0,0c0.6-0.6,1.6-0.6,2.1,0l7.5,7.5c0.6,0.6,0.6,1.6,0,2.1l0,0 C-113,163.1-114,163.1-114.6,162.6z"></path><path d="M-134.1,140.9c-3.9,3.9-3.9,10.2,0,14.1s10.2,3.9,14.1,0s3.9-10.2,0-14.1S-130.2,137-134.1,140.9z M-122.1,153 c-2.7,2.7-7.1,2.7-9.8,0s-2.7-7.1,0-9.8s7.1-2.7,9.8,0C-119.4,145.9-119.4,150.2-122.1,153z"></path></g></svg></button></div></section><div class="navigation-sub"><div class="navigation-sub__inner"><a class="navigation-sub__link navigation-sub__link--active" title="api" content="api" href="../index.htm" tppabs="https://webpack.docschina.org/api/">api</a><a class="navigation-sub__link " title="blog" content="blog" href="../../blog/index.htm" tppabs="https://webpack.docschina.org/blog/">blog</a><a class="navigation-sub__link " title="æ¦‚å¿µ" content="æ¦‚å¿µ" href="../../concepts/index.htm" tppabs="https://webpack.docschina.org/concepts/">æ¦‚å¿µ</a><a class="navigation-sub__link " title="é…ç½®" content="é…ç½®" href="../../configuration/index.htm" tppabs="https://webpack.docschina.org/configuration/">é…ç½®</a><a class="navigation-sub__link " title="æŒ‡å—" content="æŒ‡å—" href="../../guides/index.htm" tppabs="https://webpack.docschina.org/guides/">æŒ‡å—</a><a class="navigation-sub__link " title="loader" content="loader" href="../../loaders/index.htm" tppabs="https://webpack.docschina.org/loaders/">loader</a><a class="navigation-sub__link " title="è¿ç§»" content="è¿ç§»" href="../../migrate/index.htm" tppabs="https://webpack.docschina.org/migrate/">è¿ç§»</a><a class="navigation-sub__link " title="plugin" content="plugin" href="../../plugins/index.htm" tppabs="https://webpack.docschina.org/plugins/">plugin</a></div></div></header></div><div class="container site__content"><div class="sponsors"><a href="javascript:if(confirm('https://www.ag-grid.com/?utm_source=webpack&utm_medium=banner&utm_campaign=sponsorship  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.ag-grid.com/?utm_source=webpack&utm_medium=banner&utm_campaign=sponsorship'" tppabs="https://www.ag-grid.com/?utm_source=webpack&utm_medium=banner&utm_campaign=sponsorship" target="_blank" rel="noopener noreferrer" class="sponsors__content"><img src="../../ag-grid-logo.4fe9d34532b2c0821fc9.png" tppabs="https://webpack.docschina.org/ag-grid-logo.4fe9d34532b2c0821fc9.png"/><img class="sponsors__img__webpack" src="../../icon-square-small.85ba630cf0c5f29ae3e3.svg" tppabs="https://webpack.docschina.org/icon-square-small.85ba630cf0c5f29ae3e3.svg"/><div class="sponsors__content-cont">ag-grid is proud to partner with webpack</div></a></div><nav class="sidebar site__sidebar"><div class="sidebar__inner"><div class="sidebar__shields"><a href="javascript:if(confirm('https://github.com/webpack/webpack/releases  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/webpack/releases'" tppabs="https://github.com/webpack/webpack/releases"><img alt="webpack shield" src="../../../img.shields.io/github/package-json/v/webpack/webpack.svg-label=webpack&style=flat-square&maxAge=3600" tppabs="https://img.shields.io/github/package-json/v/webpack/webpack.svg?label=webpack&style=flat-square&maxAge=3600"/></a></div><div class="sidebar-item sidebar-item--disabled`"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="sidebar-item__toggle" width="15" height="17" fill="#175d96"><path d="M10 3.3c-.6 0-1 .4-1.1 1.1v11.2c0 .3.2.6.4.8.2.2.5.4.8.4.6 0 1-.4 1.1-1.1V4.5c0-.3-.2-.6-.4-.8-.2-.2-.5-.4-.8-.4z" color="#000" style="isolation:auto;mix-blend-mode:normal"></path></svg><a class="sidebar-item__title sidebar-link__print" href="index.htm" tppabs="https://webpack.docschina.org/api/printable/" rel="nofollow noopener noreferrer" alt="Print" title="Print" target="_blank">Print Section<img src="../../icon-print.42ad40feec51e6f5f553.svg" tppabs="https://webpack.docschina.org/icon-print.42ad40feec51e6f5f553.svg"/></a></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../index.htm" tppabs="https://webpack.docschina.org/api/">ç®€ä»‹</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="CLI"><a href="../index.htm#cli" tppabs="https://webpack.docschina.org/api/#cli">CLI</a></li><li class="sidebar-item__anchor" title="æ¨¡å—"><a href="../index.htm#module" tppabs="https://webpack.docschina.org/api/#module">æ¨¡å—</a></li><li class="sidebar-item__anchor" title="Node"><a href="../index.htm#node" tppabs="https://webpack.docschina.org/api/#node">Node</a></li><li class="sidebar-item__anchor" title="Loaders"><a href="../index.htm#loaders" tppabs="https://webpack.docschina.org/api/#loaders">Loaders</a></li><li class="sidebar-item__anchor" title="æ’ä»¶"><a href="../index.htm#plugins" tppabs="https://webpack.docschina.org/api/#plugins">æ’ä»¶</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../cli/index.htm" tppabs="https://webpack.docschina.org/api/cli/">å‘½ä»¤è¡Œæ¥å£ï¼ˆCLIï¼‰</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="å‘½ä»¤"><a href="../cli/index.htm#commands" tppabs="https://webpack.docschina.org/api/cli/#commands">å‘½ä»¤</a></li><li class="sidebar-item__anchor" title="Flags"><a href="../cli/index.htm#flags" tppabs="https://webpack.docschina.org/api/cli/#flags">Flags</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Negated Flags"><a href="../cli/index.htm#negated-flags" tppabs="https://webpack.docschina.org/api/cli/#negated-flags">Negated Flags</a></li><li class="sidebar-item__anchor" title="æ ¸å¿ƒ Flags"><a href="../cli/index.htm#core-flags" tppabs="https://webpack.docschina.org/api/cli/#core-flags">æ ¸å¿ƒ Flags</a></li></ul></li><li class="sidebar-item__anchor" title="ç”¨æ³•"><a href="../cli/index.htm#usage" tppabs="https://webpack.docschina.org/api/cli/#usage">ç”¨æ³•</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="ä½¿ç”¨é…ç½®æ–‡ä»¶"><a href="../cli/index.htm#with-configuration-file" tppabs="https://webpack.docschina.org/api/cli/#with-configuration-file">ä½¿ç”¨é…ç½®æ–‡ä»¶</a></li><li class="sidebar-item__anchor" title="ä¸ä½¿ç”¨é…ç½®æ–‡ä»¶"><a href="../cli/index.htm#without-configuration-file" tppabs="https://webpack.docschina.org/api/cli/#without-configuration-file">ä¸ä½¿ç”¨é…ç½®æ–‡ä»¶</a></li></ul></li><li class="sidebar-item__anchor" title="é»˜è®¤é…ç½®"><a href="../cli/index.htm#default-configurations" tppabs="https://webpack.docschina.org/api/cli/#default-configurations">é»˜è®¤é…ç½®</a></li><li class="sidebar-item__anchor" title="é€šç”¨é…ç½®"><a href="../cli/index.htm#common-options" tppabs="https://webpack.docschina.org/api/cli/#common-options">é€šç”¨é…ç½®</a></li><li class="sidebar-item__anchor" title="Environment é€‰é¡¹"><a href="../cli/index.htm#environment-options" tppabs="https://webpack.docschina.org/api/cli/#environment-options">Environment é€‰é¡¹</a></li><li class="sidebar-item__anchor" title="é…ç½®é€‰é¡¹"><a href="../cli/index.htm#configuration-options" tppabs="https://webpack.docschina.org/api/cli/#configuration-options">é…ç½®é€‰é¡¹</a></li><li class="sidebar-item__anchor" title="åˆ†æ Bundle"><a href="../cli/index.htm#analyzing-bundle" tppabs="https://webpack.docschina.org/api/cli/#analyzing-bundle">åˆ†æ Bundle</a></li><li class="sidebar-item__anchor" title="Progress"><a href="../cli/index.htm#progress" tppabs="https://webpack.docschina.org/api/cli/#progress">Progress</a></li><li class="sidebar-item__anchor" title="å°† CLI å‚æ•°ä¼ é€’ç»™ Node.js"><a href="../cli/index.htm#pass-cli-arguments-to-nodejs" tppabs="https://webpack.docschina.org/api/cli/#pass-cli-arguments-to-nodejs">å°† CLI å‚æ•°ä¼ é€’ç»™ Node.js</a></li><li class="sidebar-item__anchor" title="Exit codes and their meanings"><a href="../cli/index.htm#exit-codes-and-their-meanings" tppabs="https://webpack.docschina.org/api/cli/#exit-codes-and-their-meanings">Exit codes and their meanings</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../node/index.htm" tppabs="https://webpack.docschina.org/api/node/">Node æ¥å£</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="å®‰è£…(Installation)"><a href="../node/index.htm#installation" tppabs="https://webpack.docschina.org/api/node/#installation">å®‰è£…(Installation)</a></li><li class="sidebar-item__anchor" title="webpack()"><a href="../node/index.htm#webpack" tppabs="https://webpack.docschina.org/api/node/#webpack">webpack()</a></li><li class="sidebar-item__anchor" title="Compiler å®ä¾‹ï¼ˆCompiler Instanceï¼‰"><a href="../node/index.htm#compiler-instance" tppabs="https://webpack.docschina.org/api/node/#compiler-instance">Compiler å®ä¾‹ï¼ˆCompiler Instanceï¼‰</a></li><li class="sidebar-item__anchor" title="æ‰§è¡Œï¼ˆRunï¼‰"><a href="../node/index.htm#run" tppabs="https://webpack.docschina.org/api/node/#run">æ‰§è¡Œï¼ˆRunï¼‰</a></li><li class="sidebar-item__anchor" title="ç›‘å¬(Watching)"><a href="../node/index.htm#watching" tppabs="https://webpack.docschina.org/api/node/#watching">ç›‘å¬(Watching)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="å…³é—­ Watching (Close Watching)"><a href="../node/index.htm#close-watching" tppabs="https://webpack.docschina.org/api/node/#close-watching">å…³é—­ Watching (Close Watching)</a></li><li class="sidebar-item__anchor" title="Invalidate Watching"><a href="../node/index.htm#invalidate-watching" tppabs="https://webpack.docschina.org/api/node/#invalidate-watching">Invalidate Watching</a></li></ul></li><li class="sidebar-item__anchor" title="Stats å¯¹è±¡(Stats Object)"><a href="../node/index.htm#stats-object" tppabs="https://webpack.docschina.org/api/node/#stats-object">Stats å¯¹è±¡(Stats Object)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="stats.hasErrors()"><a href="../node/index.htm#statshaserrors" tppabs="https://webpack.docschina.org/api/node/#statshaserrors">stats.hasErrors()</a></li><li class="sidebar-item__anchor" title="stats.hasWarnings()"><a href="../node/index.htm#statshaswarnings" tppabs="https://webpack.docschina.org/api/node/#statshaswarnings">stats.hasWarnings()</a></li><li class="sidebar-item__anchor" title="stats.toJson(options)"><a href="../node/index.htm#statstojsonoptions" tppabs="https://webpack.docschina.org/api/node/#statstojsonoptions">stats.toJson(options)</a></li><li class="sidebar-item__anchor" title="stats.toString(options)"><a href="../node/index.htm#statstostringoptions" tppabs="https://webpack.docschina.org/api/node/#statstostringoptions">stats.toString(options)</a></li></ul></li><li class="sidebar-item__anchor" title="MultiCompiler"><a href="../node/index.htm#multicompiler" tppabs="https://webpack.docschina.org/api/node/#multicompiler">MultiCompiler</a></li><li class="sidebar-item__anchor" title="é”™è¯¯å¤„ç†(Error Handling)"><a href="../node/index.htm#error-handling" tppabs="https://webpack.docschina.org/api/node/#error-handling">é”™è¯¯å¤„ç†(Error Handling)</a></li><li class="sidebar-item__anchor" title="è‡ªå®šä¹‰æ–‡ä»¶ç³»ç»Ÿ(Custom File Systems)"><a href="../node/index.htm#custom-file-systems" tppabs="https://webpack.docschina.org/api/node/#custom-file-systems">è‡ªå®šä¹‰æ–‡ä»¶ç³»ç»Ÿ(Custom File Systems)</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../stats/index.htm" tppabs="https://webpack.docschina.org/api/stats/">Stats Data</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Structure"><a href="../stats/index.htm#structure" tppabs="https://webpack.docschina.org/api/stats/#structure">Structure</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Asset Objects"><a href="../stats/index.htm#asset-objects" tppabs="https://webpack.docschina.org/api/stats/#asset-objects">Asset Objects</a></li><li class="sidebar-item__anchor" title="Chunk Objects"><a href="../stats/index.htm#chunk-objects" tppabs="https://webpack.docschina.org/api/stats/#chunk-objects">Chunk Objects</a></li><li class="sidebar-item__anchor" title="Module Objects"><a href="../stats/index.htm#module-objects" tppabs="https://webpack.docschina.org/api/stats/#module-objects">Module Objects</a></li><li class="sidebar-item__anchor" title="Entry Objects"><a href="../stats/index.htm#entry-objects" tppabs="https://webpack.docschina.org/api/stats/#entry-objects">Entry Objects</a></li><li class="sidebar-item__anchor" title="Errors and Warnings"><a href="../stats/index.htm#errors-and-warnings" tppabs="https://webpack.docschina.org/api/stats/#errors-and-warnings">Errors and Warnings</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../hot-module-replacement/index.htm" tppabs="https://webpack.docschina.org/api/hot-module-replacement/">Hot Module Replacement</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="æ¨¡å— API"><a href="../hot-module-replacement/index.htm#module-api" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#module-api">æ¨¡å— API</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="accept"><a href="../hot-module-replacement/index.htm#accept" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#accept">accept</a></li><li class="sidebar-item__anchor" title="accept (è‡ªèº«)"><a href="../hot-module-replacement/index.htm#accept-self" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#accept-self">accept (è‡ªèº«)</a></li><li class="sidebar-item__anchor" title="decline"><a href="../hot-module-replacement/index.htm#decline" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#decline">decline</a></li><li class="sidebar-item__anchor" title="decline (è‡ªèº«)"><a href="../hot-module-replacement/index.htm#decline-self" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#decline-self">decline (è‡ªèº«)</a></li><li class="sidebar-item__anchor" title="dispose (or addDisposeHandler)"><a href="../hot-module-replacement/index.htm#dispose-or-adddisposehandler" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#dispose-or-adddisposehandler">dispose (or addDisposeHandler)</a></li><li class="sidebar-item__anchor" title="invalidate"><a href="../hot-module-replacement/index.htm#invalidate" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#invalidate">invalidate</a></li><li class="sidebar-item__anchor" title="ç”¨ä¾‹"><a href="../hot-module-replacement/index.htm#use-cases" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#use-cases">ç”¨ä¾‹</a></li><li class="sidebar-item__anchor" title="removeDisposeHandler"><a href="../hot-module-replacement/index.htm#removedisposehandler" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#removedisposehandler">removeDisposeHandler</a></li></ul></li><li class="sidebar-item__anchor" title="API ç®¡ç†"><a href="../hot-module-replacement/index.htm#management-api" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#management-api">API ç®¡ç†</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="status"><a href="../hot-module-replacement/index.htm#status" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#status">status</a></li><li class="sidebar-item__anchor" title="check"><a href="../hot-module-replacement/index.htm#check" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#check">check</a></li><li class="sidebar-item__anchor" title="apply"><a href="../hot-module-replacement/index.htm#apply" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#apply">apply</a></li><li class="sidebar-item__anchor" title="addStatusHandler"><a href="../hot-module-replacement/index.htm#addstatushandler" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#addstatushandler">addStatusHandler</a></li><li class="sidebar-item__anchor" title="removeStatusHandler"><a href="../hot-module-replacement/index.htm#removestatushandler" tppabs="https://webpack.docschina.org/api/hot-module-replacement/#removestatushandler">removeStatusHandler</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../loaders/index.htm" tppabs="https://webpack.docschina.org/api/loaders/">Loader Interface</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Examples"><a href="../loaders/index.htm#examples" tppabs="https://webpack.docschina.org/api/loaders/#examples">Examples</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Synchronous Loaders"><a href="../loaders/index.htm#synchronous-loaders" tppabs="https://webpack.docschina.org/api/loaders/#synchronous-loaders">Synchronous Loaders</a></li><li class="sidebar-item__anchor" title="Asynchronous Loaders"><a href="../loaders/index.htm#asynchronous-loaders" tppabs="https://webpack.docschina.org/api/loaders/#asynchronous-loaders">Asynchronous Loaders</a></li><li class="sidebar-item__anchor" title="&quot;Raw&quot; Loader"><a href="../loaders/index.htm#raw-loader" tppabs="https://webpack.docschina.org/api/loaders/#raw-loader">&quot;Raw&quot; Loader</a></li><li class="sidebar-item__anchor" title="Pitching Loader"><a href="../loaders/index.htm#pitching-loader" tppabs="https://webpack.docschina.org/api/loaders/#pitching-loader">Pitching Loader</a></li></ul></li><li class="sidebar-item__anchor" title="The Loader Context"><a href="../loaders/index.htm#the-loader-context" tppabs="https://webpack.docschina.org/api/loaders/#the-loader-context">The Loader Context</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="this.version"><a href="../loaders/index.htm#thisversion" tppabs="https://webpack.docschina.org/api/loaders/#thisversion">this.version</a></li><li class="sidebar-item__anchor" title="this.context"><a href="../loaders/index.htm#thiscontext" tppabs="https://webpack.docschina.org/api/loaders/#thiscontext">this.context</a></li><li class="sidebar-item__anchor" title="this.rootContext"><a href="../loaders/index.htm#thisrootcontext" tppabs="https://webpack.docschina.org/api/loaders/#thisrootcontext">this.rootContext</a></li><li class="sidebar-item__anchor" title="this.request"><a href="../loaders/index.htm#thisrequest" tppabs="https://webpack.docschina.org/api/loaders/#thisrequest">this.request</a></li><li class="sidebar-item__anchor" title="this.query"><a href="../loaders/index.htm#thisquery" tppabs="https://webpack.docschina.org/api/loaders/#thisquery">this.query</a></li><li class="sidebar-item__anchor" title="this.getOptions(schema)"><a href="../loaders/index.htm#thisgetoptionsschema" tppabs="https://webpack.docschina.org/api/loaders/#thisgetoptionsschema">this.getOptions(schema)</a></li><li class="sidebar-item__anchor" title="this.callback"><a href="../loaders/index.htm#thiscallback" tppabs="https://webpack.docschina.org/api/loaders/#thiscallback">this.callback</a></li><li class="sidebar-item__anchor" title="this.async"><a href="../loaders/index.htm#thisasync" tppabs="https://webpack.docschina.org/api/loaders/#thisasync">this.async</a></li><li class="sidebar-item__anchor" title="this.data"><a href="../loaders/index.htm#thisdata" tppabs="https://webpack.docschina.org/api/loaders/#thisdata">this.data</a></li><li class="sidebar-item__anchor" title="this.cacheable"><a href="../loaders/index.htm#thiscacheable" tppabs="https://webpack.docschina.org/api/loaders/#thiscacheable">this.cacheable</a></li><li class="sidebar-item__anchor" title="this.loaders"><a href="../loaders/index.htm#thisloaders" tppabs="https://webpack.docschina.org/api/loaders/#thisloaders">this.loaders</a></li><li class="sidebar-item__anchor" title="this.loaderIndex"><a href="../loaders/index.htm#thisloaderindex" tppabs="https://webpack.docschina.org/api/loaders/#thisloaderindex">this.loaderIndex</a></li><li class="sidebar-item__anchor" title="this.resource"><a href="../loaders/index.htm#thisresource" tppabs="https://webpack.docschina.org/api/loaders/#thisresource">this.resource</a></li><li class="sidebar-item__anchor" title="this.resourcePath"><a href="../loaders/index.htm#thisresourcepath" tppabs="https://webpack.docschina.org/api/loaders/#thisresourcepath">this.resourcePath</a></li><li class="sidebar-item__anchor" title="this.resourceQuery"><a href="../loaders/index.htm#thisresourcequery" tppabs="https://webpack.docschina.org/api/loaders/#thisresourcequery">this.resourceQuery</a></li><li class="sidebar-item__anchor" title="this.target"><a href="../loaders/index.htm#thistarget" tppabs="https://webpack.docschina.org/api/loaders/#thistarget">this.target</a></li><li class="sidebar-item__anchor" title="this.webpack"><a href="../loaders/index.htm#thiswebpack" tppabs="https://webpack.docschina.org/api/loaders/#thiswebpack">this.webpack</a></li><li class="sidebar-item__anchor" title="this.sourceMap"><a href="../loaders/index.htm#thissourcemap" tppabs="https://webpack.docschina.org/api/loaders/#thissourcemap">this.sourceMap</a></li><li class="sidebar-item__anchor" title="this.emitWarning"><a href="../loaders/index.htm#thisemitwarning" tppabs="https://webpack.docschina.org/api/loaders/#thisemitwarning">this.emitWarning</a></li><li class="sidebar-item__anchor" title="this.emitError"><a href="../loaders/index.htm#thisemiterror" tppabs="https://webpack.docschina.org/api/loaders/#thisemiterror">this.emitError</a></li><li class="sidebar-item__anchor" title="this.loadModule"><a href="../loaders/index.htm#thisloadmodule" tppabs="https://webpack.docschina.org/api/loaders/#thisloadmodule">this.loadModule</a></li><li class="sidebar-item__anchor" title="this.resolve"><a href="../loaders/index.htm#thisresolve" tppabs="https://webpack.docschina.org/api/loaders/#thisresolve">this.resolve</a></li><li class="sidebar-item__anchor" title="this.addDependency"><a href="../loaders/index.htm#thisadddependency" tppabs="https://webpack.docschina.org/api/loaders/#thisadddependency">this.addDependency</a></li><li class="sidebar-item__anchor" title="this.addContextDependency"><a href="../loaders/index.htm#thisaddcontextdependency" tppabs="https://webpack.docschina.org/api/loaders/#thisaddcontextdependency">this.addContextDependency</a></li><li class="sidebar-item__anchor" title="this.clearDependencies"><a href="../loaders/index.htm#thiscleardependencies" tppabs="https://webpack.docschina.org/api/loaders/#thiscleardependencies">this.clearDependencies</a></li><li class="sidebar-item__anchor" title="this.emitFile"><a href="../loaders/index.htm#thisemitfile" tppabs="https://webpack.docschina.org/api/loaders/#thisemitfile">this.emitFile</a></li><li class="sidebar-item__anchor" title="this.hot"><a href="../loaders/index.htm#thishot" tppabs="https://webpack.docschina.org/api/loaders/#thishot">this.hot</a></li><li class="sidebar-item__anchor" title="this.fs"><a href="../loaders/index.htm#thisfs" tppabs="https://webpack.docschina.org/api/loaders/#thisfs">this.fs</a></li><li class="sidebar-item__anchor" title="this.mode"><a href="../loaders/index.htm#thismode" tppabs="https://webpack.docschina.org/api/loaders/#thismode">this.mode</a></li></ul></li><li class="sidebar-item__anchor" title="Deprecated context properties"><a href="../loaders/index.htm#deprecated-context-properties" tppabs="https://webpack.docschina.org/api/loaders/#deprecated-context-properties">Deprecated context properties</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="this.value"><a href="../loaders/index.htm#thisvalue" tppabs="https://webpack.docschina.org/api/loaders/#thisvalue">this.value</a></li><li class="sidebar-item__anchor" title="this.inputValue"><a href="../loaders/index.htm#thisinputvalue" tppabs="https://webpack.docschina.org/api/loaders/#thisinputvalue">this.inputValue</a></li><li class="sidebar-item__anchor" title="this.debug"><a href="../loaders/index.htm#thisdebug" tppabs="https://webpack.docschina.org/api/loaders/#thisdebug">this.debug</a></li><li class="sidebar-item__anchor" title="this.minimize"><a href="../loaders/index.htm#thisminimize" tppabs="https://webpack.docschina.org/api/loaders/#thisminimize">this.minimize</a></li><li class="sidebar-item__anchor" title="this._compilation"><a href="../loaders/index.htm#this_compilation" tppabs="https://webpack.docschina.org/api/loaders/#this_compilation">this._compilation</a></li><li class="sidebar-item__anchor" title="this._compiler"><a href="../loaders/index.htm#this_compiler" tppabs="https://webpack.docschina.org/api/loaders/#this_compiler">this._compiler</a></li><li class="sidebar-item__anchor" title="this._module"><a href="../loaders/index.htm#this_module" tppabs="https://webpack.docschina.org/api/loaders/#this_module">this._module</a></li></ul></li><li class="sidebar-item__anchor" title="Error Reporting"><a href="../loaders/index.htm#error-reporting" tppabs="https://webpack.docschina.org/api/loaders/#error-reporting">Error Reporting</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Inline matchResource"><a href="../loaders/index.htm#inline-matchresource" tppabs="https://webpack.docschina.org/api/loaders/#inline-matchresource">Inline matchResource</a></li></ul></li><li class="sidebar-item__anchor" title="Logging"><a href="../loaders/index.htm#logging" tppabs="https://webpack.docschina.org/api/loaders/#logging">Logging</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../logging/index.htm" tppabs="https://webpack.docschina.org/api/logging/">Logger æ¥å£</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Examples of how to get and use webpack logger in loaders and plugins"><a href="../logging/index.htm#examples-of-how-to-get-and-use-webpack-logger-in-loaders-and-plugins" tppabs="https://webpack.docschina.org/api/logging/#examples-of-how-to-get-and-use-webpack-logger-in-loaders-and-plugins">Examples of how to get and use webpack logger in loaders and plugins</a></li><li class="sidebar-item__anchor" title="Logger methods"><a href="../logging/index.htm#logger-methods" tppabs="https://webpack.docschina.org/api/logging/#logger-methods">Logger methods</a></li><li class="sidebar-item__anchor" title="Runtime Logger API"><a href="../logging/index.htm#runtime-logger-api" tppabs="https://webpack.docschina.org/api/logging/#runtime-logger-api">Runtime Logger API</a></li></ul></div></div><div><h4 class="sidebar__group">Modules</h4><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../module-methods/index.htm" tppabs="https://webpack.docschina.org/api/module-methods/">æ¨¡å—æ–¹æ³•</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="ES6 (æ¨è)"><a href="../module-methods/index.htm#es6-recommended" tppabs="https://webpack.docschina.org/api/module-methods/#es6-recommended">ES6 (æ¨è)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="import"><a href="../module-methods/index.htm#import" tppabs="https://webpack.docschina.org/api/module-methods/#import">import</a></li><li class="sidebar-item__anchor" title="export"><a href="../module-methods/index.htm#export" tppabs="https://webpack.docschina.org/api/module-methods/#export">export</a></li><li class="sidebar-item__anchor" title="import()"><a href="../module-methods/index.htm#import" tppabs="https://webpack.docschina.org/api/module-methods/#import">import()</a></li><li class="sidebar-item__anchor" title="import() ä¸­çš„è¡¨è¾¾å¼"><a href="../module-methods/index.htm#dynamic-expressions-in-import" tppabs="https://webpack.docschina.org/api/module-methods/#dynamic-expressions-in-import">import() ä¸­çš„è¡¨è¾¾å¼</a></li></ul></li><li class="sidebar-item__anchor" title="CommonJS"><a href="../module-methods/index.htm#commonjs" tppabs="https://webpack.docschina.org/api/module-methods/#commonjs">CommonJS</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="require"><a href="../module-methods/index.htm#require" tppabs="https://webpack.docschina.org/api/module-methods/#require">require</a></li><li class="sidebar-item__anchor" title="require.resolve"><a href="../module-methods/index.htm#requireresolve" tppabs="https://webpack.docschina.org/api/module-methods/#requireresolve">require.resolve</a></li><li class="sidebar-item__anchor" title="require.cache"><a href="../module-methods/index.htm#requirecache" tppabs="https://webpack.docschina.org/api/module-methods/#requirecache">require.cache</a></li><li class="sidebar-item__anchor" title="require.ensure"><a href="../module-methods/index.htm#requireensure" tppabs="https://webpack.docschina.org/api/module-methods/#requireensure">require.ensure</a></li></ul></li><li class="sidebar-item__anchor" title="AMD"><a href="../module-methods/index.htm#amd" tppabs="https://webpack.docschina.org/api/module-methods/#amd">AMD</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="define (é€šè¿‡ factory æ–¹æ³•å¯¼å‡º)"><a href="../module-methods/index.htm#define-with-factory" tppabs="https://webpack.docschina.org/api/module-methods/#define-with-factory">define (é€šè¿‡ factory æ–¹æ³•å¯¼å‡º)</a></li><li class="sidebar-item__anchor" title="define (é€šè¿‡ value å¯¼å‡º)"><a href="../module-methods/index.htm#define-with-value" tppabs="https://webpack.docschina.org/api/module-methods/#define-with-value">define (é€šè¿‡ value å¯¼å‡º)</a></li><li class="sidebar-item__anchor" title="require (AMD ç‰ˆæœ¬)"><a href="../module-methods/index.htm#require-amd-version" tppabs="https://webpack.docschina.org/api/module-methods/#require-amd-version">require (AMD ç‰ˆæœ¬)</a></li></ul></li><li class="sidebar-item__anchor" title="æ ‡ç­¾æ¨¡å—(Labeled Modules)"><a href="../module-methods/index.htm#labeled-modules" tppabs="https://webpack.docschina.org/api/module-methods/#labeled-modules">æ ‡ç­¾æ¨¡å—(Labeled Modules)</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="export æ ‡ç­¾"><a href="../module-methods/index.htm#export-label" tppabs="https://webpack.docschina.org/api/module-methods/#export-label">export æ ‡ç­¾</a></li><li class="sidebar-item__anchor" title="require æ ‡ç­¾"><a href="../module-methods/index.htm#require-label" tppabs="https://webpack.docschina.org/api/module-methods/#require-label">require æ ‡ç­¾</a></li></ul></li><li class="sidebar-item__anchor" title="Webpack"><a href="../module-methods/index.htm#webpack" tppabs="https://webpack.docschina.org/api/module-methods/#webpack">Webpack</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="require.context"><a href="../module-methods/index.htm#requirecontext" tppabs="https://webpack.docschina.org/api/module-methods/#requirecontext">require.context</a></li><li class="sidebar-item__anchor" title="require.include"><a href="../module-methods/index.htm#requireinclude" tppabs="https://webpack.docschina.org/api/module-methods/#requireinclude">require.include</a></li><li class="sidebar-item__anchor" title="require.resolveWeak"><a href="../module-methods/index.htm#requireresolveweak" tppabs="https://webpack.docschina.org/api/module-methods/#requireresolveweak">require.resolveWeak</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../module-variables/index.htm" tppabs="https://webpack.docschina.org/api/module-variables/">Module Variables</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="module.loaded (NodeJS)"><a href="../module-variables/index.htm#moduleloaded-nodejs" tppabs="https://webpack.docschina.org/api/module-variables/#moduleloaded-nodejs">module.loaded (NodeJS)</a></li><li class="sidebar-item__anchor" title="module.hot (webpack-specific)"><a href="../module-variables/index.htm#modulehot-webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#modulehot-webpack-specific">module.hot (webpack-specific)</a></li><li class="sidebar-item__anchor" title="module.id (CommonJS)"><a href="../module-variables/index.htm#moduleid-commonjs" tppabs="https://webpack.docschina.org/api/module-variables/#moduleid-commonjs">module.id (CommonJS)</a></li><li class="sidebar-item__anchor" title="module.exports (CommonJS)"><a href="../module-variables/index.htm#moduleexports-commonjs" tppabs="https://webpack.docschina.org/api/module-variables/#moduleexports-commonjs">module.exports (CommonJS)</a></li><li class="sidebar-item__anchor" title="exports (CommonJS)"><a href="../module-variables/index.htm#exports-commonjs" tppabs="https://webpack.docschina.org/api/module-variables/#exports-commonjs">exports (CommonJS)</a></li><li class="sidebar-item__anchor" title="global (NodeJS)"><a href="../module-variables/index.htm#global-nodejs" tppabs="https://webpack.docschina.org/api/module-variables/#global-nodejs">global (NodeJS)</a></li><li class="sidebar-item__anchor" title="__dirname (NodeJS)"><a href="../module-variables/index.htm#__dirname-nodejs" tppabs="https://webpack.docschina.org/api/module-variables/#__dirname-nodejs">__dirname (NodeJS)</a></li><li class="sidebar-item__anchor" title="import.meta.url"><a href="../module-variables/index.htm#import-meta-url" tppabs="https://webpack.docschina.org/api/module-variables/#import-meta-url">import.meta.url</a></li><li class="sidebar-item__anchor" title="import.meta.webpack"><a href="../module-variables/index.htm#import-meta-webpack" tppabs="https://webpack.docschina.org/api/module-variables/#import-meta-webpack">import.meta.webpack</a></li><li class="sidebar-item__anchor" title="__filename (NodeJS)"><a href="../module-variables/index.htm#__filename-nodejs" tppabs="https://webpack.docschina.org/api/module-variables/#__filename-nodejs">__filename (NodeJS)</a></li><li class="sidebar-item__anchor" title="__resourceQuery (webpack ç‰¹æœ‰å˜é‡)"><a href="../module-variables/index.htm#__resourcequery-webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#__resourcequery-webpack-specific">__resourceQuery (webpack ç‰¹æœ‰å˜é‡)</a></li><li class="sidebar-item__anchor" title="__webpack_public_path__ (webpack ç‰¹æœ‰å˜é‡)"><a href="../module-variables/index.htm#webpack_public_path-webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#webpack_public_path-webpack-specific">__webpack_public_path__ (webpack ç‰¹æœ‰å˜é‡)</a></li><li class="sidebar-item__anchor" title="__webpack_require__ (webpack ç‰¹æœ‰å˜é‡)"><a href="../module-variables/index.htm#webpack_require-webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#webpack_require-webpack-specific">__webpack_require__ (webpack ç‰¹æœ‰å˜é‡)</a></li><li class="sidebar-item__anchor" title="__webpack_chunk_load__ (webpack ç‰¹æœ‰å˜é‡)"><a href="../module-variables/index.htm#webpack_chunk_load-webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#webpack_chunk_load-webpack-specific">__webpack_chunk_load__ (webpack ç‰¹æœ‰å˜é‡)</a></li><li class="sidebar-item__anchor" title="__webpack_modules__ (webpack ç‰¹æœ‰å˜é‡)"><a href="../module-variables/index.htm#webpack_modules-webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#webpack_modules-webpack-specific">__webpack_modules__ (webpack ç‰¹æœ‰å˜é‡)</a></li><li class="sidebar-item__anchor" title="__webpack_hash__ (webpack ç‰¹æœ‰å˜é‡)"><a href="../module-variables/index.htm#webpack_hash-webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#webpack_hash-webpack-specific">__webpack_hash__ (webpack ç‰¹æœ‰å˜é‡)</a></li><li class="sidebar-item__anchor" title="__non_webpack_require__ (webpack ç‰¹æœ‰å˜é‡)"><a href="../module-variables/index.htm#non_webpack_require-webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#non_webpack_require-webpack-specific">__non_webpack_require__ (webpack ç‰¹æœ‰å˜é‡)</a></li><li class="sidebar-item__anchor" title="__webpack_exports_info__ (webpack ç‰¹æœ‰å˜é‡)"><a href="../module-variables/index.htm#webpack_exports_info-webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#webpack_exports_info-webpack-specific">__webpack_exports_info__ (webpack ç‰¹æœ‰å˜é‡)</a></li><li class="sidebar-item__anchor" title="DEBUG  (webpack ç‰¹æœ‰å˜é‡)"><a href="../module-variables/index.htm#debug--webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#debug--webpack-specific">DEBUG  (webpack ç‰¹æœ‰å˜é‡)</a></li></ul></div></div><div><h4 class="sidebar__group">Objects</h4><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../compilation-object/index.htm" tppabs="https://webpack.docschina.org/api/compilation-object/">Compilation Object</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="compilation å¯¹è±¡æ–¹æ³•"><a href="../compilation-object/index.htm#compilation-object-methods" tppabs="https://webpack.docschina.org/api/compilation-object/#compilation-object-methods">compilation å¯¹è±¡æ–¹æ³•</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="getStats"><a href="../compilation-object/index.htm#getstats" tppabs="https://webpack.docschina.org/api/compilation-object/#getstats">getStats</a></li><li class="sidebar-item__anchor" title="addModule"><a href="../compilation-object/index.htm#addmodule" tppabs="https://webpack.docschina.org/api/compilation-object/#addmodule">addModule</a></li><li class="sidebar-item__anchor" title="getModule"><a href="../compilation-object/index.htm#getmodule" tppabs="https://webpack.docschina.org/api/compilation-object/#getmodule">getModule</a></li><li class="sidebar-item__anchor" title="findModule"><a href="../compilation-object/index.htm#findmodule" tppabs="https://webpack.docschina.org/api/compilation-object/#findmodule">findModule</a></li><li class="sidebar-item__anchor" title="waitForBuildingFinished"><a href="../compilation-object/index.htm#waitforbuildingfinished" tppabs="https://webpack.docschina.org/api/compilation-object/#waitforbuildingfinished">waitForBuildingFinished</a></li><li class="sidebar-item__anchor" title="buildModule"><a href="../compilation-object/index.htm#buildmodule" tppabs="https://webpack.docschina.org/api/compilation-object/#buildmodule">buildModule</a></li><li class="sidebar-item__anchor" title="processModuleDependencies"><a href="../compilation-object/index.htm#processmoduledependencies" tppabs="https://webpack.docschina.org/api/compilation-object/#processmoduledependencies">processModuleDependencies</a></li><li class="sidebar-item__anchor" title="addModuleDependencies"><a href="../compilation-object/index.htm#addmoduledependencies" tppabs="https://webpack.docschina.org/api/compilation-object/#addmoduledependencies">addModuleDependencies</a></li><li class="sidebar-item__anchor" title="addEntry"><a href="../compilation-object/index.htm#addentry" tppabs="https://webpack.docschina.org/api/compilation-object/#addentry">addEntry</a></li><li class="sidebar-item__anchor" title="prefetch"><a href="../compilation-object/index.htm#prefetch" tppabs="https://webpack.docschina.org/api/compilation-object/#prefetch">prefetch</a></li><li class="sidebar-item__anchor" title="rebuildModule"><a href="../compilation-object/index.htm#rebuildmodule" tppabs="https://webpack.docschina.org/api/compilation-object/#rebuildmodule">rebuildModule</a></li><li class="sidebar-item__anchor" title="finish"><a href="../compilation-object/index.htm#finish" tppabs="https://webpack.docschina.org/api/compilation-object/#finish">finish</a></li><li class="sidebar-item__anchor" title="seal"><a href="../compilation-object/index.htm#seal" tppabs="https://webpack.docschina.org/api/compilation-object/#seal">seal</a></li><li class="sidebar-item__anchor" title="unseal"><a href="../compilation-object/index.htm#unseal" tppabs="https://webpack.docschina.org/api/compilation-object/#unseal">unseal</a></li><li class="sidebar-item__anchor" title="reportDependencyErrorsAndWarnings"><a href="../compilation-object/index.htm#reportdependencyerrorsandwarnings" tppabs="https://webpack.docschina.org/api/compilation-object/#reportdependencyerrorsandwarnings">reportDependencyErrorsAndWarnings</a></li><li class="sidebar-item__anchor" title="addChunkInGroup"><a href="../compilation-object/index.htm#addchunkingroup" tppabs="https://webpack.docschina.org/api/compilation-object/#addchunkingroup">addChunkInGroup</a></li><li class="sidebar-item__anchor" title="addChunk"><a href="../compilation-object/index.htm#addchunk" tppabs="https://webpack.docschina.org/api/compilation-object/#addchunk">addChunk</a></li><li class="sidebar-item__anchor" title="assignDepth"><a href="../compilation-object/index.htm#assigndepth" tppabs="https://webpack.docschina.org/api/compilation-object/#assigndepth">assignDepth</a></li><li class="sidebar-item__anchor" title="getDependencyReference"><a href="../compilation-object/index.htm#getdependencyreference" tppabs="https://webpack.docschina.org/api/compilation-object/#getdependencyreference">getDependencyReference</a></li><li class="sidebar-item__anchor" title="processDependenciesBlocksForChunkGroups"><a href="../compilation-object/index.htm#processdependenciesblocksforchunkgroups" tppabs="https://webpack.docschina.org/api/compilation-object/#processdependenciesblocksforchunkgroups">processDependenciesBlocksForChunkGroups</a></li><li class="sidebar-item__anchor" title="removeReasonsOfDependencyBlock"><a href="../compilation-object/index.htm#removereasonsofdependencyblock" tppabs="https://webpack.docschina.org/api/compilation-object/#removereasonsofdependencyblock">removeReasonsOfDependencyBlock</a></li><li class="sidebar-item__anchor" title="patchChunksAfterReasonRemoval"><a href="../compilation-object/index.htm#patchchunksafterreasonremoval" tppabs="https://webpack.docschina.org/api/compilation-object/#patchchunksafterreasonremoval">patchChunksAfterReasonRemoval</a></li><li class="sidebar-item__anchor" title="removeChunkFromDependencies"><a href="../compilation-object/index.htm#removechunkfromdependencies" tppabs="https://webpack.docschina.org/api/compilation-object/#removechunkfromdependencies">removeChunkFromDependencies</a></li><li class="sidebar-item__anchor" title="sortItemsWithModuleIds"><a href="../compilation-object/index.htm#sortitemswithmoduleids" tppabs="https://webpack.docschina.org/api/compilation-object/#sortitemswithmoduleids">sortItemsWithModuleIds</a></li><li class="sidebar-item__anchor" title="sortItemsWithChunkIds"><a href="../compilation-object/index.htm#sortitemswithchunkids" tppabs="https://webpack.docschina.org/api/compilation-object/#sortitemswithchunkids">sortItemsWithChunkIds</a></li><li class="sidebar-item__anchor" title="summarizeDependencies"><a href="../compilation-object/index.htm#summarizedependencies" tppabs="https://webpack.docschina.org/api/compilation-object/#summarizedependencies">summarizeDependencies</a></li><li class="sidebar-item__anchor" title="createHash"><a href="../compilation-object/index.htm#createhash" tppabs="https://webpack.docschina.org/api/compilation-object/#createhash">createHash</a></li><li class="sidebar-item__anchor" title="createModuleAssets"><a href="../compilation-object/index.htm#createmoduleassets" tppabs="https://webpack.docschina.org/api/compilation-object/#createmoduleassets">createModuleAssets</a></li><li class="sidebar-item__anchor" title="createChunkAssets"><a href="../compilation-object/index.htm#createchunkassets" tppabs="https://webpack.docschina.org/api/compilation-object/#createchunkassets">createChunkAssets</a></li><li class="sidebar-item__anchor" title="getPath"><a href="../compilation-object/index.htm#getpath" tppabs="https://webpack.docschina.org/api/compilation-object/#getpath">getPath</a></li><li class="sidebar-item__anchor" title="getPathWithInfo"><a href="../compilation-object/index.htm#getpathwithinfo" tppabs="https://webpack.docschina.org/api/compilation-object/#getpathwithinfo">getPathWithInfo</a></li><li class="sidebar-item__anchor" title="createChildCompiler"><a href="../compilation-object/index.htm#createchildcompiler" tppabs="https://webpack.docschina.org/api/compilation-object/#createchildcompiler">createChildCompiler</a></li><li class="sidebar-item__anchor" title="checkConstraints"><a href="../compilation-object/index.htm#checkconstraints" tppabs="https://webpack.docschina.org/api/compilation-object/#checkconstraints">checkConstraints</a></li><li class="sidebar-item__anchor" title="emitAsset"><a href="../compilation-object/index.htm#emitasset" tppabs="https://webpack.docschina.org/api/compilation-object/#emitasset">emitAsset</a></li><li class="sidebar-item__anchor" title="updateAsset"><a href="../compilation-object/index.htm#updateasset" tppabs="https://webpack.docschina.org/api/compilation-object/#updateasset">updateAsset</a></li><li class="sidebar-item__anchor" title="deleteAsset"><a href="../compilation-object/index.htm#deleteasset" tppabs="https://webpack.docschina.org/api/compilation-object/#deleteasset">deleteAsset</a></li><li class="sidebar-item__anchor" title="getAssets"><a href="../compilation-object/index.htm#getassets" tppabs="https://webpack.docschina.org/api/compilation-object/#getassets">getAssets</a></li><li class="sidebar-item__anchor" title="getAsset"><a href="../compilation-object/index.htm#getasset" tppabs="https://webpack.docschina.org/api/compilation-object/#getasset">getAsset</a></li></ul></li></ul></div></div><div><h4 class="sidebar__group">Plugins</h4><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../compiler-hooks/index.htm" tppabs="https://webpack.docschina.org/api/compiler-hooks/">compiler é’©å­</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="ç›‘å¬(watching)"><a href="../compiler-hooks/index.htm#watching" tppabs="https://webpack.docschina.org/api/compiler-hooks/#watching">ç›‘å¬(watching)</a></li><li class="sidebar-item__anchor" title="é’©å­"><a href="../compiler-hooks/index.htm#hooks" tppabs="https://webpack.docschina.org/api/compiler-hooks/#hooks">é’©å­</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="entryOption"><a href="../compiler-hooks/index.htm#entryoption" tppabs="https://webpack.docschina.org/api/compiler-hooks/#entryoption">entryOption</a></li><li class="sidebar-item__anchor" title="afterPlugins"><a href="../compiler-hooks/index.htm#afterplugins" tppabs="https://webpack.docschina.org/api/compiler-hooks/#afterplugins">afterPlugins</a></li><li class="sidebar-item__anchor" title="afterResolvers"><a href="../compiler-hooks/index.htm#afterresolvers" tppabs="https://webpack.docschina.org/api/compiler-hooks/#afterresolvers">afterResolvers</a></li><li class="sidebar-item__anchor" title="environment"><a href="../compiler-hooks/index.htm#environment" tppabs="https://webpack.docschina.org/api/compiler-hooks/#environment">environment</a></li><li class="sidebar-item__anchor" title="afterEnvironment"><a href="../compiler-hooks/index.htm#afterenvironment" tppabs="https://webpack.docschina.org/api/compiler-hooks/#afterenvironment">afterEnvironment</a></li><li class="sidebar-item__anchor" title="beforeRun"><a href="../compiler-hooks/index.htm#beforerun" tppabs="https://webpack.docschina.org/api/compiler-hooks/#beforerun">beforeRun</a></li><li class="sidebar-item__anchor" title="additionalPass"><a href="../compiler-hooks/index.htm#additionalpass" tppabs="https://webpack.docschina.org/api/compiler-hooks/#additionalpass">additionalPass</a></li><li class="sidebar-item__anchor" title="run"><a href="../compiler-hooks/index.htm#run" tppabs="https://webpack.docschina.org/api/compiler-hooks/#run">run</a></li><li class="sidebar-item__anchor" title="watchRun"><a href="../compiler-hooks/index.htm#watchrun" tppabs="https://webpack.docschina.org/api/compiler-hooks/#watchrun">watchRun</a></li><li class="sidebar-item__anchor" title="normalModuleFactory"><a href="../compiler-hooks/index.htm#normalmodulefactory" tppabs="https://webpack.docschina.org/api/compiler-hooks/#normalmodulefactory">normalModuleFactory</a></li><li class="sidebar-item__anchor" title="contextModuleFactory"><a href="../compiler-hooks/index.htm#contextmodulefactory" tppabs="https://webpack.docschina.org/api/compiler-hooks/#contextmodulefactory">contextModuleFactory</a></li><li class="sidebar-item__anchor" title="initialize"><a href="../compiler-hooks/index.htm#initialize" tppabs="https://webpack.docschina.org/api/compiler-hooks/#initialize">initialize</a></li><li class="sidebar-item__anchor" title="beforeCompile"><a href="../compiler-hooks/index.htm#beforecompile" tppabs="https://webpack.docschina.org/api/compiler-hooks/#beforecompile">beforeCompile</a></li><li class="sidebar-item__anchor" title="compile"><a href="../compiler-hooks/index.htm#compile" tppabs="https://webpack.docschina.org/api/compiler-hooks/#compile">compile</a></li><li class="sidebar-item__anchor" title="thisCompilation"><a href="../compiler-hooks/index.htm#thiscompilation" tppabs="https://webpack.docschina.org/api/compiler-hooks/#thiscompilation">thisCompilation</a></li><li class="sidebar-item__anchor" title="compilation"><a href="../compiler-hooks/index.htm#compilation" tppabs="https://webpack.docschina.org/api/compiler-hooks/#compilation">compilation</a></li><li class="sidebar-item__anchor" title="make"><a href="../compiler-hooks/index.htm#make" tppabs="https://webpack.docschina.org/api/compiler-hooks/#make">make</a></li><li class="sidebar-item__anchor" title="afterCompile"><a href="../compiler-hooks/index.htm#aftercompile" tppabs="https://webpack.docschina.org/api/compiler-hooks/#aftercompile">afterCompile</a></li><li class="sidebar-item__anchor" title="shouldEmit"><a href="../compiler-hooks/index.htm#shouldemit" tppabs="https://webpack.docschina.org/api/compiler-hooks/#shouldemit">shouldEmit</a></li><li class="sidebar-item__anchor" title="emit"><a href="../compiler-hooks/index.htm#emit" tppabs="https://webpack.docschina.org/api/compiler-hooks/#emit">emit</a></li><li class="sidebar-item__anchor" title="afterEmit"><a href="../compiler-hooks/index.htm#afteremit" tppabs="https://webpack.docschina.org/api/compiler-hooks/#afteremit">afterEmit</a></li><li class="sidebar-item__anchor" title="assetEmitted"><a href="../compiler-hooks/index.htm#assetemitted" tppabs="https://webpack.docschina.org/api/compiler-hooks/#assetemitted">assetEmitted</a></li><li class="sidebar-item__anchor" title="done"><a href="../compiler-hooks/index.htm#done" tppabs="https://webpack.docschina.org/api/compiler-hooks/#done">done</a></li><li class="sidebar-item__anchor" title="failed"><a href="../compiler-hooks/index.htm#failed" tppabs="https://webpack.docschina.org/api/compiler-hooks/#failed">failed</a></li><li class="sidebar-item__anchor" title="invalid"><a href="../compiler-hooks/index.htm#invalid" tppabs="https://webpack.docschina.org/api/compiler-hooks/#invalid">invalid</a></li><li class="sidebar-item__anchor" title="watchClose"><a href="../compiler-hooks/index.htm#watchclose" tppabs="https://webpack.docschina.org/api/compiler-hooks/#watchclose">watchClose</a></li><li class="sidebar-item__anchor" title="infrastructureLog"><a href="../compiler-hooks/index.htm#infrastructurelog" tppabs="https://webpack.docschina.org/api/compiler-hooks/#infrastructurelog">infrastructureLog</a></li><li class="sidebar-item__anchor" title="log"><a href="../compiler-hooks/index.htm#log" tppabs="https://webpack.docschina.org/api/compiler-hooks/#log">log</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../compilation-hooks/index.htm" tppabs="https://webpack.docschina.org/api/compilation-hooks/">compilation é’©å­</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="buildModule"><a href="../compilation-hooks/index.htm#buildmodule" tppabs="https://webpack.docschina.org/api/compilation-hooks/#buildmodule">buildModule</a></li><li class="sidebar-item__anchor" title="rebuildModule"><a href="../compilation-hooks/index.htm#rebuildmodule" tppabs="https://webpack.docschina.org/api/compilation-hooks/#rebuildmodule">rebuildModule</a></li><li class="sidebar-item__anchor" title="failedModule"><a href="../compilation-hooks/index.htm#failedmodule" tppabs="https://webpack.docschina.org/api/compilation-hooks/#failedmodule">failedModule</a></li><li class="sidebar-item__anchor" title="succeedModule"><a href="../compilation-hooks/index.htm#succeedmodule" tppabs="https://webpack.docschina.org/api/compilation-hooks/#succeedmodule">succeedModule</a></li><li class="sidebar-item__anchor" title="finishModules"><a href="../compilation-hooks/index.htm#finishmodules" tppabs="https://webpack.docschina.org/api/compilation-hooks/#finishmodules">finishModules</a></li><li class="sidebar-item__anchor" title="finishRebuildingModule"><a href="../compilation-hooks/index.htm#finishrebuildingmodule" tppabs="https://webpack.docschina.org/api/compilation-hooks/#finishrebuildingmodule">finishRebuildingModule</a></li><li class="sidebar-item__anchor" title="seal"><a href="../compilation-hooks/index.htm#seal" tppabs="https://webpack.docschina.org/api/compilation-hooks/#seal">seal</a></li><li class="sidebar-item__anchor" title="unseal"><a href="../compilation-hooks/index.htm#unseal" tppabs="https://webpack.docschina.org/api/compilation-hooks/#unseal">unseal</a></li><li class="sidebar-item__anchor" title="optimizeDependencies"><a href="../compilation-hooks/index.htm#optimizedependencies" tppabs="https://webpack.docschina.org/api/compilation-hooks/#optimizedependencies">optimizeDependencies</a></li><li class="sidebar-item__anchor" title="afterOptimizeDependencies"><a href="../compilation-hooks/index.htm#afteroptimizedependencies" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afteroptimizedependencies">afterOptimizeDependencies</a></li><li class="sidebar-item__anchor" title="optimize"><a href="../compilation-hooks/index.htm#optimize" tppabs="https://webpack.docschina.org/api/compilation-hooks/#optimize">optimize</a></li><li class="sidebar-item__anchor" title="optimizeModules"><a href="../compilation-hooks/index.htm#optimizemodules" tppabs="https://webpack.docschina.org/api/compilation-hooks/#optimizemodules">optimizeModules</a></li><li class="sidebar-item__anchor" title="afterOptimizeModules"><a href="../compilation-hooks/index.htm#afteroptimizemodules" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afteroptimizemodules">afterOptimizeModules</a></li><li class="sidebar-item__anchor" title="optimizeChunks"><a href="../compilation-hooks/index.htm#optimizechunks" tppabs="https://webpack.docschina.org/api/compilation-hooks/#optimizechunks">optimizeChunks</a></li><li class="sidebar-item__anchor" title="afterOptimizeChunks"><a href="../compilation-hooks/index.htm#afteroptimizechunks" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afteroptimizechunks">afterOptimizeChunks</a></li><li class="sidebar-item__anchor" title="optimizeTree"><a href="../compilation-hooks/index.htm#optimizetree" tppabs="https://webpack.docschina.org/api/compilation-hooks/#optimizetree">optimizeTree</a></li><li class="sidebar-item__anchor" title="afterOptimizeTree"><a href="../compilation-hooks/index.htm#afteroptimizetree" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afteroptimizetree">afterOptimizeTree</a></li><li class="sidebar-item__anchor" title="optimizeChunkModules"><a href="../compilation-hooks/index.htm#optimizechunkmodules" tppabs="https://webpack.docschina.org/api/compilation-hooks/#optimizechunkmodules">optimizeChunkModules</a></li><li class="sidebar-item__anchor" title="afterOptimizeChunkModules"><a href="../compilation-hooks/index.htm#afteroptimizechunkmodules" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afteroptimizechunkmodules">afterOptimizeChunkModules</a></li><li class="sidebar-item__anchor" title="shouldRecord"><a href="../compilation-hooks/index.htm#shouldrecord" tppabs="https://webpack.docschina.org/api/compilation-hooks/#shouldrecord">shouldRecord</a></li><li class="sidebar-item__anchor" title="reviveModules"><a href="../compilation-hooks/index.htm#revivemodules" tppabs="https://webpack.docschina.org/api/compilation-hooks/#revivemodules">reviveModules</a></li><li class="sidebar-item__anchor" title="beforeModuleIds"><a href="../compilation-hooks/index.htm#beforemoduleids" tppabs="https://webpack.docschina.org/api/compilation-hooks/#beforemoduleids">beforeModuleIds</a></li><li class="sidebar-item__anchor" title="moduleIds"><a href="../compilation-hooks/index.htm#moduleids" tppabs="https://webpack.docschina.org/api/compilation-hooks/#moduleids">moduleIds</a></li><li class="sidebar-item__anchor" title="optimizeModuleIds"><a href="../compilation-hooks/index.htm#optimizemoduleids" tppabs="https://webpack.docschina.org/api/compilation-hooks/#optimizemoduleids">optimizeModuleIds</a></li><li class="sidebar-item__anchor" title="afterOptimizeModuleIds"><a href="../compilation-hooks/index.htm#afteroptimizemoduleids" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afteroptimizemoduleids">afterOptimizeModuleIds</a></li><li class="sidebar-item__anchor" title="reviveChunks"><a href="../compilation-hooks/index.htm#revivechunks" tppabs="https://webpack.docschina.org/api/compilation-hooks/#revivechunks">reviveChunks</a></li><li class="sidebar-item__anchor" title="beforeChunkIds"><a href="../compilation-hooks/index.htm#beforechunkids" tppabs="https://webpack.docschina.org/api/compilation-hooks/#beforechunkids">beforeChunkIds</a></li><li class="sidebar-item__anchor" title="chunkIds"><a href="../compilation-hooks/index.htm#chunkids" tppabs="https://webpack.docschina.org/api/compilation-hooks/#chunkids">chunkIds</a></li><li class="sidebar-item__anchor" title="optimizeChunkIds"><a href="../compilation-hooks/index.htm#optimizechunkids" tppabs="https://webpack.docschina.org/api/compilation-hooks/#optimizechunkids">optimizeChunkIds</a></li><li class="sidebar-item__anchor" title="afterOptimizeChunkIds"><a href="../compilation-hooks/index.htm#afteroptimizechunkids" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afteroptimizechunkids">afterOptimizeChunkIds</a></li><li class="sidebar-item__anchor" title="recordModules"><a href="../compilation-hooks/index.htm#recordmodules" tppabs="https://webpack.docschina.org/api/compilation-hooks/#recordmodules">recordModules</a></li><li class="sidebar-item__anchor" title="recordChunks"><a href="../compilation-hooks/index.htm#recordchunks" tppabs="https://webpack.docschina.org/api/compilation-hooks/#recordchunks">recordChunks</a></li><li class="sidebar-item__anchor" title="beforeHash"><a href="../compilation-hooks/index.htm#beforehash" tppabs="https://webpack.docschina.org/api/compilation-hooks/#beforehash">beforeHash</a></li><li class="sidebar-item__anchor" title="afterHash"><a href="../compilation-hooks/index.htm#afterhash" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afterhash">afterHash</a></li><li class="sidebar-item__anchor" title="recordHash"><a href="../compilation-hooks/index.htm#recordhash" tppabs="https://webpack.docschina.org/api/compilation-hooks/#recordhash">recordHash</a></li><li class="sidebar-item__anchor" title="record"><a href="../compilation-hooks/index.htm#record" tppabs="https://webpack.docschina.org/api/compilation-hooks/#record">record</a></li><li class="sidebar-item__anchor" title="beforeModuleAssets"><a href="../compilation-hooks/index.htm#beforemoduleassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#beforemoduleassets">beforeModuleAssets</a></li><li class="sidebar-item__anchor" title="additionalChunkAssets"><a href="../compilation-hooks/index.htm#additionalchunkassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#additionalchunkassets">additionalChunkAssets</a></li><li class="sidebar-item__anchor" title="shouldGenerateChunkAssets"><a href="../compilation-hooks/index.htm#shouldgeneratechunkassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#shouldgeneratechunkassets">shouldGenerateChunkAssets</a></li><li class="sidebar-item__anchor" title="beforeChunkAssets"><a href="../compilation-hooks/index.htm#beforechunkassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#beforechunkassets">beforeChunkAssets</a></li><li class="sidebar-item__anchor" title="additionalAssets"><a href="../compilation-hooks/index.htm#additionalassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#additionalassets">additionalAssets</a></li><li class="sidebar-item__anchor" title="optimizeChunkAssets"><a href="../compilation-hooks/index.htm#optimizechunkassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#optimizechunkassets">optimizeChunkAssets</a></li><li class="sidebar-item__anchor" title="afterOptimizeChunkAssets"><a href="../compilation-hooks/index.htm#afteroptimizechunkassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afteroptimizechunkassets">afterOptimizeChunkAssets</a></li><li class="sidebar-item__anchor" title="optimizeAssets"><a href="../compilation-hooks/index.htm#optimizeassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#optimizeassets">optimizeAssets</a></li><li class="sidebar-item__anchor" title="afterOptimizeAssets"><a href="../compilation-hooks/index.htm#afteroptimizeassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afteroptimizeassets">afterOptimizeAssets</a></li><li class="sidebar-item__anchor" title="processAssets"><a href="../compilation-hooks/index.htm#processassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#processassets">processAssets</a></li><li class="sidebar-item__anchor" title="afterProcessAssets"><a href="../compilation-hooks/index.htm#afterprocessassets" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afterprocessassets">afterProcessAssets</a></li><li class="sidebar-item__anchor" title="needAdditionalSeal"><a href="../compilation-hooks/index.htm#needadditionalseal" tppabs="https://webpack.docschina.org/api/compilation-hooks/#needadditionalseal">needAdditionalSeal</a></li><li class="sidebar-item__anchor" title="afterSeal"><a href="../compilation-hooks/index.htm#afterseal" tppabs="https://webpack.docschina.org/api/compilation-hooks/#afterseal">afterSeal</a></li><li class="sidebar-item__anchor" title="chunkHash"><a href="../compilation-hooks/index.htm#chunkhash" tppabs="https://webpack.docschina.org/api/compilation-hooks/#chunkhash">chunkHash</a></li><li class="sidebar-item__anchor" title="moduleAsset"><a href="../compilation-hooks/index.htm#moduleasset" tppabs="https://webpack.docschina.org/api/compilation-hooks/#moduleasset">moduleAsset</a></li><li class="sidebar-item__anchor" title="chunkAsset"><a href="../compilation-hooks/index.htm#chunkasset" tppabs="https://webpack.docschina.org/api/compilation-hooks/#chunkasset">chunkAsset</a></li><li class="sidebar-item__anchor" title="assetPath"><a href="../compilation-hooks/index.htm#assetpath" tppabs="https://webpack.docschina.org/api/compilation-hooks/#assetpath">assetPath</a></li><li class="sidebar-item__anchor" title="needAdditionalPass"><a href="../compilation-hooks/index.htm#needadditionalpass" tppabs="https://webpack.docschina.org/api/compilation-hooks/#needadditionalpass">needAdditionalPass</a></li><li class="sidebar-item__anchor" title="childCompiler"><a href="../compilation-hooks/index.htm#childcompiler" tppabs="https://webpack.docschina.org/api/compilation-hooks/#childcompiler">childCompiler</a></li><li class="sidebar-item__anchor" title="normalModuleLoader"><a href="../compilation-hooks/index.htm#normalmoduleloader" tppabs="https://webpack.docschina.org/api/compilation-hooks/#normalmoduleloader">normalModuleLoader</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../parser/index.htm" tppabs="https://webpack.docschina.org/api/parser/">JavascriptParser Hooks</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="é’©å­"><a href="../parser/index.htm#hooks" tppabs="https://webpack.docschina.org/api/parser/#hooks">é’©å­</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="evaluateTypeof"><a href="../parser/index.htm#evaluatetypeof" tppabs="https://webpack.docschina.org/api/parser/#evaluatetypeof">evaluateTypeof</a></li><li class="sidebar-item__anchor" title="evaluate"><a href="../parser/index.htm#evaluate" tppabs="https://webpack.docschina.org/api/parser/#evaluate">evaluate</a></li><li class="sidebar-item__anchor" title="evaluateIdentifier"><a href="../parser/index.htm#evaluateidentifier" tppabs="https://webpack.docschina.org/api/parser/#evaluateidentifier">evaluateIdentifier</a></li><li class="sidebar-item__anchor" title="evaluateDefinedIdentifier"><a href="../parser/index.htm#evaluatedefinedidentifier" tppabs="https://webpack.docschina.org/api/parser/#evaluatedefinedidentifier">evaluateDefinedIdentifier</a></li><li class="sidebar-item__anchor" title="evaluateCallExpressionMember"><a href="../parser/index.htm#evaluatecallexpressionmember" tppabs="https://webpack.docschina.org/api/parser/#evaluatecallexpressionmember">evaluateCallExpressionMember</a></li><li class="sidebar-item__anchor" title="statement"><a href="../parser/index.htm#statement" tppabs="https://webpack.docschina.org/api/parser/#statement">statement</a></li><li class="sidebar-item__anchor" title="statementIf"><a href="../parser/index.htm#statementif" tppabs="https://webpack.docschina.org/api/parser/#statementif">statementIf</a></li><li class="sidebar-item__anchor" title="label"><a href="../parser/index.htm#label" tppabs="https://webpack.docschina.org/api/parser/#label">label</a></li><li class="sidebar-item__anchor" title="import"><a href="../parser/index.htm#import" tppabs="https://webpack.docschina.org/api/parser/#import">import</a></li><li class="sidebar-item__anchor" title="importSpecifier"><a href="../parser/index.htm#importspecifier" tppabs="https://webpack.docschina.org/api/parser/#importspecifier">importSpecifier</a></li><li class="sidebar-item__anchor" title="export"><a href="../parser/index.htm#export" tppabs="https://webpack.docschina.org/api/parser/#export">export</a></li><li class="sidebar-item__anchor" title="exportImport"><a href="../parser/index.htm#exportimport" tppabs="https://webpack.docschina.org/api/parser/#exportimport">exportImport</a></li><li class="sidebar-item__anchor" title="exportDeclaration"><a href="../parser/index.htm#exportdeclaration" tppabs="https://webpack.docschina.org/api/parser/#exportdeclaration">exportDeclaration</a></li><li class="sidebar-item__anchor" title="exportExpression"><a href="../parser/index.htm#exportexpression" tppabs="https://webpack.docschina.org/api/parser/#exportexpression">exportExpression</a></li><li class="sidebar-item__anchor" title="exportSpecifier"><a href="../parser/index.htm#exportspecifier" tppabs="https://webpack.docschina.org/api/parser/#exportspecifier">exportSpecifier</a></li><li class="sidebar-item__anchor" title="exportImportSpecifier"><a href="../parser/index.htm#exportimportspecifier" tppabs="https://webpack.docschina.org/api/parser/#exportimportspecifier">exportImportSpecifier</a></li><li class="sidebar-item__anchor" title="varDeclaration"><a href="../parser/index.htm#vardeclaration" tppabs="https://webpack.docschina.org/api/parser/#vardeclaration">varDeclaration</a></li><li class="sidebar-item__anchor" title="varDeclarationLet"><a href="../parser/index.htm#vardeclarationlet" tppabs="https://webpack.docschina.org/api/parser/#vardeclarationlet">varDeclarationLet</a></li><li class="sidebar-item__anchor" title="varDeclarationConst"><a href="../parser/index.htm#vardeclarationconst" tppabs="https://webpack.docschina.org/api/parser/#vardeclarationconst">varDeclarationConst</a></li><li class="sidebar-item__anchor" title="varDeclarationVar"><a href="../parser/index.htm#vardeclarationvar" tppabs="https://webpack.docschina.org/api/parser/#vardeclarationvar">varDeclarationVar</a></li><li class="sidebar-item__anchor" title="canRename"><a href="../parser/index.htm#canrename" tppabs="https://webpack.docschina.org/api/parser/#canrename">canRename</a></li><li class="sidebar-item__anchor" title="rename"><a href="../parser/index.htm#rename" tppabs="https://webpack.docschina.org/api/parser/#rename">rename</a></li><li class="sidebar-item__anchor" title="assigned"><a href="../parser/index.htm#assigned" tppabs="https://webpack.docschina.org/api/parser/#assigned">assigned</a></li><li class="sidebar-item__anchor" title="assign"><a href="../parser/index.htm#assign" tppabs="https://webpack.docschina.org/api/parser/#assign">assign</a></li><li class="sidebar-item__anchor" title="typeof"><a href="../parser/index.htm#typeof" tppabs="https://webpack.docschina.org/api/parser/#typeof">typeof</a></li><li class="sidebar-item__anchor" title="call"><a href="../parser/index.htm#call" tppabs="https://webpack.docschina.org/api/parser/#call">call</a></li><li class="sidebar-item__anchor" title="callAnyMember"><a href="../parser/index.htm#callanymember" tppabs="https://webpack.docschina.org/api/parser/#callanymember">callAnyMember</a></li><li class="sidebar-item__anchor" title="new"><a href="../parser/index.htm#new" tppabs="https://webpack.docschina.org/api/parser/#new">new</a></li><li class="sidebar-item__anchor" title="expression"><a href="../parser/index.htm#expression" tppabs="https://webpack.docschina.org/api/parser/#expression">expression</a></li><li class="sidebar-item__anchor" title="expressionConditionalOperator"><a href="../parser/index.htm#expressionconditionaloperator" tppabs="https://webpack.docschina.org/api/parser/#expressionconditionaloperator">expressionConditionalOperator</a></li><li class="sidebar-item__anchor" title="program"><a href="../parser/index.htm#program" tppabs="https://webpack.docschina.org/api/parser/#program">program</a></li></ul></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../plugins/index.htm" tppabs="https://webpack.docschina.org/api/plugins/">Plugin API</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="Tapable"><a href="../plugins/index.htm#tapable" tppabs="https://webpack.docschina.org/api/plugins/#tapable">Tapable</a></li><li class="sidebar-item__anchor" title="æ’ä»¶ç±»å‹"><a href="../plugins/index.htm#plugin-types" tppabs="https://webpack.docschina.org/api/plugins/#plugin-types">æ’ä»¶ç±»å‹</a></li><li class="sidebar-item__anchor" title="è‡ªå®šä¹‰é’©å­"><a href="../plugins/index.htm#custom-hooks" tppabs="https://webpack.docschina.org/api/plugins/#custom-hooks">è‡ªå®šä¹‰é’©å­</a></li><li class="sidebar-item__anchor" title="è¿›åº¦æŠ¥å‘Š"><a href="../plugins/index.htm#reporting-progress" tppabs="https://webpack.docschina.org/api/plugins/#reporting-progress">è¿›åº¦æŠ¥å‘Š</a></li><li class="sidebar-item__anchor" title="æ—¥å¿—"><a href="../plugins/index.htm#logging" tppabs="https://webpack.docschina.org/api/plugins/#logging">æ—¥å¿—</a></li><li class="sidebar-item__anchor" title="ä¸‹ä¸€æ­¥"><a href="../plugins/index.htm#next-steps" tppabs="https://webpack.docschina.org/api/plugins/#next-steps">ä¸‹ä¸€æ­¥</a></li></ul></div></div><div><div class="sidebar-item  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="15" height="17" fill="#175d96" class="sidebar-item__toggle"><path d="M9.2 4.5l4.5 4.7c.2.2.3.5.3.8s-.1.6-.3.8l-4.5 4.7c-.5.4-1.2.4-1.7 0-.4-.5-.4-1 0-1.6l3.8-3.9-3.8-4c-.4-.4-.4-1 0-1.5.5-.4 1.2-.4 1.7 0z"></path></svg><a class="sidebar-item__title" href="../resolvers/index.htm" tppabs="https://webpack.docschina.org/api/resolvers/">è§£æå™¨ï¼ˆResolversï¼‰</a><ul class="sidebar-item__anchors"><li class="sidebar-item__anchor" title="ç±»å‹"><a href="../resolvers/index.htm#types" tppabs="https://webpack.docschina.org/api/resolvers/#types">ç±»å‹</a></li><li class="sidebar-item__anchor" title="é…ç½®é€‰é¡¹"><a href="../resolvers/index.htm#configuration-options" tppabs="https://webpack.docschina.org/api/resolvers/#configuration-options">é…ç½®é€‰é¡¹</a></li></ul></div></div><div class="sidebar__docs-version">You are reading webpack <!-- -->5<!-- --> documentation. Change here to:<ul><li><a rel="nofollow" href="javascript:if(confirm('https://v4.webpack.docschina.org/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://v4.webpack.docschina.org/'" tppabs="https://v4.webpack.docschina.org/">webpack <!-- -->4<!-- --> documentation</a></li></ul></div></div></nav><section class="page"><div class="page-links"><a class="page-links__link" href="javascript:if(confirm('https://github.com/docschina/webpack.js.org/edit/cn/src/content/api/printable.md  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/docschina/webpack.js.org/edit/cn/src/content/api/printable.md'" tppabs="https://github.com/docschina/webpack.js.org/edit/cn/src/content/api/printable.md">ç¼–è¾‘æ­¤é¡µ<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="page-links__icon" width="12" fill="#1a6bac"><path d="M17.6 2.4C16 1 15 1.2 15 1.2l-6 6L2.2 14l-1 4.8 4.8-1 6.7-6.8 6-6s.3-1.1-1.1-2.6zm-12 14.8l-1.5.4-.7-1-1-.7.4-1.6.5-.4s.8 0 1.8 1 1 1.8 1 1.8l-.4.5z"></path></svg></a><span class="page-links__gap">|</span><button class="page-links__link page-links__print as-link" title="Print this page">æ‰“å°æ–‡æ¡£<img src="../../icon-print.42ad40feec51e6f5f553.svg" tppabs="https://webpack.docschina.org/icon-print.42ad40feec51e6f5f553.svg" alt=""/></button></div><div class="markdown"><h1>Printable</h1><div><h1 id="ç®€ä»‹">ç®€ä»‹<a href="#%E7%AE%80%E4%BB%8B" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>Webpack æä¾›äº†å¤šç§æ¥å£æ¥è‡ªå®šä¹‰ç¼–è¯‘è¿‡ç¨‹ã€‚ æ¥å£é—´å­˜åœ¨ä¸€äº›é‡å åŠŸèƒ½ï¼Œä¾‹å¦‚é…ç½®é€‰é¡¹å¯èƒ½é€šè¿‡ CLI æ ‡å¿—å¯ç”¨ï¼Œ è€Œå…¶ä»–ä»…å­˜åœ¨äºå•ä¸ªæ¥å£ã€‚ ä»¥ä¸‹æ¦‚å¿µå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿå…¥é—¨ã€‚</p> <h2 id="cli">CLI <a href="#cli" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰ï¼Œ ç”¨äºé…ç½®æ„å»ºå¹¶ä¸ä¹‹äº¤äº’ã€‚å®ƒåœ¨æ—©æœŸåŸå‹åˆ¶ä½œå’Œæ€§èƒ½åˆ†æçš„æƒ…å†µä¸‹ç‰¹åˆ«æœ‰ç”¨ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ CLI åªæ˜¯ç”¨äºé€šè¿‡é…ç½®æ–‡ä»¶å’Œä¸€äº›æ ‡å¿—ï¼ˆä¾‹å¦‚<code>--env</code>ï¼‰æ¥å¯åŠ¨è¿›ç¨‹ã€‚</p> <p><a href="../cli.htm" tppabs="https://webpack.docschina.org/api/cli">äº†è§£æ›´å¤šå…³äº CLI çš„çŸ¥è¯†ï¼</a></p> <h2 id="module">æ¨¡å— <a href="#module" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>ä½¿ç”¨ webpack å¤„ç†æ¨¡å—æ—¶ï¼Œ æœ€é‡è¦çš„æ˜¯ç†è§£ä¸åŒçš„æ¨¡å—è¯­æ³• -- ç‰¹åˆ«æ˜¯å—æ”¯æŒçš„<a href="../module-methods.htm" tppabs="https://webpack.docschina.org/api/module-methods">æ–¹æ³•</a>å’Œ<a href="../module-variables.htm" tppabs="https://webpack.docschina.org/api/module-variables">å˜é‡</a>ã€‚</p> <p><a href="../module-methods.htm" tppabs="https://webpack.docschina.org/api/module-methods">äº†è§£æ›´å¤šå…³äºæ¨¡å—çš„çŸ¥è¯†ï¼</a></p> <h2 id="node">Node <a href="#node" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>å°½ç®¡å¤§å¤šæ•°ç”¨æˆ·å¯ä»¥å€ŸåŠ© CLI å’Œé…ç½®æ–‡ä»¶æ§åˆ¶ç¼–è¯‘ï¼Œ é€šè¿‡ Node æ¥å£å¯ä»¥å®ç°æ›´ç»†ç²’åº¦çš„æ§åˆ¶ã€‚ è¿™åŒ…æ‹¬ä¼ é€’å¤šä¸ªé…ç½®ã€ ä»¥ç¨‹åºçš„æ–¹å¼è¿è¡Œã€æŸ¥é˜…å¹¶æ”¶é›†ç»Ÿè®¡ä¿¡æ¯ã€‚</p> <p><a href="../node.htm" tppabs="https://webpack.docschina.org/api/node">äº†è§£æ›´å¤šå…³äº Node API çš„çŸ¥è¯†ï¼</a></p> <h2 id="loaders">Loaders <a href="#loaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>Loaders ç”¨äºå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œè½¬æ¢ã€‚ å®ƒä»¬è¢«ç¼–å†™æˆä¸€ç±»å°†æºä»£ç ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œ å¹¶å°†ç¼–è¯‘è½¬æ¢åçš„æ–°ç‰ˆæœ¬ä»£ç ä¼ å‡ºçš„å‡½æ•°ä½“ã€‚</p> <p><a href="../loaders.htm" tppabs="https://webpack.docschina.org/api/loaders">äº†è§£æ›´å¤šå…³äº loaders çš„çŸ¥è¯†ï¼</a></p> <h2 id="plugins">æ’ä»¶ <a href="#plugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>æ’ä»¶æ¥å£å…è®¸ç”¨æˆ·ç›´æ¥ä»‹å…¥ç¼–è¯‘è¿‡ç¨‹ã€‚ æ’ä»¶å¯ä»¥åœ¨ä¸åŒæ—¶æœŸè¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸæŒ‚é’©ä¸Šæ³¨å†Œå›è°ƒå‡½æ•°ã€‚ åœ¨å•ä¸ªç¼–è¯‘æµç¨‹ä¸­ï¼Œå½“æ¯ä¸ªé’©å­éƒ½è¢«æ‰§è¡Œåï¼Œæ’ä»¶å°†æ‹¥æœ‰ å½“å‰ç¼–è¯‘æµç¨‹çš„å®Œæ•´è®¿é—®æƒé™ã€‚</p> <p><a href="../plugins.htm" tppabs="https://webpack.docschina.org/api/plugins">äº†è§£æ›´å¤šå…³äºæ’ä»¶çš„çŸ¥è¯†ï¼</a></p> <h1 id="å‘½ä»¤è¡Œæ¥å£ï¼ˆCLIï¼‰">å‘½ä»¤è¡Œæ¥å£ï¼ˆCLIï¼‰<a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%8E%A5%E5%8F%A3%EF%BC%88CLI%EF%BC%89" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>ä¸ºäº†æ›´åˆé€‚ä¸”æ–¹ä¾¿åœ°ä½¿ç”¨é…ç½®ï¼Œå¯ä»¥åœ¨ <code>webpack.config.js</code> ä¸­å¯¹ webpack è¿›è¡Œé…ç½®ã€‚CLI ä¸­ä¼ å…¥çš„ä»»ä½•å‚æ•°ä¼šåœ¨é…ç½®æ–‡ä»¶ä¸­æ˜ å°„ä¸ºå¯¹åº”çš„å‚æ•°ã€‚</p> <p>å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…è¿‡ webpack å’Œ CLIï¼Œè¯·å…ˆé˜…è¯» <a href="../../guides/installation.htm" tppabs="https://webpack.docschina.org/guides/installation">å®‰è£…æŒ‡å—</a>ã€‚</p> <h2 id="commands">å‘½ä»¤ <a href="#commands" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>webpack-cli æä¾›äº†è®¸å¤šå‘½ä»¤æ¥ä½¿ webpack çš„å·¥ä½œå˜å¾—ç®€å•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œwebpack æä¾›äº†ä»¥ä¸‹å‘½ä»¤ï¼š</p> <table> <thead> <tr> <th>å‘½ä»¤</th> <th>åˆ«å</th> <th>æè¿°</th> </tr> </thead> <tbody> <tr> <td data-th="å‘½ä»¤"><span><code>init</code></span></td> <td data-th="åˆ«å"><span>c</span></td> <td data-th="æè¿°"><span>åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ webpack é…ç½®</span></td> </tr> <tr> <td data-th="å‘½ä»¤"><span><code>migrate</code></span></td> <td data-th="åˆ«å"><span>m</span></td> <td data-th="æè¿°"><span>å°†é…ç½®è¿ç§»åˆ°æ–°ç‰ˆæœ¬</span></td> </tr> <tr> <td data-th="å‘½ä»¤"><span><code>loader</code></span></td> <td data-th="åˆ«å"><span>l</span></td> <td data-th="æè¿°"><span>ç”Ÿæˆä¸€ä¸ª loader ä»“åº“</span></td> </tr> <tr> <td data-th="å‘½ä»¤"><span><code>plugin</code></span></td> <td data-th="åˆ«å"><span>p</span></td> <td data-th="æè¿°"><span>ç”Ÿæˆä¸€ä¸ª plugin ä»“åº“</span></td> </tr> <tr> <td data-th="å‘½ä»¤"><span><code>info</code></span></td> <td data-th="åˆ«å"><span>i</span></td> <td data-th="æè¿°"><span>è¾“å‡ºæœ‰å…³ç³»ç»Ÿå’Œä¾èµ–çš„ä¿¡æ¯</span></td> </tr> <tr> <td data-th="å‘½ä»¤"><span><code>serve</code></span></td> <td data-th="åˆ«å"><span>s</span></td> <td data-th="æè¿°"><span>è¿è¡Œ webpack Dev Server</span></td> </tr> </tbody> </table> <h2 id="flags">Flags <a href="#flags" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>webpack-cli æä¾›äº†è®¸å¤š flag æ¥ä½¿ webpack çš„å·¥ä½œå˜å¾—ç®€å•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œwebpack æä¾›äº†ä»¥ä¸‹ flagï¼š</p> <p>æ³¨æ„ï¼šè¿™äº›æ˜¯ webpack v4 çš„ flagï¼Œä» v5 å¼€å§‹ CLI å¼€å§‹æ”¯æŒ <a href="../cli/index.htm#core-flags" tppabs="https://webpack.docschina.org/api/cli/#core-flags">æ ¸å¿ƒ flags</a>ã€‚</p> <table> <thead> <tr> <th>Flag / åˆ«å</th> <th>ç±»å‹</th> <th>æè¿°</th> </tr> </thead> <tbody> <tr> <td data-th="Flag / åˆ«å"><span><code>--entry</code></span></td> <td data-th="ç±»å‹"><span>string[]</span></td> <td data-th="æè¿°"><span>åº”ç”¨ç¨‹åºçš„å…¥å£æ–‡ä»¶ï¼Œä¾‹å¦‚ <code>./src/main.js</code></span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--config, -c</code></span></td> <td data-th="ç±»å‹"><span>string[]</span></td> <td data-th="æè¿°"><span>æä¾› webpack é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œä¾‹å¦‚ <code>./webpack.config.js</code></span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--config-name</code></span></td> <td data-th="ç±»å‹"><span>string[]</span></td> <td data-th="æè¿°"><span>è¦ä½¿ç”¨çš„é…ç½®å</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--name</code></span></td> <td data-th="ç±»å‹"><span>string</span></td> <td data-th="æè¿°"><span>é…ç½®åç§°ï¼Œåœ¨åŠ è½½å¤šä¸ªé…ç½®æ—¶ä½¿ç”¨</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--color</code></span></td> <td data-th="ç±»å‹"><span>boolean</span></td> <td data-th="æè¿°"><span>å¯ç”¨æ§åˆ¶å°é¢œè‰²</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--merge, -m</code></span></td> <td data-th="ç±»å‹"><span>boolean</span></td> <td data-th="æè¿°"><span>ä½¿ç”¨ webpack-merge åˆå¹¶ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ <code>-c ./webpack.config.js -c ./webpack.test.config.js</code></span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--env</code></span></td> <td data-th="ç±»å‹"><span>string[]</span></td> <td data-th="æè¿°"><span>å½“å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¼ é€’ç»™é…ç½®çš„ç¯å¢ƒå˜é‡</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--progress</code></span></td> <td data-th="ç±»å‹"><span>boolean, string</span></td> <td data-th="æè¿°"><span>åœ¨æ„å»ºè¿‡ç¨‹ä¸­æ‰“å°ç¼–è¯‘è¿›åº¦</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--help</code></span></td> <td data-th="ç±»å‹"><span>boolean</span></td> <td data-th="æè¿°"><span>è¾“å‡ºæ‰€æœ‰æ”¯æŒçš„ flag å’Œå‘½ä»¤</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--output-path, -o</code></span></td> <td data-th="ç±»å‹"><span>string</span></td> <td data-th="æè¿°"><span>webpack ç”Ÿæˆæ–‡ä»¶çš„è¾“å‡ºä½ç½®ï¼Œä¾‹å¦‚ <code>./dist</code></span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--target, -t</code></span></td> <td data-th="ç±»å‹"><span>string[]</span></td> <td data-th="æè¿°"><span>è®¾ç½®è¦æ„å»ºçš„ target</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--watch, -w</code></span></td> <td data-th="ç±»å‹"><span>boolean</span></td> <td data-th="æè¿°"><span>ç›‘å¬æ–‡ä»¶å˜åŒ–</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--hot, -h</code></span></td> <td data-th="ç±»å‹"><span>boolean</span></td> <td data-th="æè¿°"><span>å¯ç”¨ HMR</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--devtool, -d</code></span></td> <td data-th="ç±»å‹"><span>string</span></td> <td data-th="æè¿°"><span>æ§åˆ¶æ˜¯å¦ç”Ÿæˆ source mapï¼Œä»¥åŠå¦‚ä½•ç”Ÿæˆ</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--prefetch</code></span></td> <td data-th="ç±»å‹"><span>string</span></td> <td data-th="æè¿°"><span>é¢„å…ˆå‘ç”Ÿè¯·æ±‚</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--json, -j</code></span></td> <td data-th="ç±»å‹"><span>boolean, string</span></td> <td data-th="æè¿°"><span>å°†ç»“æœæ‰“å°æˆ JSON æ ¼å¼æˆ–å­˜å‚¨åœ¨æ–‡ä»¶ä¸­</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--mode</code></span></td> <td data-th="ç±»å‹"><span>string</span></td> <td data-th="æè¿°"><span>å®šä¹‰ webpack æ‰€éœ€çš„ mode</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--version, -v</code></span></td> <td data-th="ç±»å‹"><span>boolean</span></td> <td data-th="æè¿°"><span>è·å–å½“å‰ cli ç‰ˆæœ¬</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--stats</code></span></td> <td data-th="ç±»å‹"><span>boolean, string</span></td> <td data-th="æè¿°"><span>å®ƒå‘Šè¯‰ webpack å¦‚ä½•å¤„ç† stats</span></td> </tr> <tr> <td data-th="Flag / åˆ«å"><span><code>--analyze</code></span></td> <td data-th="ç±»å‹"><span>boolean</span></td> <td data-th="æè¿°"><span>å®ƒè°ƒç”¨ <code>webpack-bundle-analyzer</code> æ’ä»¶æ¥è·å– bundle ä¿¡æ¯</span></td> </tr> </tbody> </table> <h3 id="negated-flags">Negated Flags <a href="#negated-flags" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <table> <thead> <tr> <th>Flag</th> <th>æè¿°</th> </tr> </thead> <tbody> <tr> <td data-th="Flag"><span>--no-color</span></td> <td data-th="æè¿°"><span>ç¦ç”¨æ§åˆ¶å°é¢œè‰²</span></td> </tr> <tr> <td data-th="Flag"><span>--no-hot</span></td> <td data-th="æè¿°"><span>å¦‚æœä½ é€šè¿‡é…ç½®å¯ç”¨äº† HMRï¼Œåˆ™ç¦ç”¨å®ƒ</span></td> </tr> <tr> <td data-th="Flag"><span>--no-stats</span></td> <td data-th="æè¿°"><span>ç¦ç”¨ä»»ä½•ç”± webpack emit å‡ºæ¥çš„ stats</span></td> </tr> <tr> <td data-th="Flag"><span>--no-watch</span></td> <td data-th="æè¿°"><span>ç¦ç”¨æ–‡ä»¶å˜æ›´çš„ç›‘å¬</span></td> </tr> <tr> <td data-th="Flag"><span>--no-devtool</span></td> <td data-th="æè¿°"><span>ç¦æ­¢ç”Ÿæˆ source maps</span></td> </tr> </tbody> </table> <h3 id="core-flags">æ ¸å¿ƒ Flags <a href="#core-flags" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ä» CLI v4 å’Œ webpack v5 å¼€å§‹ï¼ŒCLI å°†é‡‡ç”¨ä» webpack çš„ core ä¸­å¯¼å…¥æ•´ä¸ªé…ç½®çš„æ¨¡å¼ï¼Œå…è®¸ CLI è°ƒæ•´å‡ ä¹æ‰€æœ‰é…ç½®é¡¹ã€‚</p> <p><strong>é“¾æ¥ä¸­æ˜¯ webpack v5 å’Œ CLI v4 æ”¯æŒçš„æ‰€æœ‰æ ¸å¿ƒ flag åˆ—è¡¨ - <a href="javascript:if(confirm('https://github.com/webpack/webpack-cli/tree/next/packages/webpack-cli  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/webpack-cli/tree/next/packages/webpack-cli#webpack-5'" tppabs="https://github.com/webpack/webpack-cli/tree/next/packages/webpack-cli#webpack-5">è¯¦æˆ³</a></strong></p> <p>ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³åœ¨é¡¹ç›®ä¸­å¯ç”¨æ€§èƒ½æç¤ºï¼Œä½ éœ€åœ¨é…ç½®ä¸­ä½¿ç”¨<a href="../../configuration/performance/index.htm#performancehints" tppabs="https://webpack.docschina.org/configuration/performance/#performancehints">æ­¤</a>é€‰é¡¹ï¼Œè€Œå¦‚æœä½¿ç”¨æ ¸å¿ƒ flagï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p> <pre><code class="hljs language-bash">npx webpack --performance-hints warning</code></pre> <h2 id="usage">ç”¨æ³• <a href="#usage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="with-configuration-file">ä½¿ç”¨é…ç½®æ–‡ä»¶ <a href="#with-configuration-file" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-bash">npx webpack <span class="token punctuation">[</span>--config webpack.config.js<span class="token punctuation">]</span></code></pre> <p>é…ç½®æ–‡ä»¶ä¸­çš„ç›¸å…³é€‰é¡¹ï¼Œè¯·å‚é˜…<a href="../../configuration.htm" tppabs="https://webpack.docschina.org/configuration">é…ç½®</a>ã€‚</p> <h3 id="without-configuration-file">ä¸ä½¿ç”¨é…ç½®æ–‡ä»¶ <a href="#without-configuration-file" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-bash">npx webpack <span class="token operator">&#x3C;</span>entry<span class="token operator">></span> <span class="token punctuation">[</span><span class="token operator">&#x3C;</span>entry<span class="token operator">></span><span class="token punctuation">]</span> -o <span class="token operator">&#x3C;</span>output-path<span class="token operator">></span></code></pre> <p><strong>example</strong></p> <pre><code class="hljs language-bash">npx webpack --entry ./first.js --entry ./second.js --output-path /build</code></pre> <p><strong><code>&#x3C;entry></code></strong></p> <p>æ„å»ºé¡¹ç›®æ—¶å…¥å£å¯ä»¥é…ç½®ä¸€ä¸ªæ–‡ä»¶åæˆ–ä¸€ç»„è¢«å‘½åè¿‡çš„æ–‡ä»¶åã€‚ä½ å¯ä»¥ä¼ é€’å¤šä¸ªå…¥å£ï¼ˆæ¯ä¸ªå…¥å£åœ¨å¯åŠ¨æ—¶åŠ è½½ï¼‰ã€‚å¦‚æœä¼ é€’ä¸€ä¸ªå½¢å¼ä¸º <code>&#x3C;name> = &#x3C;request></code> çš„é”®å€¼å¯¹ï¼Œåˆ™å¯ä»¥åˆ›å»ºä¸€ä¸ªé¢å¤–çš„å…¥å£èµ·ç‚¹ã€‚å®ƒå°†è¢«æ˜ å°„åˆ°é…ç½®é€‰é¡¹ï¼ˆconfiguration optionï¼‰çš„ <code>entry</code> å±æ€§ä¸­ã€‚</p> <p><strong><code>&#x3C;output></code></strong></p> <p>ç”¨äºå­˜å‚¨æ„å»ºåçš„æ–‡ä»¶è·¯å¾„ã€‚å®ƒå°†æ˜ å°„åˆ°é…ç½®é€‰é¡¹ <code>output.path</code>ã€‚</p> <p><strong>ç¤ºä¾‹</strong></p> <p>å‡è®¾ä½ çš„é¡¹ç›®ç»“æ„åƒä¸‹é¢è¿™æ ·ï¼š</p> <pre><code class="hljs language-bash"><span class="token builtin class-name">.</span>
â”œâ”€â”€ dist
â”œâ”€â”€ index.html
â””â”€â”€ src
    â”œâ”€â”€ index.js
    â”œâ”€â”€ index2.js
    â””â”€â”€ others.js</code></pre> <pre><code class="hljs language-bash">npx webpack ./src/index.js -o dist</code></pre> <p>è¿™å°†å¯¹æºç è¿›è¡Œæ‰“åŒ…ï¼Œå…¶å…¥å£ä¸º <code>index.js</code>ï¼Œä¸” bundle æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ä¸º <code>dist</code>ã€‚</p> <pre><code class="hljs language-bash">asset main.js <span class="token number">142</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
./src/index.js <span class="token number">30</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
./src/others.js <span class="token number">1</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.1</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">187</span> ms</code></pre> <pre><code class="hljs language-bash">npx webpack ./src/index.js ./src/others2.js -o dist/</code></pre> <p>ä»¥å¤šä¸ªå…¥å£çš„æ–¹å¼æ‰“åŒ…æ–‡ä»¶</p> <pre><code class="hljs language-bash">asset main.js <span class="token number">142</span> bytes <span class="token punctuation">[</span>compared <span class="token keyword">for</span> emit<span class="token punctuation">]</span> <span class="token punctuation">[</span>minimized<span class="token punctuation">]</span> <span class="token punctuation">(</span>name: main<span class="token punctuation">)</span>
./src/index.js <span class="token number">30</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
./src/others2.js <span class="token number">1</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
./src/others.js <span class="token number">1</span> bytes <span class="token punctuation">[</span>built<span class="token punctuation">]</span> <span class="token punctuation">[</span>code generated<span class="token punctuation">]</span>
webpack <span class="token number">5.1</span>.0 compiled successfully <span class="token keyword">in</span> <span class="token number">198</span> ms</code></pre> <h2 id="default-configurations">é»˜è®¤é…ç½® <a href="#default-configurations" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>CLI ä¼šåœ¨ä½ çš„é¡¹ç›®è·¯å¾„ä¸­å¯»æ‰¾é»˜è®¤é…ç½®ï¼Œä»¥ä¸‹æ˜¯ CLI é‡‡é›†åˆ°çš„é…ç½®æ–‡ä»¶ã€‚</p> <p>æ­¤å¤„æŒ‰é¡ºåºé€’å¢è¿›è¡Œä¼˜å…ˆçº§æŸ¥è¯¢ï¼š</p> <blockquote> <p>ç¤ºä¾‹ â€”â€” é…ç½®æ–‡ä»¶çš„æŸ¥æ‰¾é¡ºåº .webpack/webpackfile > .webpack/webpack.config.js > webpack.config.js</p> </blockquote> <pre><code class="hljs language-txt">'webpack.config',
'.webpack/webpack.config',
'.webpack/webpackfile',
</code></pre> <h2 id="common-options">é€šç”¨é…ç½® <a href="#common-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <blockquote class="warning"> <p>æ³¨æ„ï¼Œå‘½ä»¤è¡Œæ¥å£ï¼ˆCommand Line Interfaceï¼‰å‚æ•°çš„ä¼˜å…ˆçº§ï¼Œé«˜äºé…ç½®æ–‡ä»¶å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°† <a href="../../configuration/mode/index.htm#usage" tppabs="https://webpack.docschina.org/configuration/mode/#usage"><code>--mode="production"</code></a> ä¼ å…¥ webpack CLIï¼Œè€Œé…ç½®æ–‡ä»¶ä½¿ç”¨çš„æ˜¯ <code>development</code>ï¼Œæœ€ç»ˆä¼šä½¿ç”¨ <code>production</code>ã€‚</p> </blockquote> <p><strong>åˆ—å‡ºå‘½ä»¤è¡Œæ‰€æœ‰å¯ç”¨çš„å‘½ä»¤å’Œ flag</strong></p> <pre><code class="hljs language-bash">npx webpack --help</code></pre> <p><strong>æ˜¾ç¤ºå•ä¸ªå‘½ä»¤æˆ–æ ‡å¿—çš„å¸®åŠ©æç¤º</strong></p> <pre><code class="hljs language-bash">npx webpack --help <span class="token operator">&#x3C;</span>command<span class="token operator">></span>
npx webpack --help --<span class="token operator">&#x3C;</span>flag<span class="token operator">></span></code></pre> <p><strong>æ˜¾ç¤ºå·²å®‰è£…çš„ package ä»¥åŠå­ package çš„ç‰ˆæœ¬</strong>ã€‚</p> <p>å¦‚éœ€æ£€æŸ¥ä½ æ­£åœ¨ä½¿ç”¨çš„ <code>webpack</code> å’Œ <code>webpack-cli</code> çš„ç‰ˆæœ¬ï¼Œåªéœ€è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p> <pre><code class="hljs language-bash">npx webpack --version</code></pre> <p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p> <pre><code class="hljs language-bash">webpack-cli <span class="token number">4.2</span>.0
webpack <span class="token number">5.4</span>.0</code></pre> <p>å¦‚éœ€æ£€æŸ¥ <code>webpack-cli</code> å­åŒ…çš„ç‰ˆæœ¬ï¼ˆå¦‚ <code>@webpack-cli/init</code>ï¼‰ï¼Œåªéœ€è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p> <pre><code class="hljs language-bash">npx webpack init --version</code></pre> <p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p> <pre><code class="hljs language-bash">@webpack-cli/init <span class="token number">1.0</span>.3
webpack-cli <span class="token number">4.2</span>.0
webpack <span class="token number">5.4</span>.0</code></pre> <p><strong>ä½¿ç”¨é…ç½®æ–‡ä»¶è¿›è¡Œæ„å»º</strong></p> <p>æŒ‡å®šå…¶å®ƒçš„<a href="../../configuration.htm" tppabs="https://webpack.docschina.org/configuration">é…ç½®</a>æ–‡ä»¶ã€‚é…ç½®æ–‡ä»¶é»˜è®¤ä¸º <code>webpack.config.js</code>ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨å…¶å®ƒé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åŠ å…¥è¿™ä¸ªå‚æ•°ã€‚</p> <pre><code class="hljs language-bash">npx webpack --config example.config.js</code></pre> <p><strong>ä»¥ JSON æ ¼å¼è¾“å‡º webpack çš„è¿è¡Œç»“æœ</strong></p> <pre><code class="hljs language-bash">npx webpack --json</code></pre> <p><strong>å¦‚æœä½ æƒ³æŠŠ stats æ•°æ®å­˜å‚¨ä¸º JSON è€Œéè¾“å‡ºï¼Œä½ å¯ä»¥ä½¿ç”¨ï¼š</strong></p> <pre><code class="hljs language-bash">npx webpack --json stats.json</code></pre> <p>åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œwebpack ä¼šæ‰“å°å‡º bundleã€chunk ä»¥åŠ timing ç»†èŠ‚çš„ stats ä¿¡æ¯ã€‚ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œä¼šè¾“å‡º JSON å¯¹è±¡ã€‚è¿™ä¸ªè¾“å‡ºç»“æœå¯ä»¥è¢« webpack çš„ <a href="javascript:if(confirm('https://webpack.github.io/analyse/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://webpack.github.io/analyse/'" tppabs="https://webpack.github.io/analyse/">analyse å·¥å…·</a>ï¼Œæˆ–è€… chrisbateman çš„ <a href="javascript:if(confirm('https://chrisbateman.github.io/webpack-visualizer/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://chrisbateman.github.io/webpack-visualizer/'" tppabs="https://chrisbateman.github.io/webpack-visualizer/">webpack-visualizer</a>ï¼Œå†æˆ–è€… th0r çš„ <a href="javascript:if(confirm('https://github.com/webpack-contrib/webpack-bundle-analyzer  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack-contrib/webpack-bundle-analyzer'" tppabs="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack-bundle-analyzer</a> æ‰€è¯†åˆ«ã€‚analyse å·¥å…·ä¼šæ¥æ”¶ JSONï¼Œå¹¶ä»¥å›¾å½¢çš„å½¢å¼å±•ç¤ºæ‰€æœ‰æ„å»ºçš„ç»†èŠ‚ã€‚</p> <blockquote class="tip"> <p>è¯·æŸ¥é˜… <a href="../stats.htm" tppabs="https://webpack.docschina.org/api/stats">stats æ•°æ® api</a>ï¼Œäº†è§£æ›´å¤šå…³äºç”Ÿæˆçš„ stats æ•°æ®ã€‚</p> </blockquote> <h2 id="environment-options">Environment é€‰é¡¹ <a href="#environment-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>å½“ webpack é…ç½®<a href="../../configuration/configuration-types/index.htm#exporting-a-function" tppabs="https://webpack.docschina.org/configuration/configuration-types/#exporting-a-function">å¯¼å‡ºä¸ºå‡½æ•°æ—¶</a>ï¼Œä¼šæ¥æ”¶åˆ°ä¸€ä¸ª "environment" çš„å‚æ•°ã€‚</p> <pre><code class="hljs language-bash">npx webpack --env production    <span class="token comment"># sets env.production == true</span></code></pre> <p><code>--env</code> å‚æ•°å¯ä»¥æ¥æ”¶å¤šä¸ªå€¼ï¼š</p> <table> <thead> <tr> <th>Invocation</th> <th>Resulting environment</th> </tr> </thead> <tbody> <tr> <td data-th="Invocation"><span><code>npx webpack --env prod</code></span></td> <td data-th="Resulting environment"><span><code>{ prod: true }</code></span></td> </tr> <tr> <td data-th="Invocation"><span><code>npx webpack --env prod --env min</code></span></td> <td data-th="Resulting environment"><span><code>{ prod: true, min: true }</code></span></td> </tr> <tr> <td data-th="Invocation"><span><code>npx webpack --env platform=app --env production</code></span></td> <td data-th="Resulting environment"><span><code>{ platform: "app", production: true }</code></span></td> </tr> <tr> <td data-th="Invocation"><span><code>npx webpack --env app.platform="staging" --env app.name="test"</code></span></td> <td data-th="Resulting environment"><span><code>{ app: { platform: "staging", name: "test" }</code></span></td> </tr> </tbody> </table> <blockquote class="tip"> <p>è¯·æŸ¥é˜… <a href="../../guides/environment-variables/index.htm" tppabs="https://webpack.docschina.org/guides/environment-variables/">environment å˜é‡æŒ‡å—</a>äº†è§£æ›´å¤šä¿¡æ¯åŠç”¨æ³•ã€‚</p> </blockquote> <h2 id="configuration-options">é…ç½®é€‰é¡¹ <a href="#configuration-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <table> <thead> <tr> <th>å‚æ•°</th> <th>è¯´æ˜</th> <th>è¾“å…¥ç±»å‹</th> <th>é»˜è®¤å€¼</th> </tr> </thead> <tbody> <tr> <td data-th="å‚æ•°"><span><code>--config</code></span></td> <td data-th="è¯´æ˜"><span>é…ç½®æ–‡ä»¶çš„è·¯å¾„</span></td> <td data-th="è¾“å…¥ç±»å‹"><span>string</span></td> <td data-th="é»˜è®¤å€¼"><span><a href="../cli/index.htm#default-configurations" tppabs="https://webpack.docschina.org/api/cli/#default-configurations">é»˜è®¤é…ç½®</a></span></td> </tr> <tr> <td data-th="å‚æ•°"><span><code>--config-name</code></span></td> <td data-th="è¯´æ˜"><span>è¦ä½¿ç”¨çš„é…ç½®å</span></td> <td data-th="è¾“å…¥ç±»å‹"><span>string</span></td> <td></td> </tr> <tr> <td data-th="å‚æ•°"><span><code>--env</code></span></td> <td data-th="è¯´æ˜"><span>å½“é…ç½®æ–‡ä»¶ä¸ºå‡½æ•°æ—¶ï¼Œenvironment å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™é…ç½®</span></td> <td data-th="è¾“å…¥ç±»å‹"><span>-</span></td> <td></td> </tr> <tr> <td data-th="å‚æ•°"><span><code>--mode</code></span></td> <td data-th="è¯´æ˜"><span>è¦ä½¿ç”¨çš„ mode</span></td> <td data-th="è¾“å…¥ç±»å‹"><span>string</span></td> <td data-th="é»˜è®¤å€¼"><span><code>'production'</code></span></td> </tr> </tbody> </table> <h2 id="analyzing-bundle">åˆ†æ Bundle <a href="#analyzing-bundle" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>ä½ å¯ä»¥ä½¿ç”¨ <code>webpack-bundle-analyzer</code> æ’ä»¶æ¥åˆ†æä½  webpack è¾“å‡ºçš„ bundleã€‚ä½ è¿˜å¯ä»¥é€šè¿‡ CLI çš„ <code>--analyze</code> flag è°ƒç”¨å®ƒ</p> <pre><code class="hljs language-bash">npx webpack --analyze</code></pre> <blockquote class="warning"> <p>è¯·ç¡®ä¿ä½ çš„é¡¹ç›®ä¸­å®‰è£…äº† <code>webpack-bundle-analyzer</code>ï¼Œå¦åˆ™ CLI ä¼šæç¤ºä½ å®‰è£…å®ƒã€‚</p> </blockquote> <h2 id="progress">Progress <a href="#progress" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>å¦‚éœ€æŸ¥çœ‹ webpack çš„ç¼–è¯‘è¿›åº¦ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>--progress</code> flagã€‚</p> <pre><code class="hljs language-bash">npx webpack --progress</code></pre> <p>å¦‚éœ€æ”¶é›†ç¼–è¯‘è¿‡ç¨‹ä¸­æ¯ä¸€æ­¥çš„ profile æ•°æ®ï¼Œä½ å¯ä»¥å°† <code>profile</code> ä½œä¸ºå€¼ä¼ é€’ç»™ <code>--progress</code> flagã€‚</p> <pre><code class="hljs language-bash">npx webpack --progress<span class="token operator">=</span>profile</code></pre> <h2 id="pass-cli-arguments-to-nodejs">å°† CLI å‚æ•°ä¼ é€’ç»™ Node.js <a href="#pass-cli-arguments-to-nodejs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>å°†å‚æ•°ç›´æ¥ä¼ é€’ç»™ Node.js è¿›ç¨‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>NODE_OPTIONS</code> é€‰é¡¹ã€‚</p> <p>ä¾‹å¦‚ï¼Œå°† Node.js è¿›ç¨‹çš„å†…å­˜é™åˆ¶å¢åŠ åˆ° 4 GBã€‚</p> <pre><code class="hljs language-bash"><span class="token assign-left variable">NODE_OPTIONS</span><span class="token operator">=</span><span class="token string">"--max-old-space-size=4096"</span> webpack</code></pre> <p>æ­¤å¤–ï¼Œä½ ä¹Ÿå¯ä»¥å°†å¤šä¸ªé€‰é¡¹ä¼ é€’ç»™ Node.js è¿›ç¨‹ã€‚</p> <pre><code class="hljs language-bash"><span class="token assign-left variable">NODE_OPTIONS</span><span class="token operator">=</span><span class="token string">"--max-old-space-size=4096 -r /path/to/preload/file.js"</span> webpack</code></pre> <h2 id="Exit-codes-and-their-meanings">Exit codes and their meanings<a href="#Exit-codes-and-their-meanings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <table> <thead> <tr> <th>Exit Code</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td data-th="Exit Code"><span><code>0</code></span></td> <td data-th="Description"><span>Success</span></td> </tr> <tr> <td data-th="Exit Code"><span><code>1</code></span></td> <td data-th="Description"><span>Errors from webpack</span></td> </tr> <tr> <td data-th="Exit Code"><span><code>2</code></span></td> <td data-th="Description"><span>Configuration/options problem or an internal error</span></td> </tr> </tbody> </table> <h1 id="Node-æ¥å£">Node æ¥å£<a href="#Node-%E6%8E%A5%E5%8F%A3" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>webpack æä¾›äº† Node.js APIï¼Œå¯ä»¥åœ¨ Node.js è¿è¡Œæ—¶ä¸‹ç›´æ¥ä½¿ç”¨ã€‚</p> <p>å½“ä½ éœ€è¦è‡ªå®šä¹‰æ„å»ºæˆ–å¼€å‘æµç¨‹æ—¶ï¼ŒNode.js API éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºæ­¤æ—¶æ‰€æœ‰çš„æŠ¥å‘Šå’Œé”™è¯¯å¤„ç†éƒ½å¿…é¡»è‡ªè¡Œå®ç°ï¼Œwebpack ä»…ä»…è´Ÿè´£ç¼–è¯‘çš„éƒ¨åˆ†ã€‚æ‰€ä»¥ <a href="../../configuration/stats.htm" tppabs="https://webpack.docschina.org/configuration/stats"><code>stats</code></a> é…ç½®é€‰é¡¹ä¸ä¼šåœ¨ <code>webpack()</code> è°ƒç”¨ä¸­ç”Ÿæ•ˆã€‚</p> <h2 id="installation">å®‰è£…(Installation) <a href="#installation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>å¼€å§‹ä½¿ç”¨ webpack çš„ Node.js API ä¹‹å‰ï¼Œé¦–å…ˆä½ éœ€è¦å®‰è£… webpackï¼š</p> <pre><code class="hljs language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack</code></pre> <p>åœ¨ Node.js æ–‡ä»¶ä¸­ï¼Œå¼•å…¥ webpack æ¨¡å—:</p> <pre><code class="hljs language-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>æˆ–è€…å¦‚æœä½ æ›´å–œæ¬¢ ES2015:</p> <pre><code class="hljs language-js"><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">'webpack'</span><span class="token punctuation">;</span></code></pre> <h2 id="webpack"><code>webpack()</code> <a href="#webpack" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>å¯¼å…¥çš„ <code>webpack</code> å‡½æ•°ä¼šå°† <a href="../../configuration/index.htm" tppabs="https://webpack.docschina.org/configuration/">é…ç½®å¯¹è±¡</a> ä¼ ç»™ webpackï¼Œå¦‚æœåŒæ—¶ä¼ å…¥å›è°ƒå‡½æ•°ä¼šåœ¨ webpack compiler è¿è¡Œæ—¶è¢«æ‰§è¡Œ:</p> <pre><code class="hljs language-js-with-links"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [é…ç½®å¯¹è±¡](/configuration/)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// [Stats Object](#stats-object)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">||</span> stats<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// [åœ¨è¿™é‡Œå¤„ç†é”™è¯¯](#error-handling)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å¤„ç†å®Œæˆ</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <blockquote class="tip"> <p><code>err</code>å¯¹è±¡ <strong>ä¸åŒ…å«</strong> ç¼–è¯‘é”™è¯¯ï¼Œå¿…é¡»ä½¿ç”¨ <code>stats.hasErrors()</code> å•ç‹¬å¤„ç†ï¼Œæ–‡æ¡£çš„ <a href="#error-handling">é”™è¯¯å¤„ç†</a> å°†å¯¹è¿™éƒ¨åˆ†å°†å¯¹æ­¤è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚<code>err</code> å¯¹è±¡åªåŒ…å« webpack ç›¸å…³çš„é—®é¢˜ï¼Œä¾‹å¦‚é…ç½®é”™è¯¯ç­‰ã€‚</p> </blockquote> <blockquote class="tip"> <p>ä½ ä¹Ÿå¯ä»¥ä¸º <code>webpack</code> å‡½æ•°æä¾›ä¸€ä¸ªé…ç½®æ•°ç»„ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="#multicompiler">MultiCompiler</a> ç« èŠ‚ã€‚</p> </blockquote> <h2 id="compiler-instance">Compiler å®ä¾‹ï¼ˆCompiler Instanceï¼‰ <a href="#compiler-instance" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>å¦‚æœä½ ä¸å‘ <code>webpack</code> ä¼ å…¥å¯æ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œ å®ƒä¼šè¿”å›ä¸€ä¸ª webpack <code>Compiler</code> å®ä¾‹ã€‚ ä½ å¯ä»¥é€šè¿‡æ‰‹åŠ¨æ‰§è¡Œå®ƒæˆ–è€…ä¸ºå®ƒçš„æ„å»ºæ—¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨ï¼Œ å°±åƒ <a href="../cli/index.htm" tppabs="https://webpack.docschina.org/api/cli/">CLI</a> ç±»ä¼¼ã€‚<code>Compiler</code> å®ä¾‹æä¾›äº†ä»¥ä¸‹æ–¹æ³•:</p> <ul> <li><code>.run(callback)</code></li> <li><code>.watch(watchOptions, handler)</code></li> </ul> <p>é€šå¸¸æƒ…å†µä¸‹ï¼Œä»…ä¼šåˆ›å»ºä¸€ä¸ªä¸»è¦ <code>Compiler</code> å®ä¾‹ï¼Œ è™½ç„¶å¯ä»¥åˆ›å»ºä¸€äº›å­ compiler æ¥ä»£ç†åˆ°ç‰¹å®šä»»åŠ¡ã€‚ <code>Compiler</code> åŸºæœ¬ä¸Šåªæ˜¯æ‰§è¡Œæœ€ä½é™åº¦çš„åŠŸèƒ½ï¼Œä»¥ç»´æŒç”Ÿå‘½å‘¨æœŸè¿è¡Œçš„åŠŸèƒ½ã€‚ å®ƒå°†æ‰€æœ‰çš„åŠ è½½ã€æ‰“åŒ…å’Œå†™å…¥å·¥ä½œï¼Œ éƒ½å§”æ‰˜åˆ°æ³¨å†Œè¿‡çš„æ’ä»¶ä¸Šã€‚</p> <p><code>Compiler</code> å®ä¾‹ä¸Šçš„ <code>hooks</code> å±æ€§ï¼Œç”¨äºå°†ä¸€ä¸ªæ’ä»¶æ³¨å†Œ åˆ° <code>Compiler</code> çš„ç”Ÿå‘½å‘¨æœŸä¸­çš„æ‰€æœ‰é’©å­äº‹ä»¶ä¸Šã€‚ <code>webpack</code> ä½¿ç”¨ <a href="javascript:if(confirm('https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsDefaulter.js  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsDefaulter.js'" tppabs="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsDefaulter.js"><code>WebpackOptionsDefaulter</code></a> å’Œ <a href="../../../github.com/webpack/webpack/blob/master/lib/WebpackOptionsApply.js" tppabs="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsApply.js"><code>WebpackOptionsApply</code></a> æ¥é…ç½® <code>Compiler</code> å®ä¾‹ä»¥åŠæ‰€æœ‰å†…ç½®æ’ä»¶ã€‚</p> <p>ä½¿ç”¨ <code>run</code> æ–¹æ³•å¯åŠ¨æ‰€æœ‰ç¼–è¯‘å·¥ä½œã€‚ å®Œæˆä¹‹åï¼Œæ‰§è¡Œä¼ å…¥çš„çš„ <code>callback</code> å‡½æ•°ã€‚ æœ€ç»ˆè®°å½•ä¸‹æ¥çš„æ¦‚æ‹¬ä¿¡æ¯ï¼ˆstatsï¼‰å’Œé”™è¯¯ï¼ˆerrorsï¼‰ï¼Œéƒ½åº”åœ¨è¿™ä¸ª callback å‡½æ•°ä¸­è·å–ã€‚</p> <blockquote class="warning"> <p>è¿™ä¸ª API ä¸€æ¬¡ä»…æ”¯æŒä¸€ä¸ªç¼–è¯‘ã€‚å½“ä½¿ç”¨ <code>run</code> æ—¶ï¼Œ å†æ¬¡è°ƒç”¨ <code>run</code> æˆ– <code>watch</code> ä¹‹å‰éœ€ç­‰å¾…å®ƒå®Œæˆã€‚ å½“ä½¿ç”¨ <code>watch</code> æ—¶ï¼Œè°ƒç”¨ <code>close</code>ï¼Œå¹¶ç­‰å¾…å®ƒå®Œæˆåï¼Œ ç„¶åæ‰èƒ½å†æ¬¡è°ƒç”¨ <code>run</code> æˆ– <code>watch</code>ã€‚å¹¶å‘ç¼–è¯‘å°†ç ´åè¾“å‡ºæ–‡ä»¶ã€‚</p> </blockquote> <h2 id="run">æ‰§è¡Œï¼ˆRunï¼‰ <a href="#run" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>è°ƒç”¨ <code>Compiler</code> å®ä¾‹çš„ <code>run</code> æ–¹æ³•è·Ÿä¸Šæ–‡æåˆ°çš„ å¿«é€Ÿæ‰§è¡Œæ–¹æ³•å¾ˆç±»ä¼¼ï¼š</p> <pre><code class="hljs language-js-with-links"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [é…ç½®å¯¹è±¡](/configuration/)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// [Stats Object](#stats-object)</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h2 id="watching">ç›‘å¬(Watching) <a href="#watching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>è°ƒç”¨ <code>watch</code> æ–¹æ³•ä¼šè§¦å‘ webpack æ‰§è¡Œï¼Œä½†ä¹‹åä¼šç›‘å¬å˜æ›´ï¼ˆå¾ˆåƒ CLI å‘½ä»¤: <code>webpack --watch</code>ï¼‰ï¼Œ ä¸€æ—¦ webpack æ£€æµ‹åˆ°æ–‡ä»¶å˜æ›´ï¼Œå°±ä¼šé‡æ–°æ‰§è¡Œç¼–è¯‘ã€‚ è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª <code>Watching</code> å®ä¾‹ã€‚</p> <pre><code class="hljs language-js"><span class="token function">watch</span><span class="token punctuation">(</span>watchOptions<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <pre><code class="hljs language-js-with-links"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [é…ç½®å¯¹è±¡](/configuration/)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> watching <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [watchOptions](/configuration/watch/#watchoptions) ç¤ºä¾‹</span>
  aggregateTimeout<span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  poll<span class="token operator">:</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// [Stats Object](#stats-object)</span>
  <span class="token comment">// è¿™é‡Œæ‰“å° watch/build ç»“æœ...</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p><code>Watching</code> é…ç½®é€‰é¡¹çš„ç»†èŠ‚å¯ä»¥åœ¨ <a href="../../configuration/watch/index.htm#watchoptions" tppabs="https://webpack.docschina.org/configuration/watch/#watchoptions">è¿™é‡Œ</a>æŸ¥è¯¢ã€‚</p> <blockquote class="warning"> <p>æ–‡ä»¶ç³»ç»Ÿä¸æ­£ç¡®çš„é—®é¢˜ï¼Œå¯èƒ½ä¼šå¯¹å•æ¬¡ä¿®æ”¹è§¦å‘å¤šæ¬¡æ„å»ºã€‚ å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä¸€æ¬¡ä¿®æ”¹å¯èƒ½ä¼šå¤šæ¬¡è§¦å‘ <code>console.log</code> è¯­å¥ã€‚ ç”¨æˆ·åº”è¯¥é¢„çŸ¥æ­¤è¡Œä¸ºï¼Œ å¹¶ä¸”å¯èƒ½éœ€è¦æ£€æŸ¥ <code>stats.hash</code> æ¥æŸ¥çœ‹æ–‡ä»¶å“ˆå¸Œæ˜¯å¦ç¡®å®å˜æ›´ã€‚</p> </blockquote> <h3 id="close-watching">å…³é—­ <code>Watching</code> (Close <code>Watching</code>) <a href="#close-watching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>watch</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>Watching</code> å®ä¾‹ï¼Œè¯¥å®ä¾‹ä¼šæš´éœ²ä¸€ä¸ª <code>.close(callback)</code> æ–¹æ³•ã€‚ è°ƒç”¨è¯¥æ–¹æ³•å°†ä¼šç»“æŸç›‘å¬:</p> <pre><code class="hljs language-js">watching<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Watching Ended.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <blockquote class="warning"> <p>ä¸å…è®¸åœ¨ç›‘å¬å™¨å…³é—­æˆ–è€…å¤±æ•ˆå‰ å†æ¬¡ç›‘å¬æˆ–æ‰§è¡Œã€‚</p> </blockquote> <h3 id="invalidate-watching">Invalidate <code>Watching</code> <a href="#invalidate-watching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ä½¿ç”¨ <code>watching.invalidate</code>ï¼Œä½ å¯ä»¥æ‰‹åŠ¨ä½¿å½“å‰ç¼–è¯‘å¾ªç¯ï¼ˆcompiling roundï¼‰æ— æ•ˆï¼Œ è€Œä¸ä¼šåœæ­¢ç›‘å¬è¿›ç¨‹ï¼ˆprocessï¼‰ï¼š</p> <pre><code class="hljs language-js">watching<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h2 id="stats-object">Stats å¯¹è±¡(Stats Object) <a href="#stats-object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>stats</code> å¯¹è±¡ä¼šè¢«ä½œä¸º <a href="#webpack"><code>webpack()</code></a> å›è°ƒå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ï¼Œ å¯ä»¥é€šè¿‡å®ƒè·å–åˆ°ä»£ç ç¼–è¯‘è¿‡ç¨‹ä¸­çš„æœ‰ç”¨ä¿¡æ¯ï¼Œ åŒ…æ‹¬ï¼š</p> <ul> <li>é”™è¯¯å’Œè­¦å‘Š(æœ‰è¿‡æœ‰çš„è¯)</li> <li>è®¡æ—¶ä¿¡æ¯</li> <li>module å’Œ chunk ä¿¡æ¯</li> </ul> <p><a href="../cli.htm" tppabs="https://webpack.docschina.org/api/cli">webpack CLI</a> æ­£æ˜¯åŸºäºè¿™äº›ä¿¡æ¯åœ¨æ§åˆ¶å° å±•ç¤ºå‹å¥½çš„æ ¼å¼è¾“å‡ºã€‚</p> <blockquote class="tip"> <p>å½“ä½¿ç”¨ <a href="#multicompiler"><code>MultiCompiler</code></a> æ—¶ï¼Œ ä¼šè¿”å›ä¸€ä¸ª <code>MultiStats</code> å®ä¾‹ï¼Œ å®ƒå®ç°ä¸ <code>stats</code> ç›¸åŒçš„æ¥å£ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢æè¿°çš„æ–¹æ³•ã€‚</p> </blockquote> <p><code>stats</code> å¯¹è±¡æš´éœ²äº†ä»¥ä¸‹æ–¹æ³•:</p> <h3 id="statshaserrors"><code>stats.hasErrors()</code> <a href="#statshaserrors" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>å¯ä»¥ç”¨æ¥æ£€æŸ¥ç¼–è¯‘æœŸæ˜¯å¦æœ‰é”™è¯¯ï¼Œ è¿”å›å€¼ä¸º <code>true</code> æˆ– <code>false</code>ã€‚</p> <h3 id="statshaswarnings"><code>stats.hasWarnings()</code> <a href="#statshaswarnings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>å¯ä»¥ç”¨æ¥æ£€æŸ¥ç¼–è¯‘æœŸæ˜¯å¦æœ‰è­¦å‘Šï¼Œ è¿”å›å€¼ä¸º <code>true</code> æˆ– <code>false</code>ã€‚</p> <h3 id="statstojsonoptions"><code>stats.toJson(options)</code> <a href="#statstojsonoptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ä»¥ JSON å¯¹è±¡å½¢å¼è¿”å›ç¼–è¯‘ä¿¡æ¯ã€‚ <code>options</code> å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆé¢„è®¾å€¼ï¼‰æˆ–æ˜¯é¢—ç²’åŒ–æ§åˆ¶çš„å¯¹è±¡:</p> <pre><code class="hljs language-js-with-links">stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token string">'minimal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [æ›´å¤šé€‰é¡¹å¦‚: "verbose" ç­‰](/configuration/stats).</span></code></pre> <pre><code class="hljs language-js">stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  assets<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  hash<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>æ‰€æœ‰å¯ç”¨çš„é…ç½®é€‰é¡¹å’Œé¢„è®¾å€¼éƒ½å¯æŸ¥è¯¢ stats <a href="../../configuration/stats.htm" tppabs="https://webpack.docschina.org/configuration/stats">æ–‡æ¡£</a>ã€‚</p> <blockquote> <p>è¿™é‡Œæœ‰</p> </blockquote> <p>è¯¥å‡½æ•°è¾“å‡ºçš„ <a href="javascript:if(confirm('https://raw.githubusercontent.com/webpack/analyse/master/app/pages/upload/example2.json  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://raw.githubusercontent.com/webpack/analyse/master/app/pages/upload/example2.json'" tppabs="https://raw.githubusercontent.com/webpack/analyse/master/app/pages/upload/example2.json">ç¤ºä¾‹</a>ã€‚</p> <h3 id="statstostringoptions"><code>stats.toString(options)</code> <a href="#statstostringoptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ä»¥æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²å½¢å¼è¿”å›æè¿°ç¼–è¯‘ä¿¡æ¯ ï¼ˆç±»ä¼¼ <a href="../cli.htm" tppabs="https://webpack.docschina.org/api/cli">CLI</a> çš„è¾“å‡ºï¼‰ã€‚</p> <p>é…ç½®å¯¹è±¡ä¸ <a href="../node/index.htm#statstojsonoptions" tppabs="https://webpack.docschina.org/api/node/#statstojsonoptions"><code>stats.toJson(options)</code></a> ä¸€è‡´ï¼Œé™¤äº†é¢å¤–å¢åŠ çš„ä¸€ä¸ªé€‰é¡¹:</p> <pre><code class="hljs language-js">stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// å¢åŠ æ§åˆ¶å°é¢œè‰²å¼€å…³</span>
  colors<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>ä¸‹é¢æ˜¯ <code>stats.toString()</code> ç”¨æ³•çš„ç¤ºä¾‹:</p> <pre><code class="hljs language-js-with-links"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [é…ç½®å¯¹è±¡](/configuration/)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    chunks<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// ä½¿æ„å»ºè¿‡ç¨‹æ›´é™é»˜æ— è¾“å‡º</span>
    colors<span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token comment">// åœ¨æ§åˆ¶å°å±•ç¤ºé¢œè‰²</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h2 id="multicompiler">MultiCompiler <a href="#multicompiler" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>MultiCompiler</code> æ¨¡å—å¯ä»¥è®© webpack åŒæ—¶æ‰§è¡Œå¤šä¸ªé…ç½®ã€‚ å¦‚æœä¼ ç»™ webpack çš„ Node.js API çš„ <code>options</code> å‚æ•°ï¼Œ è¯¥å‚æ•°ç”±æ˜¯ç”±å¤šä¸ªé…ç½®å¯¹è±¡æ„æˆçš„æ•°ç»„ï¼Œwebpack ä¼šç›¸åº”åœ°åˆ›å»ºå¤šä¸ª compiler å®ä¾‹ï¼Œ å¹¶ä¸”åœ¨æ¯æ¬¡ compiler æ‰§è¡Œç»“æŸæ—¶ï¼Œéƒ½ä¼šè°ƒç”¨ <code>callback</code> æ–¹æ³•ã€‚</p> <pre><code class="hljs language-js-with-links"><span class="token keyword">var</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> entry<span class="token operator">:</span> <span class="token string">'./index1.js'</span><span class="token punctuation">,</span> output<span class="token operator">:</span> <span class="token punctuation">{</span> filename<span class="token operator">:</span> <span class="token string">'bundle1.js'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> entry<span class="token operator">:</span> <span class="token string">'./index2.js'</span><span class="token punctuation">,</span> output<span class="token operator">:</span> <span class="token punctuation">{</span> filename<span class="token operator">:</span> <span class="token string">'bundle2.js'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// [Stats Object](#stats-object)</span>
  process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre> <blockquote class="warning"> <p>å¤šä¸ªé…ç½®å¯¹è±¡åœ¨æ‰§è¡Œæ—¶ï¼Œ<strong>ä¸ä¼šå¹¶è¡Œæ‰§è¡Œ</strong>ã€‚ æ¯ä¸ªé…ç½®éƒ½åªä¼šåœ¨å‰ä¸€ä¸ªå¤„ç†ç»“æŸåï¼Œæ‰è¿›è¡Œå¤„ç†ã€‚ æƒ³è¦å¹¶è¡Œå¤„ç†ï¼Œä½ å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆï¼Œ ä¾‹å¦‚ <a href="javascript:if(confirm('https://www.npmjs.com/package/parallel-webpack  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://www.npmjs.com/package/parallel-webpack'" tppabs="https://www.npmjs.com/package/parallel-webpack">parallel-webpack</a>ã€‚</p> </blockquote> <h2 id="error-handling">é”™è¯¯å¤„ç†(Error Handling) <a href="#error-handling" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>å®Œå¤‡çš„é”™è¯¯å¤„ç†ä¸­éœ€è¦è€ƒè™‘ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„é”™è¯¯:</p> <ul> <li>è‡´å‘½çš„ wepback é”™è¯¯ï¼ˆé…ç½®å‡ºé”™ç­‰ï¼‰</li> <li>ç¼–è¯‘é”™è¯¯ï¼ˆç¼ºå¤±çš„ moduleï¼Œè¯­æ³•é”™è¯¯ç­‰ï¼‰</li> <li>ç¼–è¯‘è­¦å‘Š</li> </ul> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªè¦†ç›–è¿™äº›åœºæ™¯çš„ç¤ºä¾‹:</p> <pre><code class="hljs language-js-with-links"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// [é…ç½®å¯¹è±¡](/configuration/)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>stack <span class="token operator">||</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>details<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>details<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> info <span class="token operator">=</span> stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">hasWarnings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>warnings<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Log result...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h2 id="custom-file-systems">è‡ªå®šä¹‰æ–‡ä»¶ç³»ç»Ÿ(Custom File Systems) <a href="#custom-file-systems" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œwebpack ä½¿ç”¨æ™®é€šæ–‡ä»¶ç³»ç»Ÿæ¥è¯»å–æ–‡ä»¶å¹¶å°†æ–‡ä»¶å†™å…¥ç£ç›˜ã€‚ ä½†æ˜¯ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸åŒç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆå†…å­˜(memory), webDAV ç­‰ï¼‰æ¥æ›´æ”¹è¾“å…¥æˆ–è¾“å‡ºè¡Œä¸ºã€‚ ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œ å¯ä»¥æ”¹å˜ <code>inputFileSystem</code> æˆ– <code>outputFileSystem</code>ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ <a href="javascript:if(confirm('https://github.com/streamich/memfs  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/streamich/memfs'" tppabs="https://github.com/streamich/memfs"><code>memfs</code></a> æ›¿æ¢é»˜è®¤çš„ <code>outputFileSystem</code>ï¼Œ ä»¥å°†æ–‡ä»¶å†™å…¥åˆ°å†…å­˜ä¸­ï¼Œ è€Œä¸æ˜¯å†™å…¥åˆ°ç£ç›˜:</p> <pre><code class="hljs language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> createFsFromVolume<span class="token punctuation">,</span> Volume <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'memfs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">createFsFromVolume</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Volume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/* options */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span>outputFileSystem <span class="token operator">=</span> fs<span class="token punctuation">;</span>
compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¹‹åè¯»å–è¾“å‡º:</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¢« <a href="javascript:if(confirm('https://github.com/webpack/webpack-dev-middleware  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/webpack-dev-middleware'" tppabs="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a> åŠä¼—å¤šå…¶ä»–åŒ…ä¾èµ–çš„ <a href="javascript:if(confirm('https://github.com/webpack/webpack-dev-server  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/webpack-dev-server'" tppabs="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> å°±æ˜¯é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ å°†ä½ çš„æ–‡ä»¶ç¥ç§˜åœ°éšè—èµ·æ¥ï¼Œä½†å´ä»ç„¶å¯ä»¥ç”¨å®ƒä»¬ä¸ºæµè§ˆå™¨æä¾›æœåŠ¡ï¼</p> <blockquote class="tip"> <p>ä½ æŒ‡å®šçš„è¾“å‡ºæ–‡ä»¶ç³»ç»Ÿéœ€è¦ å…¼å®¹ Node è‡ªèº«çš„ <a href="javascript:if(confirm('https://nodejs.org/api/fs.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://nodejs.org/api/fs.html'" tppabs="https://nodejs.org/api/fs.html"><code>fs</code></a> æ¨¡å—æ¥å£ï¼Œ æ¥å£éœ€è¦æä¾› <code>mkdirp</code> å’Œ <code>join</code> å·¥å…·æ–¹æ³•ã€‚</p> </blockquote> <h1 id="Stats-Data">Stats Data<a href="#Stats-Data" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>When compiling source code with webpack, users can generate a JSON file containing statistics about modules. These statistics can be used to analyze an application's dependency graph as well as to optimize compilation speed. The file is typically generated with the following CLI command:</p> <pre><code class="hljs language-bash">npx webpack --profile --json<span class="token operator">=</span>compilation-stats.json</code></pre> <p>The <code>--json=compilation-stats.json</code> flag indicates to webpack that it should emit the <code>compilation-stats.json</code> containing the dependency graph and various other build information. Typically, the <code>--profile</code> flag is also added so that a <code>profile</code> section is added to each <a href="#module-objects"><code>modules</code> object</a> containing module-specific compilation stats.</p> <h2 id="structure">Structure <a href="#structure" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>The top-level structure of the output JSON file is fairly straightforward but there are a few nested data structures as well. Each nested structure has a dedicated section below to make this document more consumable. Note that you can click links within the top-level structure below to jump to relevant sections and documentation:</p> <pre><code class="hljs language-js-with-links"><span class="token punctuation">{</span>
  <span class="token string">'version'</span><span class="token operator">:</span> <span class="token string">'5.9.0'</span><span class="token punctuation">,</span> <span class="token comment">// Version of webpack used for the compilation</span>
  <span class="token string">'hash'</span><span class="token operator">:</span> <span class="token string">'11593e3b3ac85436984a'</span><span class="token punctuation">,</span> <span class="token comment">// Compilation specific hash</span>
  <span class="token string">'time'</span><span class="token operator">:</span> <span class="token number">2469</span><span class="token punctuation">,</span> <span class="token comment">// Compilation time in milliseconds</span>
  <span class="token string">'publicPath'</span><span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
  <span class="token string">'outputPath'</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token comment">// path to webpack output directory</span>
  <span class="token string">'assetsByChunkName'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Chunk name to emitted asset(s) mapping</span>
    <span class="token string">'main'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'web.js?h=11593e3b3ac85436984a'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'named-chunk'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'named-chunk.web.js'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">'other-chunk'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'other-chunk.js'</span><span class="token punctuation">,</span>
      <span class="token string">'other-chunk.css'</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'assets'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [asset objects](#asset-objects)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'chunks'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [chunk objects](#chunk-objects)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'modules'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [module objects](#module-objects)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'entryPoints'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// A list of [entry objects](#entry-objects)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'errors'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [error objects](#errors-and-warnings)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'errorsCount'</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// number of errors</span>
  <span class="token string">'warnings'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [warning objects](#errors-and-warnings)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'warningsCount'</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// nummber of warnings</span>
<span class="token punctuation">}</span></code></pre> <h3 id="asset-objects">Asset Objects <a href="#asset-objects" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Each <code>assets</code> object represents an <code>output</code> file emitted from the compilation. They all follow a similar structure:</p> <pre><code class="hljs language-js"><span class="token punctuation">{</span>
  <span class="token string">'chunkNames'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// The chunks this asset contains</span>
  <span class="token string">'chunks'</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// The chunk IDs this asset contains</span>
  <span class="token string">'comparedForEmit'</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether or not the asset was compared with the same file on the output file system</span>
  <span class="token string">'emitted'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether or not the asset made it to the `output` directory</span>
  <span class="token string">'name'</span><span class="token operator">:</span> <span class="token string">'10.web.js'</span><span class="token punctuation">,</span> <span class="token comment">// The `output` filename</span>
  <span class="token string">'size'</span><span class="token operator">:</span> <span class="token number">1058</span><span class="token punctuation">,</span> <span class="token comment">// The size of the file in bytes</span>
  <span class="token string">'info'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'immutable'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// A flag telling whether the asset can be long term cached (contains a hash)</span>
    <span class="token string">'size'</span><span class="token operator">:</span> <span class="token number">1058</span><span class="token punctuation">,</span> <span class="token comment">// The size in bytes, only becomes available after asset has been emitted</span>
    <span class="token string">'development'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// A flag telling whether the asset is only used for development and doesn't count towards user-facing assets</span>
    <span class="token string">'hotModuleReplacement'</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// A flag telling whether the asset ships data for updating an existing application (HMR)</span>
    <span class="token string">'sourceFilename'</span><span class="token operator">:</span> <span class="token string">'originalfile.js'</span><span class="token punctuation">,</span> <span class="token comment">// sourceFilename when asset was created from a source file (potentially transformed)</span>
    <span class="token string">'javascriptModule'</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// true, when asset is javascript and an ESM</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <blockquote class="tip"> <p>Asset's <code>info</code> property is available since webpack v4.40.0</p> </blockquote> <h3 id="chunk-objects">Chunk Objects <a href="#chunk-objects" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Each <code>chunks</code> object represents a group of modules known as a <a href="../../glossary/index.htm#c" tppabs="https://webpack.docschina.org/glossary/#c">chunk</a>. Each object follows the following structure:</p> <pre><code class="hljs language-js-with-links"><span class="token punctuation">{</span>
  <span class="token string">"entry"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether or not the chunk contains the webpack runtime</span>
  <span class="token string">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// An array of filename strings that contain this chunk</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"filteredModules"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// See the description in the [top-level structure](#structure) above</span>
  <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// The ID of this chunk</span>
  <span class="token string">"initial"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether this chunk is loaded on initial page load or [on demand](/guides/lazy-loading)</span>
  <span class="token string">"modules"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [module objects](#module-objects)</span>
    <span class="token string">"web.js?h=11593e3b3ac85436984a"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"names"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// An list of chunk names contained within this chunk</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"origins"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// See the description below...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"parents"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Parent chunk IDs</span>
  <span class="token string">"rendered"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether or not the chunk went through Code Generation</span>
  <span class="token string">"size"</span><span class="token operator">:</span> <span class="token number">188057</span> <span class="token comment">// Chunk size in bytes</span>
<span class="token punctuation">}</span></code></pre> <p>The <code>chunks</code> object will also contain a list of <code>origins</code> describing how the given chunk originated. Each <code>origins</code> object follows the following schema:</p> <pre><code class="hljs language-js-with-links"><span class="token punctuation">{</span>
  <span class="token string">"loc"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">// Lines of code that generated this chunk</span>
  <span class="token string">"module"</span><span class="token operator">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Path to the module</span>
  <span class="token string">"moduleId"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// The ID of the module</span>
  <span class="token string">"moduleIdentifier"</span><span class="token operator">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Path to the module</span>
  <span class="token string">"moduleName"</span><span class="token operator">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Relative path to the module</span>
  <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"main"</span><span class="token punctuation">,</span> <span class="token comment">// The name of the chunk</span>
  <span class="token string">"reasons"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of the same `reasons` found in [module objects](#module-objects)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre> <h3 id="module-objects">Module Objects <a href="#module-objects" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>What good would these statistics be without some description of the compiled application's actual modules? Each module in the dependency graph is represented by the following structure:</p> <pre><code class="hljs language-js-with-links"><span class="token punctuation">{</span>
  <span class="token string">"assets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// A list of [asset objects](#asset-objects)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"built"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Indicates that the module went through [Loaders](/concepts/loaders), Parsing, and Code Generation</span>
  <span class="token string">"cacheable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Whether or not this module is cacheable</span>
  <span class="token string">"chunks"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// IDs of chunks that contain this module</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"errors"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// Number of errors when resolving or processing the module</span>
  <span class="token string">"failed"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Whether or not compilation failed on this module</span>
  <span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// The ID of the module (analogous to [`module.id`](/api/module-variables/#moduleid-commonjs))</span>
  <span class="token string">"identifier"</span><span class="token operator">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// A unique ID used internally</span>
  <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Path to the actual file</span>
  <span class="token string">"optional"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// All requests to this module are with `try... catch` blocks (irrelevant with ESM)</span>
  <span class="token string">"prefetched"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Indicates whether or not the module was [prefetched](/plugins/prefetch-plugin)</span>
  <span class="token string">"profile"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Module specific compilation stats corresponding to the [`--profile` flag](/api/cli/#profiling) (in milliseconds)</span>
    <span class="token string">"building"</span><span class="token operator">:</span> <span class="token number">73</span><span class="token punctuation">,</span> <span class="token comment">// Loading and parsing</span>
    <span class="token string">"dependencies"</span><span class="token operator">:</span> <span class="token number">242</span><span class="token punctuation">,</span> <span class="token comment">// Building dependencies</span>
    <span class="token string">"factory"</span><span class="token operator">:</span> <span class="token number">11</span> <span class="token comment">// Resolving dependencies</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"reasons"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// See the description below...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"size"</span><span class="token operator">:</span> <span class="token number">3593</span><span class="token punctuation">,</span> <span class="token comment">// Estimated size of the module in bytes</span>
  <span class="token string">"source"</span><span class="token operator">:</span> <span class="token string">"// Should not break it...\r\nif(typeof..."</span><span class="token punctuation">,</span> <span class="token comment">// The stringified raw source</span>
  <span class="token string">"warnings"</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token comment">// Number of warnings when resolving or processing the module</span>
<span class="token punctuation">}</span></code></pre> <p>Every module also contains a list of <code>reasons</code> objects describing why that module was included in the dependency graph. Each "reason" is similar to the <code>origins</code> seen above in the <a href="#chunk-objects">chunk objects</a> section:</p> <pre><code class="hljs language-js-with-links"><span class="token punctuation">{</span>
  <span class="token string">"loc"</span><span class="token operator">:</span> <span class="token string">"33:24-93"</span><span class="token punctuation">,</span> <span class="token comment">// Lines of code that caused the module to be included</span>
  <span class="token string">"module"</span><span class="token operator">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Relative path to the module based on [context](/configuration/entry-context/#context)</span>
  <span class="token string">"moduleId"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// The ID of the module</span>
  <span class="token string">"moduleIdentifier"</span><span class="token operator">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// Path to the module</span>
  <span class="token string">"moduleName"</span><span class="token operator">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// A more readable name for the module (used for "pretty-printing")</span>
  <span class="token string">"type"</span><span class="token operator">:</span> <span class="token string">"require.context"</span><span class="token punctuation">,</span> <span class="token comment">// The [type of request](/api/module-methods) used</span>
  <span class="token string">"userRequest"</span><span class="token operator">:</span> <span class="token string">"../../cases"</span> <span class="token comment">// Raw string used for the `import` or `require` request</span>
<span class="token punctuation">}</span></code></pre> <h3 id="Entry-Objects">Entry Objects<a href="#Entry-Objects" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-json"><span class="token property">"main"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"main"</span><span class="token punctuation">,</span>
  <span class="token property">"chunks"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token number">179</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"assets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"main.js"</span><span class="token punctuation">,</span>
      <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">22</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"filteredAssets"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"assetsSize"</span><span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
  <span class="token property">"auxiliaryAssets"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"filteredAuxiliaryAssets"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"auxiliaryAssetsSize"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"children"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"childAssets"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"isOverSizeLimit"</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></code></pre> <h3 id="errors-and-warnings">Errors and Warnings <a href="#errors-and-warnings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The <code>errors</code> and <code>warnings</code> properties each contain a list of objects. Each object contains a message, a stack trace and various other properties:</p> <pre><code class="hljs language-json"><span class="token punctuation">{</span>
  <span class="token property">"moduleIdentifier"</span><span class="token operator">:</span> <span class="token string">"C:\\Repos\\webpack\\test\\cases\\context\\issue-5750\\index.js"</span><span class="token punctuation">,</span>
  <span class="token property">"moduleName"</span><span class="token operator">:</span> <span class="token string">"(webpack)/test/cases/context/issue-5750/index.js"</span><span class="token punctuation">,</span>
  <span class="token property">"loc"</span><span class="token operator">:</span> <span class="token string">"3:8-47"</span><span class="token punctuation">,</span>
  <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Critical dependency: Contexts can't use RegExps with the 'g' or 'y' flags."</span><span class="token punctuation">,</span>
  <span class="token property">"moduleId"</span><span class="token operator">:</span> <span class="token number">29595</span><span class="token punctuation">,</span>
  <span class="token property">"moduleTrace"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"originIdentifier"</span><span class="token operator">:</span> <span class="token string">"C:\\Repos\\webpack\\test\\cases|sync|/^\\.\\/[^/]+\\/[^/]+\\/index\\.js$/"</span><span class="token punctuation">,</span>
      <span class="token property">"originName"</span><span class="token operator">:</span> <span class="token string">"(webpack)/test/cases sync ^\\.\\/[^/]+\\/[^/]+\\/index\\.js$"</span><span class="token punctuation">,</span>
      <span class="token property">"moduleIdentifier"</span><span class="token operator">:</span> <span class="token string">"C:\\Repos\\webpack\\test\\cases\\context\\issue-5750\\index.js"</span><span class="token punctuation">,</span>
      <span class="token property">"moduleName"</span><span class="token operator">:</span> <span class="token string">"(webpack)/test/cases/context/issue-5750/index.js"</span><span class="token punctuation">,</span>
      <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"loc"</span><span class="token operator">:</span> <span class="token string">"./context/issue-5750/index.js"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"originId"</span><span class="token operator">:</span> <span class="token number">32582</span><span class="token punctuation">,</span>
      <span class="token property">"moduleId"</span><span class="token operator">:</span> <span class="token number">29595</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"originIdentifier"</span><span class="token operator">:</span> <span class="token string">"C:\\Repos\\webpack\\testCases.js"</span><span class="token punctuation">,</span>
      <span class="token property">"originName"</span><span class="token operator">:</span> <span class="token string">"(webpack)/testCases.js"</span><span class="token punctuation">,</span>
      <span class="token property">"moduleIdentifier"</span><span class="token operator">:</span> <span class="token string">"C:\\Repos\\webpack\\test\\cases|sync|/^\\.\\/[^/]+\\/[^/]+\\/index\\.js$/"</span><span class="token punctuation">,</span>
      <span class="token property">"moduleName"</span><span class="token operator">:</span> <span class="token string">"(webpack)/test/cases sync ^\\.\\/[^/]+\\/[^/]+\\/index\\.js$"</span><span class="token punctuation">,</span>
      <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"loc"</span><span class="token operator">:</span> <span class="token string">"1:0-70"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"originId"</span><span class="token operator">:</span> <span class="token number">8198</span><span class="token punctuation">,</span>
      <span class="token property">"moduleId"</span><span class="token operator">:</span> <span class="token number">32582</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"details"</span><span class="token operator">:</span> <span class="token string">"at RequireContextDependency.getWarnings (C:\\Repos\\webpack\\lib\\dependencies\\ContextDependency.js:79:5)\n    at Compilation.reportDependencyErrorsAndWarnings (C:\\Repos\\webpack\\lib\\Compilation.js:1727:24)\n    at C:\\Repos\\webpack\\lib\\Compilation.js:1467:10\n    at _next2 (&#x3C;anonymous>:16:1)\n    at eval (&#x3C;anonymous>:42:1)\n    at C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2830:7\n    at Object.each (C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2850:39)\n    at C:\\Repos\\webpack\\lib\\FlagDependencyExportsPlugin.js:219:18\n    at C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2830:7\n    at Object.each (C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2850:39)\n    at C:\\Repos\\webpack\\lib\\FlagDependencyExportsPlugin.js:40:16\n    at Hook.eval [as callAsync] (&#x3C;anonymous>:38:1)\n    at Hook.CALL_ASYNC_DELEGATE [as _callAsync] (C:\\Repos\\tapable\\lib\\Hook.js:18:14)\n    at Compilation.finish (C:\\Repos\\webpack\\lib\\Compilation.js:1462:28)\n    at C:\\Repos\\webpack\\lib\\Compiler.js:909:18\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)\n"</span><span class="token punctuation">,</span>
  <span class="token property">"stack"</span><span class="token operator">:</span> <span class="token string">"ModuleDependencyWarning: Critical dependency: Contexts can't use RegExps with the 'g' or 'y' flags.\n    at Compilation.reportDependencyErrorsAndWarnings (C:\\Repos\\webpack\\lib\\Compilation.js:1732:23)\n    at C:\\Repos\\webpack\\lib\\Compilation.js:1467:10\n    at _next2 (&#x3C;anonymous>:16:1)\n    at eval (&#x3C;anonymous>:42:1)\n    at C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2830:7\n    at Object.each (C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2850:39)\n    at C:\\Repos\\webpack\\lib\\FlagDependencyExportsPlugin.js:219:18\n    at C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2830:7\n    at Object.each (C:\\Repos\\webpack\\node_modules\\neo-async\\async.js:2850:39)\n    at C:\\Repos\\webpack\\lib\\FlagDependencyExportsPlugin.js:40:16\n    at Hook.eval [as callAsync] (&#x3C;anonymous>:38:1)\n    at Hook.CALL_ASYNC_DELEGATE [as _callAsync] (C:\\Repos\\tapable\\lib\\Hook.js:18:14)\n    at Compilation.finish (C:\\Repos\\webpack\\lib\\Compilation.js:1462:28)\n    at C:\\Repos\\webpack\\lib\\Compiler.js:909:18\n    at processTicksAndRejections (internal/process/task_queues.js:75:11)\n"</span>
<span class="token punctuation">}</span></code></pre> <blockquote class="warning"> <p>Note that the stack traces are removed when <code>errorStack: false</code> is passed to the <code>toJson</code> method. The <code>errorStack</code> option is set to <code>true</code> by default.</p> </blockquote> <h1 id="Hot-Module-Replacement">Hot Module Replacement<a href="#Hot-Module-Replacement" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>å¦‚æœå·²ç»é€šè¿‡ <a href="../../plugins/hot-module-replacement-plugin.htm" tppabs="https://webpack.docschina.org/plugins/hot-module-replacement-plugin"><code>HotModuleReplacementPlugin</code></a> å¯ç”¨äº† <a href="../../concepts/hot-module-replacement.htm" tppabs="https://webpack.docschina.org/concepts/hot-module-replacement">Hot Module Replacement</a>, åˆ™å®ƒçš„æ¥å£å°†è¢«æš´éœ²åœ¨ <a href="../module-variables/index.htm#modulehot-webpack-specific" tppabs="https://webpack.docschina.org/api/module-variables/#modulehot-webpack-specific"><code>module.hot</code> å±æ€§</a> ä¸‹é¢ã€‚é€šå¸¸ï¼Œç”¨æˆ·å…ˆè¦æ£€æŸ¥è¿™ä¸ªæ¥å£æ˜¯å¦å¯è®¿é—®, å†ä½¿ç”¨å®ƒã€‚ä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ <code>accept</code> æ“ä½œä¸€ä¸ªæ›´æ–°çš„æ¨¡å—ï¼š</p> <pre><code class="hljs language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./library.js'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¹æ›´æ–°è¿‡çš„ library æ¨¡å—åšäº›äº‹æƒ…...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> <p>æ”¯æŒä»¥ä¸‹æ–¹æ³•â€¦â€¦</p> <h2 id="module-api">æ¨¡å— API <a href="#module-api" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="accept"><code>accept</code> <a href="#accept" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>æ¥å—(accept)ç»™å®š <code>ä¾èµ–æ¨¡å—(dependencies)</code> çš„æ›´æ–°ï¼Œå¹¶è§¦å‘ä¸€ä¸ª <code>å›è°ƒå‡½æ•°</code> æ¥å“åº”æ›´æ–°ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>
  dependencies<span class="token punctuation">,</span> <span class="token comment">// å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„</span>
  callback <span class="token comment">// ç”¨äºåœ¨æ¨¡å—æ›´æ–°åè§¦å‘çš„å‡½æ•°</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å½“ä½¿ç”¨ ESM <code>import</code> æ—¶ï¼Œæ‰€æœ‰ä» <code>dependencies</code> ä¸­å¯¼å…¥çš„ç¬¦å·éƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚æ³¨æ„ï¼šä¾èµ–é¡¹å­—ç¬¦ä¸²å¿…é¡»ä¸ <code>import</code> ä¸­çš„ <code>from</code> å­—ç¬¦ä¸²å®Œå…¨åŒ¹é…ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ ç”šè‡³å¯ä»¥çœç•¥ <code>callback</code>ã€‚åœ¨ <code>callback</code> ä¸­ä½¿ç”¨çš„ <code>require()</code> åœ¨è¿™é‡Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚</p> <p>åœ¨ä½¿ç”¨ CommonJS æ—¶ï¼Œä½ åº”è¯¥é€šè¿‡ <code>callback</code> ä¸­çš„ <code>require()</code> æ‰‹åŠ¨æ›´æ–°ä¾èµ–æ¨¡å—ã€‚çœç•¥ <code>callback</code> åœ¨è¿™é‡Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚</p> <h3 id="accept-self"><code>accept</code> (è‡ªèº«) <a href="#accept-self" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>æ¥å—è‡ªèº«æ›´æ–°ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>
  errorHandler <span class="token comment">// åœ¨è®¡ç®—æ–°ç‰ˆæœ¬æ—¶å¤„ç†é”™è¯¯çš„å‡½æ•°</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>åœ¨æ­¤æ¨¡å—æˆ–ä¾èµ–æ¨¡å—æ›´æ–°æ—¶ï¼Œå¯ä»¥åœ¨ä¸é€šçŸ¥çˆ¶ä¾èµ–çš„æƒ…å†µä¸‹ï¼Œå¯¹æ­¤æ¨¡å—å¤„ç†å’Œé‡æ–°å–å€¼ã€‚å¦‚æœæ­¤æ¨¡å—æ²¡æœ‰å¯¼å‡ºï¼ˆæˆ–ä»¥å…¶ä»–æ–¹å¼æ›´æ–°çš„å¯¼å‡ºï¼‰ï¼Œè¿™æ˜¯æœ‰æ„ä¹‰çš„ã€‚</p> <p>å½“æ‰§è¡Œæ­¤æ¨¡å—ï¼ˆæˆ–ä¾èµ–æ¨¡å—ï¼‰æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œä¼šè§¦å‘ <code>errorHandler</code>ã€‚</p> <h3 id="decline"><code>decline</code> <a href="#decline" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>æ‹’ç»ç»™å®š<code>ä¾èµ–æ¨¡å—</code>çš„æ›´æ–°ï¼Œä½¿ç”¨ <code>'decline'</code> æ–¹æ³•å¼ºåˆ¶æ›´æ–°å¤±è´¥ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">decline</span><span class="token punctuation">(</span>
  dependencies <span class="token comment">// å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å°†ä¾èµ–æ¨¡å—æ ‡è®°ä¸ºä¸å¯æ›´æ–°(not-update-able)ã€‚åœ¨å¤„ç†ã€Œä¾èµ–çš„å¯¼å‡ºæ­£åœ¨æ›´æ–°ã€æˆ–ã€Œå°šæœªå®ç°å¤„ç†ã€æ—¶ï¼Œè¿™æ˜¯æœ‰æ„ä¹‰çš„ã€‚å–å†³äºä½ çš„ HMR ç®¡ç†ä»£ç ï¼Œæ­¤ä¾èµ–æ¨¡å—ï¼ˆæˆ–å…¶æœªæ¥å—çš„ä¾èµ–æ¨¡å—ï¼‰æ›´æ–°ï¼Œé€šå¸¸ä¼šå¯¼è‡´é¡µé¢è¢«å®Œå…¨é‡æ–°åŠ è½½ã€‚</p> <h3 id="decline-self"><code>decline</code> (è‡ªèº«) <a href="#decline-self" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>æ‹’ç»è‡ªèº«æ›´æ–°ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">decline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å°†ä¾èµ–æ¨¡å—æ ‡è®°ä¸ºä¸å¯æ›´æ–°(not-update-able)ã€‚å½“æ­¤æ¨¡å—å…·æœ‰æ— æ³•é¿å…çš„å¤–éƒ¨ä½œç”¨(side-effect)ï¼Œæˆ–è€…å°šæœªå¯¹æ­¤æ¨¡å—è¿›è¡Œ HMR å¤„ç†æ—¶ï¼Œè¿™æ˜¯æœ‰æ„ä¹‰çš„ã€‚å–å†³äºä½ çš„ HMR ç®¡ç†ä»£ç ï¼Œæ­¤ä¾èµ–æ¨¡å—ï¼ˆæˆ–å…¶æœªæ¥å—çš„ä¾èµ–æ¨¡å—ï¼‰æ›´æ–°ï¼Œé€šå¸¸ä¼šå¯¼è‡´é¡µé¢è¢«å®Œå…¨é‡æ–°åŠ è½½ã€‚</p> <h3 id="dispose-or-adddisposehandler"><code>dispose</code> (or <code>addDisposeHandler</code>) <a href="#dispose-or-adddisposehandler" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>æ·»åŠ ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œåœ¨å½“å‰æ¨¡å—ä»£ç è¢«æ›¿æ¢æ—¶æ‰§è¡Œã€‚æ­¤å‡½æ•°åº”è¯¥ç”¨äºç§»é™¤ä½ å£°æ˜æˆ–åˆ›å»ºçš„ä»»ä½•æŒä¹…èµ„æºã€‚å¦‚æœè¦å°†çŠ¶æ€ä¼ å…¥åˆ°æ›´æ–°è¿‡çš„æ¨¡å—ï¼Œè¯·æ·»åŠ ç»™å®š <code>data</code> å‚æ•°ã€‚æ›´æ–°åï¼Œæ­¤å¯¹è±¡åœ¨æ›´æ–°ä¹‹åå¯é€šè¿‡ <code>module.hot.data</code> è°ƒç”¨ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// æ¸…ç†å¹¶å°† data ä¼ é€’åˆ°æ›´æ–°åçš„æ¨¡å—...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="invalidate"><code>invalidate</code> <a href="#invalidate" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>è°ƒç”¨æ­¤æ–¹æ³•å°†ä½¿å½“å‰æ¨¡å—æ— æ•ˆï¼Œè€Œå½“å‰æ¨¡å—å°†åœ¨åº”ç”¨ HMR æ›´æ–°æ—¶è¿›è¡Œéƒ¨ç½²å¹¶é‡æ–°åˆ›å»ºã€‚è¿™ä¸ªæ¨¡å—çš„æ›´æ–°åƒå†’æ³¡ä¸€æ ·ï¼Œæ‹’ç»è‡ªèº«æ›´æ–°ã€‚</p> <p>åœ¨ <code>idle</code> çŠ¶æ€ä¸‹è°ƒç”¨æ—¶ï¼Œå°†åˆ›å»ºä¸€ä¸ªåŒ…å«æ­¤æ¨¡å—çš„æ–° HMR æ›´æ–°ã€‚HMR å°†è¿›å…¥ <code>ready</code> çŠ¶æ€ã€‚</p> <p>åœ¨ <code>ready</code> æˆ– <code>prepare</code> çŠ¶æ€ä¸‹è°ƒç”¨æ—¶ï¼Œæ­¤æ¨¡å—å°†æ·»åŠ åˆ°å½“å‰ HMR çš„æ›´æ–°ä¸­ã€‚</p> <p>åœ¨ <code>check</code> çŠ¶æ€æœŸé—´è¢«è°ƒç”¨æ—¶ï¼Œå¦‚æœæœ‰å¯ç”¨æ›´æ–°ï¼Œåˆ™æ­¤æ¨¡å—å°†æ·»åŠ åˆ°æ›´æ–°ä¸­ã€‚å¦‚æœæ²¡æœ‰å¯ç”¨çš„æ›´æ–°ï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ªæ–°æ›´æ–°ã€‚HMR å°†è¿›å…¥ <code>ready</code> çŠ¶æ€ã€‚</p> <p>åœ¨ <code>dispose</code> æˆ– <code>apply</code> çŠ¶æ€ä¸‹è°ƒç”¨æ—¶ï¼ŒHMR å°†åœ¨é€€å‡ºè¿™äº›çŠ¶æ€åå°†å…¶æ‹¾å–ã€‚</p> <h3 id="use-cases">ç”¨ä¾‹ <a href="#use-cases" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><strong>Conditional Accepting</strong></p> <p>ä¸€ä¸ªæ¨¡å—å¯ä»¥æ¥å—ä¸€ä¸ªä¾èµ–ï¼Œä½†æ˜¯å½“ä¾èµ–çš„æ”¹å˜æ— æ³•å¤„ç†æ—¶ï¼Œå¯ä»¥è°ƒç”¨ <code>invalidate</code>ï¼š</p> <pre><code class="hljs language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./dep'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> processX<span class="token punctuation">,</span> processY <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'anotherDep'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> oldY <span class="token operator">=</span> y<span class="token punctuation">;</span>

<span class="token function">processX</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">processY</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./dep'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>y <span class="token operator">!==</span> oldY<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ— æ³•å¤„ç†ï¼Œå†’æ³¡ç»™çˆ¶çº§</span>
    module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å¯ä»¥å¤„ç†</span>
  <span class="token function">processX</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p><strong>Conditional self accept</strong></p> <p>æ¨¡å—å¯ä»¥è‡ªæˆ‘æ¥å—ï¼Œä½†æ˜¯å½“æ›´æ”¹æ— æ³•å¤„ç†æ—¶å¯ä»¥ä½¿è‡ªèº«å¤±æ•ˆï¼š</p> <pre><code class="hljs language-javascript"><span class="token keyword">const</span> <span class="token constant">VALUE</span> <span class="token operator">=</span> <span class="token string">'constant'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">VALUE</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span>data <span class="token operator">&#x26;&#x26;</span> module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span>data<span class="token punctuation">.</span>value <span class="token operator">&#x26;&#x26;</span> module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span>data<span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token constant">VALUE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token constant">VALUE</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> <p><strong>Triggering custom HMR updates</strong></p> <pre><code class="hljs language-javascript"><span class="token keyword">const</span> moduleId <span class="token operator">=</span> <span class="token function">chooseAModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> code <span class="token operator">=</span> __webpack_modules__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
__webpack_modules__<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">makeChanges</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span><span class="token function">hot</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> <blockquote class="tip"> <p>å½“è°ƒç”¨ <code>invalidate</code> æ—¶ï¼Œå°†æœ€ç»ˆè°ƒç”¨ <a href="#dispose-or-adddisposehandler"><code>dispose</code></a> å¤„ç†å‡½æ•°å¹¶å¡«å…… <code>module.hot.data</code>ã€‚å¦‚æœæœªæ³¨å†Œ <a href="#dispose-or-adddisposehandler"><code>dispose</code></a> å¤„ç†ç¨‹åº, åˆ™å°†ç©ºå¯¹è±¡æä¾›ç»™ <code>module.hot.data</code>.</p> </blockquote> <blockquote class="warning"> <p>é€šè¿‡ä¸€æ¬¡æ¬¡çš„è°ƒç”¨ <code>invalidate</code>ï¼Œä¸è¦é™·å…¥ <code>invalidate</code> å¾ªç¯ã€‚è¿™å°†å¯¼è‡´æ ˆæº¢å‡ºå¹¶ä¸” HMR è¿›å…¥ <code>fail</code> çŠ¶æ€ã€‚</p> </blockquote> <h3 id="removedisposehandler"><code>removeDisposeHandler</code> <a href="#removedisposehandler" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>åˆ é™¤ç”± <code>dispose</code> æˆ– <code>addDisposeHandler</code> æ·»åŠ çš„å›è°ƒå‡½æ•°ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">removeDisposeHandler</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h2 id="management-api">API ç®¡ç† <a href="#management-api" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="status"><code>status</code> <a href="#status" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>è·å–å½“å‰æ¨¡å—çƒ­æ›¿æ¢è¿›ç¨‹çš„çŠ¶æ€ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›ä»¥ä¸‹å­—ç¬¦ä¸²ä¹‹ä¸€...</span></code></pre> <table> <thead> <tr> <th>Status</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td data-th="Status"><span>idle</span></td> <td data-th="Description"><span>è¯¥è¿›ç¨‹æ­£åœ¨ç­‰å¾…è°ƒç”¨ <code>check</code>ï¼ˆè§ä¸‹æ–‡ï¼‰</span></td> </tr> <tr> <td data-th="Status"><span>check</span></td> <td data-th="Description"><span>è¯¥è¿›ç¨‹æ­£åœ¨æ£€æŸ¥ä»¥æ›´æ–°</span></td> </tr> <tr> <td data-th="Status"><span>prepare Â  Â </span></td> <td data-th="Description"><span>è¯¥è¿›ç¨‹æ­£åœ¨å‡†å¤‡æ›´æ–°ï¼ˆä¾‹å¦‚ï¼Œä¸‹è½½å·²æ›´æ–°çš„æ¨¡å—ï¼‰</span></td> </tr> <tr> <td data-th="Status"><span>ready</span></td> <td data-th="Description"><span>æ­¤æ›´æ–°å·²å‡†å¤‡å¹¶å¯ç”¨</span></td> </tr> <tr> <td data-th="Status"><span>dispose</span></td> <td data-th="Description"><span>è¯¥è¿›ç¨‹æ­£åœ¨è°ƒç”¨å°†è¢«æ›¿æ¢æ¨¡å—çš„ <code>dispose</code> å¤„ç†å‡½æ•°</span></td> </tr> <tr> <td data-th="Status"><span>apply</span></td> <td data-th="Description"><span>è¯¥è¿›ç¨‹æ­£åœ¨è°ƒç”¨ <code>accept</code> å¤„ç†å‡½æ•°ï¼Œå¹¶é‡æ–°æ‰§è¡Œè‡ªæˆ‘æ¥å—(self-accepted)çš„æ¨¡å—</span></td> </tr> <tr> <td data-th="Status"><span>abort</span></td> <td data-th="Description"><span>æ›´æ–°å·²ä¸­æ­¢ï¼Œä½†ç³»ç»Ÿä»å¤„äºä¹‹å‰çš„çŠ¶æ€</span></td> </tr> <tr> <td data-th="Status"><span>fail</span></td> <td data-th="Description"><span>æ›´æ–°å·²æŠ›å‡ºå¼‚å¸¸ï¼Œç³»ç»ŸçŠ¶æ€å·²è¢«ç ´å</span></td> </tr> </tbody> </table> <h3 id="check"><code>check</code> <a href="#check" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>æµ‹è¯•æ‰€æœ‰åŠ è½½çš„æ¨¡å—ä»¥è¿›è¡Œæ›´æ–°ï¼Œå¦‚æœæœ‰æ›´æ–°ï¼Œåˆ™ <code>apply</code> å®ƒä»¬ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>autoApply<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">outdatedModules</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// è¶…æ—¶çš„æ¨¡å—...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// æ•è·é”™è¯¯</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å½“è¢«è°ƒç”¨æ—¶ï¼Œä¼ é€’ç»™ <code>apply</code> æ–¹æ³•çš„ <code>autoApply</code> å‚æ•°å¯ä»¥æ˜¯å¸ƒå°”å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>options</code>ï¼Œ</p> <h3 id="apply"><code>apply</code> <a href="#apply" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ç»§ç»­æ›´æ–°è¿›ç¨‹ï¼ˆå½“ <code>module.hot.status() === 'ready'</code> æ—¶ï¼‰ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function">hot</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">outdatedModules</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// è¶…æ—¶çš„æ¨¡å—...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// æ•è·é”™è¯¯</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å¯é€‰çš„ <code>options</code> å¯¹è±¡å¯ä»¥åŒ…å«ä»¥ä¸‹å±æ€§ï¼š</p> <ul> <li><code>ignoreUnaccepted</code> (boolean): å¿½ç•¥å¯¹ä¸å¯æ¥å—çš„æ¨¡å—æ‰€åšçš„æ›´æ”¹ã€‚</li> <li><code>ignoreDeclined</code> (boolean): å¿½ç•¥å¯¹å·²æ‹’ç»çš„æ¨¡å—æ‰€åšçš„æ›´æ”¹ã€‚</li> <li><code>ignoreErrored</code> (boolean): å¿½ç•¥åœ¨æ¥å—å¤„ç†ç¨‹åºã€é”™è¯¯å¤„ç†ç¨‹åºä»¥åŠé‡æ–°è¯„ä¼°æ¨¡å—æ—¶æŠ›å‡ºçš„é”™è¯¯ã€‚</li> <li><code>onDeclined</code> (function(info)): æ‹’ç»æ¨¡å—çš„é€šçŸ¥è€…ã€‚</li> <li><code>onUnaccepted</code> (function(info)): ä¸å¯æ¥å—çš„æ¨¡å—çš„é€šçŸ¥ç¨‹åºã€‚</li> <li><code>onAccepted</code> (function(info)): å¯æ¥å—æ¨¡å—çš„é€šçŸ¥è€…ã€‚</li> <li><code>onDisposed</code> (function(info)): åºŸå¼ƒæ¨¡å—çš„é€šçŸ¥è€…ã€‚</li> <li><code>onErrored</code> (function(info)): é”™è¯¯é€šçŸ¥è€…ã€‚</li> </ul> <p><code>info</code> å‚æ•°å°†æ˜¯ä¸€ä¸ªåŒ…å«ä»¥ä¸‹æŸäº›å€¼çš„å¯¹è±¡ï¼š</p> <pre><code class="hljs language-js"><span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">'self-declined'</span> <span class="token operator">|</span> <span class="token string">'declined'</span> <span class="token operator">|</span>
        <span class="token string">'unaccepted'</span> <span class="token operator">|</span> <span class="token string">'accepted'</span> <span class="token operator">|</span>
        <span class="token string">'disposed'</span> <span class="token operator">|</span> <span class="token string">'accept-errored'</span> <span class="token operator">|</span>
        <span class="token string">'self-accept-errored'</span> <span class="token operator">|</span> <span class="token string">'self-accept-error-handler-errored'</span><span class="token punctuation">,</span>
  moduleId<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">// æœ‰é—®é¢˜çš„æ¨¡å—ã€‚</span>
  dependencyId<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// å¯¹äºé”™è¯¯ï¼šæ‹¥æœ‰æ¥å—å¤„ç†ç¨‹åºçš„æ¨¡å— IDã€‚</span>
  chain<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// å¯¹äºæ‹’ç»/æ¥å—/ä¸æ¥å—ï¼šä¼ æ’­æ›´æ–°çš„ `chain`ã€‚</span>
  parentId<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// å¯¹äºæ‹’ç»ï¼šä¸‹é™çš„çˆ¶æ¨¡å— IDã€‚</span>
  outdatedModules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// å¯¹äºæ¥å—ï¼šå·²è¿‡æ—¶ä¸”å°†è¢«å¤„ç½®çš„æ¨¡å—ã€‚</span>
  outdatedDependencies<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// å¯¹äºæ¥å—ï¼šå°†å¤„ç†æ›´æ–°çš„æ¥å—å¤„ç†ç¨‹åºçš„ä½ç½®ã€‚</span>
    <span class="token number">5</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  error<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// å¯¹äºé”™è¯¯ï¼šæŠ›å‡ºé”™è¯¯</span>
  originalError<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token comment">// å¯¹äºè‡ªæˆ‘æ¥å—é”™è¯¯å¤„ç†ç¨‹åºé”™è¯¯ï¼š</span>
                                <span class="token comment">// åœ¨é”™è¯¯å¤„ç†ç¨‹åºå°è¯•å¤„ç†è¯¥æ¨¡å—ä¹‹å‰ï¼Œè¯¥æ¨¡å—å¼•å‘çš„é”™è¯¯ã€‚</span>
<span class="token punctuation">}</span></code></pre> <h3 id="addstatushandler"><code>addStatusHandler</code> <a href="#addstatushandler" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>æ³¨å†Œä¸€ä¸ªå‡½æ•°æ¥ç›‘å¬ <code>status</code> çš„å˜åŒ–ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">addStatusHandler</span><span class="token punctuation">(</span><span class="token parameter">status</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// å“åº”å½“å‰çŠ¶æ€...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="removestatushandler"><code>removeStatusHandler</code> <a href="#removestatushandler" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ç§»é™¤ä¸€ä¸ªæ³¨å†Œçš„çŠ¶æ€å¤„ç†å‡½æ•°ã€‚</p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">removeStatusHandler</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h1 id="Loader-Interface">Loader Interface<a href="#Loader-Interface" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>A loader is just a JavaScript module that exports a function. The <a href="javascript:if(confirm('https://github.com/webpack/loader-runner  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/loader-runner'" tppabs="https://github.com/webpack/loader-runner">loader runner</a> calls this function and passes the result of the previous loader or the resource file into it. The <code>this</code> context of the function is filled-in by webpack and the <a href="javascript:if(confirm('https://github.com/webpack/loader-runner  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/loader-runner'" tppabs="https://github.com/webpack/loader-runner">loader runner</a> with some useful methods that allow the loader (among other things) to change its invocation style to async, or get query parameters.</p> <p>The first loader is passed one argument: the content of the resource file. The compiler expects a result from the last loader. The result should be a <code>String</code> or a <code>Buffer</code> (which is converted to a string), representing the JavaScript source code of the module. An optional SourceMap result (as a JSON object) may also be passed.</p> <p>A single result can be returned in <strong>sync mode</strong>. For multiple results the <code>this.callback()</code> must be called. In <strong>async mode</strong> <code>this.async()</code> must be called to indicate that the <a href="javascript:if(confirm('https://github.com/webpack/loader-runner  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/loader-runner'" tppabs="https://github.com/webpack/loader-runner">loader runner</a> should wait for an asynchronous result. It returns <code>this.callback()</code>. Then the loader must return <code>undefined</code> and call that callback.</p> <h2 id="examples">Examples <a href="#examples" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>The following sections provide some basic examples of the different types of loaders. Note that the <code>map</code> and <code>meta</code> parameters are optional, see <a href="#thiscallback"><code>this.callback</code></a> below.</p> <h3 id="synchronous-loaders">Synchronous Loaders <a href="#synchronous-loaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Either <code>return</code> or <code>this.callback</code> can be used to return the transformed <code>content</code> synchronously:</p> <p><strong>sync-loader.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>The <code>this.callback</code> method is more flexible as it allows multiple arguments to be passed as opposed to just the <code>content</code>.</p> <p><strong>sync-loader-with-multiple-results.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// always return undefined when calling callback()</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="asynchronous-loaders">Asynchronous Loaders <a href="#asynchronous-loaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>For asynchronous loaders, <a href="#thisasync"><code>this.async</code></a> is used to retrieve the <code>callback</code> function:</p> <p><strong>async-loader.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">someAsyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> result<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p><strong>async-loader-with-multiple-results.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">someAsyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">,</span> meta</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> result<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <blockquote class="tip"> <p>Loaders were originally designed to work in synchronous loader pipelines, like Node.js (using <a href="javascript:if(confirm('https://github.com/webpack/enhanced-require  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/enhanced-require'" tppabs="https://github.com/webpack/enhanced-require">enhanced-require</a>), <em>and</em> asynchronous pipelines, like in webpack. However, since expensive synchronous computations are a bad idea in a single-threaded environment like Node.js, we advise making your loader asynchronous if possible. Synchronous loaders are ok if the amount of computation is trivial.</p> </blockquote> <h3 id="raw-loader">"Raw" Loader <a href="#raw-loader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>By default, the resource file is converted to a UTF-8 string and passed to the loader. By setting the <code>raw</code> flag to <code>true</code>, the loader will receive the raw <code>Buffer</code>. Every loader is allowed to deliver its result as a <code>String</code> or as a <code>Buffer</code>. The compiler converts them between loaders.</p> <p><strong>raw-loader.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">assert</span><span class="token punctuation">(</span>content <span class="token keyword">instanceof</span> <span class="token class-name">Buffer</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// return value can be a `Buffer` too</span>
  <span class="token comment">// This is also allowed if loader is not "raw"</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code></pre> <h3 id="pitching-loader">Pitching Loader <a href="#pitching-loader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Loaders are <strong>always</strong> called from right to left. There are some instances where the loader only cares about the <strong>metadata</strong> behind a request and can ignore the results of the previous loader. The <code>pitch</code> method on loaders is called from <strong>left to right</strong> before the loaders are actually executed (from right to left).</p> <blockquote class="tip"> <p>Loaders may be added inline in requests and disabled via inline prefixes, which will impact the order in which they are "pitched" and executed. See <a href="../../configuration/module/index.htm#ruleenforce" tppabs="https://webpack.docschina.org/configuration/module/#ruleenforce"><code>Rule.enforce</code></a> for more details.</p> </blockquote> <p>For the following configuration of <a href="../../configuration/module/index.htm#ruleuse" tppabs="https://webpack.docschina.org/configuration/module/#ruleuse"><code>use</code></a>:</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'a-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'b-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'c-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>These steps would occur:</p> <pre><code class="hljs language-diff">|- a-loader `pitch`
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- b-loader `pitch`
</span><span class="token prefix unchanged"> </span><span class="token line">   |- c-loader `pitch`
</span><span class="token prefix unchanged"> </span><span class="token line">     |- requested module is picked up as a dependency
</span><span class="token prefix unchanged"> </span><span class="token line">   |- c-loader normal execution
</span><span class="token prefix unchanged"> </span><span class="token line"> |- b-loader normal execution
</span></span>|- a-loader normal execution</code></pre> <p>So why might a loader take advantage of the "pitching" phase?</p> <p>First, the <code>data</code> passed to the <code>pitch</code> method is exposed in the execution phase as well under <code>this.data</code> and could be useful for capturing and sharing information from earlier in the cycle.</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">remainingRequest<span class="token punctuation">,</span> precedingRequest<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>Second, if a loader delivers a result in the <code>pitch</code> method, the process turns around and skips the remaining loaders. In our example above, if the <code>b-loader</code>s <code>pitch</code> method returned something:</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">remainingRequest<span class="token punctuation">,</span> precedingRequest<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">someCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'module.exports = require('</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'-!'</span> <span class="token operator">+</span> remainingRequest<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">');'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>The steps above would be shortened to:</p> <pre><code class="hljs language-diff">|- a-loader `pitch`
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> |- b-loader `pitch` returns a module
</span></span>|- a-loader normal execution</code></pre> <h2 id="the-loader-context">The Loader Context <a href="#the-loader-context" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>The loader context represents the properties that are available inside of a loader assigned to the <code>this</code> property.</p> <p>Given the following example, this require call is used:</p> <p>In <code>/abc/file.js</code>:</p> <pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./loader1?xyz!loader2!./resource?rrr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="thisversion"><code>this.version</code> <a href="#thisversion" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><strong>Loader API version.</strong> Currently <code>2</code>. This is useful for providing backwards compatibility. Using the version you can specify custom logic or fallbacks for breaking changes.</p> <h3 id="thiscontext"><code>this.context</code> <a href="#thiscontext" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><strong>The directory of the module.</strong> Can be used as a context for resolving other stuff.</p> <p>In the example: <code>/abc</code> because <code>resource.js</code> is in this directory</p> <h3 id="thisrootcontext"><code>this.rootContext</code> <a href="#thisrootcontext" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Since webpack 4, the formerly <code>this.options.context</code> is provided as <code>this.rootContext</code>.</p> <h3 id="thisrequest"><code>this.request</code> <a href="#thisrequest" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The resolved request string.</p> <p>In the example: <code>'/abc/loader1.js?xyz!/abc/node_modules/loader2/index.js!/abc/resource.js?rrr'</code></p> <h3 id="thisquery"><code>this.query</code> <a href="#thisquery" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <ol> <li>If the loader was configured with an <a href="../../configuration/module/index.htm#useentry" tppabs="https://webpack.docschina.org/configuration/module/#useentry"><code>options</code></a> object, this will point to that object.</li> <li>If the loader has no <code>options</code>, but was invoked with a query string, this will be a string starting with <code>?</code>.</li> </ol> <h3 id="thisgetoptionsschema"><code>this.getOptions(schema)</code> <a href="#thisgetoptionsschema" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Extracts given loader options. Optionally, accepts JSON schema as an argument.</p> <blockquote class="tip"> <p>Since webpack 5, <code>this.getOptions</code> is available in loader context. It substitutes <code>getOptions</code> method from <a href="javascript:if(confirm('https://github.com/webpack/loader-utils  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/loader-utils#getoptions'" tppabs="https://github.com/webpack/loader-utils#getoptions">loader-utils</a>.</p> </blockquote> <h3 id="thiscallback"><code>this.callback</code> <a href="#thiscallback" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>A function that can be called synchronously or asynchronously in order to return multiple results. The expected arguments are:</p> <pre><code class="hljs language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>
  err<span class="token operator">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> string <span class="token operator">|</span> Buffer<span class="token punctuation">,</span>
  sourceMap<span class="token operator">?</span><span class="token operator">:</span> SourceMap<span class="token punctuation">,</span>
  meta<span class="token operator">?</span><span class="token operator">:</span> any
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <ol> <li>The first argument must be an <code>Error</code> or <code>null</code></li> <li>The second argument is a <code>string</code> or a <a href="javascript:if(confirm('https://nodejs.org/api/buffer.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://nodejs.org/api/buffer.html'" tppabs="https://nodejs.org/api/buffer.html"><code>Buffer</code></a>.</li> <li>Optional: The third argument must be a source map that is parsable by <a href="javascript:if(confirm('https://github.com/mozilla/source-map  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/mozilla/source-map'" tppabs="https://github.com/mozilla/source-map">this module</a>.</li> <li>Optional: The fourth option, ignored by webpack, can be anything (e.g. some metadata).</li> </ol> <blockquote class="tip"> <p>It can be useful to pass an abstract syntax tree (AST), like <a href="javascript:if(confirm('https://github.com/estree/estree  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/estree/estree'" tppabs="https://github.com/estree/estree"><code>ESTree</code></a>, as the fourth argument (<code>meta</code>) to speed up the build time if you want to share common ASTs between loaders.</p> </blockquote> <p>In case this function is called, you should return undefined to avoid ambiguous loader results.</p> <h3 id="thisasync"><code>this.async</code> <a href="#thisasync" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Tells the <a href="javascript:if(confirm('https://github.com/webpack/loader-runner  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/loader-runner'" tppabs="https://github.com/webpack/loader-runner">loader-runner</a> that the loader intends to call back asynchronously. Returns <code>this.callback</code>.</p> <h3 id="thisdata"><code>this.data</code> <a href="#thisdata" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>A data object shared between the pitch and the normal phase.</p> <h3 id="thiscacheable"><code>this.cacheable</code> <a href="#thiscacheable" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>A function that sets the cacheable flag:</p> <pre><code class="hljs language-typescript"><span class="token function">cacheable</span><span class="token punctuation">(</span>flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span></code></pre> <p>By default, loader results are flagged as cacheable. Call this method passing <code>false</code> to make the loader's result not cacheable.</p> <p>A cacheable loader must have a deterministic result when inputs and dependencies haven't changed. This means the loader shouldn't have dependencies other than those specified with <code>this.addDependency</code>.</p> <h3 id="thisloaders"><code>this.loaders</code> <a href="#thisloaders" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>An array of all the loaders. It is writable in the pitch phase.</p> <pre><code class="hljs language-javascript">loaders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>request<span class="token operator">:</span> string<span class="token punctuation">,</span> path<span class="token operator">:</span> string<span class="token punctuation">,</span> query<span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token function-variable function">module</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre> <p>In the example:</p> <pre><code class="hljs language-javascript"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    request<span class="token operator">:</span> <span class="token string">'/abc/loader1.js?xyz'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token string">'/abc/loader1.js'</span><span class="token punctuation">,</span>
    query<span class="token operator">:</span> <span class="token string">'?xyz'</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    request<span class="token operator">:</span> <span class="token string">'/abc/node_modules/loader2/index.js'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token string">'/abc/node_modules/loader2/index.js'</span><span class="token punctuation">,</span>
    query<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    module<span class="token operator">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre> <h3 id="thisloaderindex"><code>this.loaderIndex</code> <a href="#thisloaderindex" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The index in the loaders array of the current loader.</p> <p>In the example: in loader1: <code>0</code>, in loader2: <code>1</code></p> <h3 id="thisresource"><code>this.resource</code> <a href="#thisresource" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The resource part of the request, including query.</p> <p>In the example: <code>'/abc/resource.js?rrr'</code></p> <h3 id="thisresourcepath"><code>this.resourcePath</code> <a href="#thisresourcepath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The resource file.</p> <p>In the example: <code>'/abc/resource.js'</code></p> <h3 id="thisresourcequery"><code>this.resourceQuery</code> <a href="#thisresourcequery" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>The query of the resource.</p> <p>In the example: <code>'?rrr'</code></p> <h3 id="thistarget"><code>this.target</code> <a href="#thistarget" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Target of compilation. Passed from configuration options.</p> <p>Example values: <code>'web'</code>, <code>'node'</code></p> <h3 id="thiswebpack"><code>this.webpack</code> <a href="#thiswebpack" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>This boolean is set to true when this is compiled by webpack.</p> <blockquote class="tip"> <p>Loaders were originally designed to also work as Babel transforms. Therefore, if you write a loader that works for both, you can use this property to know if there is access to additional loaderContext and webpack features.</p> </blockquote> <h3 id="thissourcemap"><code>this.sourceMap</code> <a href="#thissourcemap" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Tells if source map should be generated. Since generating source maps can be an expensive task, you should check if source maps are actually requested.</p> <h3 id="thisemitwarning"><code>this.emitWarning</code> <a href="#thisemitwarning" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-typescript"><span class="token function">emitWarning</span><span class="token punctuation">(</span>warning<span class="token operator">:</span> Error<span class="token punctuation">)</span></code></pre> <p>Emit a warning that will be displayed in the output like the following:</p> <pre><code class="hljs language-bash">WARNING <span class="token keyword">in</span> ./src/lib.js <span class="token punctuation">(</span>./src/loader.js<span class="token operator">!</span>./src/lib.js<span class="token punctuation">)</span>
Module Warning <span class="token punctuation">(</span>from ./src/loader.js<span class="token punctuation">)</span>:
Here is a Warning<span class="token operator">!</span>
 @ ./src/index.js <span class="token number">1</span>:0-25</code></pre> <blockquote class="tip"> <p>Note that the warnings will not be displayed if <code>stats.warnings</code> is set to <code>false</code>, or some other omit setting is used to <code>stats</code> such as <code>none</code> or <code>errors-only</code>. See the <a href="../../configuration/stats/index.htm#stats-presets" tppabs="https://webpack.docschina.org/configuration/stats/#stats-presets">stats presets configuration</a>.</p> </blockquote> <h3 id="thisemiterror"><code>this.emitError</code> <a href="#thisemiterror" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-typescript"><span class="token function">emitError</span><span class="token punctuation">(</span>error<span class="token operator">:</span> Error<span class="token punctuation">)</span></code></pre> <p>Emit an error that also can be displayed in the output.</p> <pre><code class="hljs language-bash">ERROR <span class="token keyword">in</span> ./src/lib.js <span class="token punctuation">(</span>./src/loader.js<span class="token operator">!</span>./src/lib.js<span class="token punctuation">)</span>
Module Error <span class="token punctuation">(</span>from ./src/loader.js<span class="token punctuation">)</span>:
Here is an Error<span class="token operator">!</span>
 @ ./src/index.js <span class="token number">1</span>:0-25</code></pre> <blockquote class="tip"> <p>Unlike throwing an Error directly, it will NOT interrupt the compilation process of the current module.</p> </blockquote> <h3 id="thisloadmodule"><code>this.loadModule</code> <a href="#thisloadmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-typescript"><span class="token function">loadModule</span><span class="token punctuation">(</span>request<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> source<span class="token punctuation">,</span> sourceMap<span class="token punctuation">,</span> <span class="token keyword">module</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre> <p>Resolves the given request to a module, applies all configured loaders and calls back with the generated source, the sourceMap and the module instance (usually an instance of <a href="../../../github.com/webpack/webpack/blob/master/lib/NormalModule.js" tppabs="https://github.com/webpack/webpack/blob/master/lib/NormalModule.js"><code>NormalModule</code></a>). Use this function if you need to know the source code of another module to generate the result.</p> <p><code>this.loadModule</code> in a loader context uses CommonJS resolve rules by default. Use <code>this.getResolve</code> with an appropriate <code>dependencyType</code>, e.g. <code>'esm'</code>, <code>'commonjs'</code> or a custom one before using a different semantic.</p> <h3 id="thisresolve"><code>this.resolve</code> <a href="#thisresolve" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-typescript"><span class="token function">resolve</span><span class="token punctuation">(</span>context<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> request<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre> <p>Resolve a request like a require expression.</p> <h3 id="thisadddependency"><code>this.addDependency</code> <a href="#thisadddependency" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-typescript"><span class="token function">addDependency</span><span class="token punctuation">(</span>file<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span>
<span class="token function">dependency</span><span class="token punctuation">(</span>file<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token comment">// shortcut</span></code></pre> <p>Add a file as dependency of the loader result in order to make them watchable. For example, <a href="javascript:if(confirm('https://github.com/webpack-contrib/sass-loader  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack-contrib/sass-loader'" tppabs="https://github.com/webpack-contrib/sass-loader"><code>sass-loader</code></a>, <a href="javascript:if(confirm('https://github.com/webpack-contrib/less-loader  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack-contrib/less-loader'" tppabs="https://github.com/webpack-contrib/less-loader"><code>less-loader</code></a> uses this to recompile whenever any imported <code>css</code> file changes.</p> <h3 id="thisaddcontextdependency"><code>this.addContextDependency</code> <a href="#thisaddcontextdependency" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-typescript"><span class="token function">addContextDependency</span><span class="token punctuation">(</span>directory<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span></code></pre> <p>Add a directory as dependency of the loader result.</p> <h3 id="thiscleardependencies"><code>this.clearDependencies</code> <a href="#thiscleardependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-typescript"><span class="token function">clearDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre> <p>Remove all dependencies of the loader result, even initial dependencies and those of other loaders. Consider using <code>pitch</code>.</p> <h3 id="thisemitfile"><code>this.emitFile</code> <a href="#thisemitfile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-typescript"><span class="token function">emitFile</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> content<span class="token operator">:</span> Buffer<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> sourceMap<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre> <p>Emit a file. This is webpack-specific.</p> <h3 id="thishot"><code>this.hot</code> <a href="#thishot" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Information about HMR for loaders.</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>hot<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true if HMR is enabled via --hot flag or webpack configuration</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="thisfs"><code>this.fs</code> <a href="#thisfs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Access to the <code>compilation</code>'s <code>inputFileSystem</code> property.</p> <h3 id="thismode"><code>this.mode</code> <a href="#thismode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Read in which <a href="../../configuration/mode/index.htm" tppabs="https://webpack.docschina.org/configuration/mode/"><code>mode</code></a> webpack is running.</p> <p>Possible values: <code>'production'</code>, <code>'development'</code>, <code>'none'</code></p> <h2 id="deprecated-context-properties">Deprecated context properties <a href="#deprecated-context-properties" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <blockquote class="warning"> <p>The usage of these properties is highly discouraged since we are planning to remove them from the context. They are still listed here for documentation purposes.</p> </blockquote> <h3 id="thisvalue"><code>this.value</code> <a href="#thisvalue" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Pass values to the next loader. If you know what your result exports if executed as a module, set this value here (as an only element array).</p> <h3 id="thisinputvalue"><code>this.inputValue</code> <a href="#thisinputvalue" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Passed from the last loader. If you would execute the input argument as a module, consider reading this variable for a shortcut (for performance).</p> <h3 id="thisdebug"><code>this.debug</code> <a href="#thisdebug" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>A boolean flag. It is set when in debug mode.</p> <h3 id="thisminimize"><code>this.minimize</code> <a href="#thisminimize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Tells if result should be minimized.</p> <h3 id="this_compilation"><code>this._compilation</code> <a href="#this_compilation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Hacky access to the Compilation object of webpack.</p> <h3 id="this_compiler"><code>this._compiler</code> <a href="#this_compiler" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Hacky access to the Compiler object of webpack.</p> <h3 id="this_module"><code>this._module</code> <a href="#this_module" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>Hacky access to the Module object being loaded.</p> <h2 id="error-reporting">Error Reporting <a href="#error-reporting" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>You can report errors from inside a loader by:</p> <ul> <li>Using <a href="../loaders/index.htm#thisemiterror" tppabs="https://webpack.docschina.org/api/loaders/#thisemiterror">this.emitError</a>. Will report the errors without interrupting module's compilation.</li> <li>Using <code>throw</code> (or other uncaught exception). Throwing an error while a loader is running will cause current module compilation failure.</li> <li>Using <code>callback</code> (in async mode). Pass an error to the callback will also cause module compilation failure.</li> </ul> <p>For example:</p> <p><strong>./src/index.js</strong></p> <pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./loader!./lib'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>Throwing an error from loader:</p> <p><strong>./src/loader.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'This is a Fatal Error!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>Or pass an error to the callback in async mode:</p> <p><strong>./src/loader.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//...</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'This is a Fatal Error!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>The module will get bundled like this:</p> <pre><code class="hljs language-javascript"><span class="token comment">/***/</span> <span class="token string">"./src/loader.js!./src/lib.js"</span><span class="token operator">:</span>
<span class="token comment">/*!************************************!*\
  !*** ./src/loader.js!./src/lib.js ***!
  \************************************/</span>
<span class="token comment">/*! no static exports found */</span>
<span class="token comment">/***/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Module build failed (from ./src/loader.js):\nError: This is a Fatal Error!\n    at Object.module.exports (/workspace/src/loader.js:3:9)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/***/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre> <p>Then the build output will also display the error (Similar to <code>this.emitError</code>):</p> <pre><code class="hljs language-bash">ERROR <span class="token keyword">in</span> ./src/lib.js <span class="token punctuation">(</span>./src/loader.js<span class="token operator">!</span>./src/lib.js<span class="token punctuation">)</span>
Module build failed <span class="token punctuation">(</span>from ./src/loader.js<span class="token punctuation">)</span>:
Error: This is a Fatal Error<span class="token operator">!</span>
    at Object.module.exports <span class="token punctuation">(</span>/workspace/src/loader.js:2:9<span class="token punctuation">)</span>
 @ ./src/index.js <span class="token number">1</span>:0-25</code></pre> <p>As you can see below, not only error message, but also details about which loader and module are involved:</p> <ul> <li>the module path: <code>ERROR in ./src/lib.js</code></li> <li>the request string: <code>(./src/loader.js!./src/lib.js)</code></li> <li>the loader path: <code>(from ./src/loader.js)</code></li> <li>the caller path: <code>@ ./src/index.js 1:0-25</code></li> </ul> <blockquote class="warning"> <p>The loader path in the error is displayed since webpack 4.12</p> </blockquote> <blockquote class="tip"> <p>All the errors and warnings will be recorded into <code>stats</code>. Please see <a href="../stats/index.htm#errors-and-warnings" tppabs="https://webpack.docschina.org/api/stats/#errors-and-warnings">Stats Data</a>.</p> </blockquote> <h3 id="inline-matchresource">Inline matchResource <a href="#inline-matchresource" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>A new inline request syntax was introduced in webpack v4. Prefixing <code>&#x3C;match-resource>!=!</code> to a request will set the <code>matchResource</code> for this request.</p> <blockquote class="warning"> <p>It is not recommended to use this syntax in application code. Inline request syntax is intended to only be used by loader generated code. Not following this recommendation will make your code webpack-specific and non-standard.</p> </blockquote> <blockquote class="tip"> <p>A relative <code>matchResource</code> will resolve relative to the current context of the containing module.</p> </blockquote> <p>When a <code>matchResource</code> is set, it will be used to match with the <a href="../../configuration/module/index.htm#modulerules" tppabs="https://webpack.docschina.org/configuration/module/#modulerules"><code>module.rules</code></a> instead of the original resource. This can be useful if further loaders should be applied to the resource, or if the module type needs to be changed. It's also displayed in the stats and used for matching <a href="../../configuration/module/index.htm#ruleissuer" tppabs="https://webpack.docschina.org/configuration/module/#ruleissuer"><code>Rule.issuer</code></a> and <a href="../../plugins/split-chunks-plugin/index.htm#splitchunkscachegroupscachegrouptest" tppabs="https://webpack.docschina.org/plugins/split-chunks-plugin/#splitchunkscachegroupscachegrouptest"><code>test</code> in <code>splitChunks</code></a>.</p> <p>Example:</p> <p><strong>file.js</strong></p> <pre><code class="hljs language-javascript"><span class="token comment">/* STYLE: body { background: red; } */</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>A loader could transform the file into the following file and use the <code>matchResource</code> to apply the user-specified CSS processing rules:</p> <p><strong>file.js</strong> (transformed by loader)</p> <pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token string">'./file.js.css!=!extract-style-loader/getStyles!./file.js'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>This will add a dependency to <code>extract-style-loader/getStyles!./file.js</code> and treat the result as <code>file.js.css</code>. Because <a href="../../configuration/module/index.htm#modulerules" tppabs="https://webpack.docschina.org/configuration/module/#modulerules"><code>module.rules</code></a> has a rule matching <code>/\.css$/</code> and it will apply to this dependency.</p> <p>The loader could look like this:</p> <p><strong>extract-style-loader/index.js</strong></p> <pre><code class="hljs language-javascript"><span class="token keyword">const</span> stringifyRequest <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>stringifyRequest<span class="token punctuation">;</span>
<span class="token keyword">const</span> getRemainingRequest <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getRemainingRequest<span class="token punctuation">;</span>
<span class="token keyword">const</span> getStylesLoader <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./getStyle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">STYLES_REGEXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    source <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token constant">STYLES_REGEXP</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> remReq <span class="token operator">=</span> <span class="token function">getRemainingRequest</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">import </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">stringifyRequest</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>resource<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.css!=!</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>getStylesLoader<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>remReq<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>source<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p><strong>extract-style-loader/getStyles.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token constant">STYLES_REGEXP</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="logging">Logging <a href="#logging" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>Logging API is available since the release of webpack 4.37. When <code>logging</code> is enabled in <a href="../../configuration/stats/index.htm#statslogging" tppabs="https://webpack.docschina.org/configuration/stats/#statslogging"><code>stats configuration</code></a> and/or when <a href="../../configuration/other-options/index.htm#infrastructurelogging" tppabs="https://webpack.docschina.org/configuration/other-options/#infrastructurelogging"><code>infrastructure logging</code></a> is enabled, loaders may log messages which will be printed out in the respective logger format (stats, infrastructure).</p> <ul> <li>Loaders should prefer to use <code>this.getLogger()</code> for logging which is a shortcut to <code>compilation.getLogger()</code> with loader path and processed file. This kind of logging is stored to the Stats and formatted accordingly. It can be filtered and exported by the webpack user.</li> <li>Loaders may use <code>this.getLogger('name')</code> to get an independent logger with a child name. Loader path and processed file is still added.</li> <li>Loaders may use special fallback logic for detecting logging support <code>this.getLogger() ? this.getLogger() : console</code> to provide a fallback when an older webpack version is used which does not support <code>getLogger</code> method.</li> </ul> <h1 id="Logger-æ¥å£">Logger æ¥å£<a href="#Logger-%E6%8E%A5%E5%8F%A3" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <blockquote class="tip"> <p>æœ¬ API ä» v4.39.0 å¼€å§‹å¯ç”¨</p> </blockquote> <p>ä½¿ç”¨ Logger è¾“å‡ºæ¶ˆæ¯æ˜¯ä¸€ç§å‘ç”¨æˆ·å±•ç¤ºä¿¡æ¯çš„æœ‰æ•ˆæ–¹å¼ã€‚</p> <p>Webpack Logger å¯ä»¥ç”¨åœ¨ <a href="../../loaders/index.htm" tppabs="https://webpack.docschina.org/loaders/">loader</a> å’Œ <a href="../plugins/index.htm#logging" tppabs="https://webpack.docschina.org/api/plugins/#logging">plugin</a>ã€‚ç”Ÿæˆçš„ Logger å°†ä½œä¸º <a href="../stats/index.htm" tppabs="https://webpack.docschina.org/api/stats/">ç»Ÿè®¡ä¿¡æ¯</a> çš„ä¸€éƒ¨åˆ†è¿›è¡Œè¾“å‡ºï¼Œå¹¶ä¸”ç”¨æˆ·å¯ä»¥åœ¨ <a href="../../configuration/index.htm" tppabs="https://webpack.docschina.org/configuration/">webpack é…ç½®æ–‡ä»¶</a> ä¸­å¯¹ Logger è¿›è¡Œé…ç½®ã€‚</p> <p>åœ¨ Webpack ä¸­ä½¿ç”¨è‡ªå®šä¹‰ Logger API çš„ä¼˜ç‚¹ï¼š</p> <ul> <li>å¯ä»¥ <a href="../../configuration/stats/index.htm#statslogging" tppabs="https://webpack.docschina.org/configuration/stats/#statslogging">é…ç½®</a> æ—¥å¿—çš„å±•ç¤ºçº§åˆ«</li> <li>æ—¥å¿—å†…å®¹å¯ä½œä¸º <code>stats.json</code> çš„ä¸€éƒ¨åˆ†è¾“å‡º</li> <li>ç»Ÿè®¡é¢„è®¾ä¼šå½±å“æ—¥å¿—çš„è¾“å‡º</li> <li>ä½¿ç”¨ plugin å¯ä»¥å½±å“æ—¥å¿—çš„æ•è·ä¸å±•ç¤ºçº§åˆ«</li> <li>å½“ä½¿ç”¨å¤šä¸ª plugin å’Œ loader æ—¶ï¼Œæä¾›æ›´åŠ é€šç”¨çš„æ—¥å¿—è®°å½•è§£å†³æ–¹æ¡ˆ</li> <li>åŸºäº Webpack å¼€å‘çš„ CLIã€UI å·¥å…·ç­‰å¯èƒ½ä¼šé€‰æ‹©ä¸åŒçš„æ–¹å¼æ¥å±•ç¤ºæ—¥å¿—</li> <li>Webpack æ ¸å¿ƒå¯ä»¥è§¦å‘æ—¥å¿—è¾“å‡ºï¼Œä¾‹å¦‚ï¼štiming data</li> </ul> <p>é€šè¿‡å¼•å…¥ Webpack Logger APIï¼Œæˆ‘ä»¬å¸Œæœ›ç»Ÿä¸€ Webpack plugins å’Œ loaders ç”Ÿæˆæ—¥å¿—çš„æ–¹å¼ï¼Œå¹¶æä¾›æ›´å¥½çš„æ–¹æ³•æ¥æ£€æŸ¥æ„å»ºé—®é¢˜ã€‚ é›†æˆçš„ Logging è§£å†³æ–¹æ¡ˆå¯ä»¥å¸®åŠ© plugins å’Œ loader çš„å¼€å‘äººå‘˜æå‡ä»–ä»¬çš„å¼€å‘ç»éªŒã€‚åŒæ—¶ä¸ºé CLI å½¢å¼çš„ Webpack è§£å†³æ–¹æ¡ˆæ„å»ºé“ºå¹³äº†é“è·¯ï¼Œä¾‹å¦‚ dashboard æˆ–å…¶ä»– UIã€‚</p> <blockquote class="warning"> <p>__é¿å…åœ¨æ—¥å¿—ä¸­è¾“å‡ºæ— æ•ˆä¿¡æ¯ï¼__è¯·è®°ä½ï¼Œå¤šä¸ª plugin å’Œ loader ç»å¸¸ä¸€èµ·ä½¿ç”¨ã€‚loader é€šå¸¸å¤„ç†å¤šä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”æ¯ä¸ªæ–‡ä»¶éƒ½ä¼šè°ƒç”¨ï¼Œæ‰€ä»¥å°½å¯èƒ½é€‰æ‹©è¾ƒä½çš„æ—¥å¿—çº§åˆ«ä»¥ä¿è¯ log çš„ä¿¡æ¯é‡ã€‚</p> </blockquote> <h2 id="examples-of-how-to-get-and-use-webpack-logger-in-loaders-and-plugins">Examples of how to get and use webpack logger in loaders and plugins <a href="#examples-of-how-to-get-and-use-webpack-logger-in-loaders-and-plugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><strong>my-webpack-plugin.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> <span class="token constant">PLUGIN_NAME</span> <span class="token operator">=</span> <span class="token string">'my-webpack-plugin'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyWebpackPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// you can access Logger from compiler</span>
    <span class="token keyword">const</span> logger <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">getInfrastructureLogger</span><span class="token punctuation">(</span><span class="token constant">PLUGIN_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'log from compiler'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>compilation<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token constant">PLUGIN_NAME</span><span class="token punctuation">,</span> <span class="token parameter">compilation</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// you can also access Logger from compilation</span>
      <span class="token keyword">const</span> logger <span class="token operator">=</span> compilation<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token constant">PLUGIN_NAME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'log from compilation'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre> <p><strong>my-webpack-loader.js</strong></p> <pre><code class="hljs language-js">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// you can get Logger with `this.getLogger` in your webpack loaders</span>
  <span class="token keyword">const</span> logger <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">'my-webpack-loader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'hello Logger'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="logger-methods">Logger methods <a href="#logger-methods" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <ul> <li><code>logger.error(...)</code>ï¼šç”¨äºè¾“å‡ºé”™è¯¯ä¿¡æ¯</li> <li><code>logger.warn(...)</code>ï¼šç”¨äºè¾“å‡ºè­¦å‘Šä¿¡æ¯</li> <li><code>logger.info(...)</code>ï¼šç”¨äºè¾“å‡º__é‡è¦__ä¿¡æ¯ã€‚é»˜è®¤æƒ…å†µä¸‹ä¼šæ˜¾ç¤ºè¿™äº›ä¿¡æ¯ï¼Œæ‰€ä»¥ä»…ç”¨äºè¾“å‡ºç”¨æˆ·çœŸæ­£éœ€è¦æŸ¥çœ‹çš„æ¶ˆæ¯</li> <li><code>logger.log(...)</code>ï¼šç”¨äºè¾“å‡º__ä¸é‡è¦__çš„ä¿¡æ¯ã€‚åªæœ‰å½“ç”¨æˆ·é€‰æ‹©æŸ¥çœ‹æ—¶ï¼Œæ‰ä¼šæ˜¾ç¤º</li> <li><code>logger.debug(...)</code>ï¼šç”¨äºè¾“å‡ºè°ƒè¯•ä¿¡æ¯ã€‚åªæœ‰å½“ç”¨æˆ·é€‰æ‹©æŸ¥çœ‹ç‰¹å®šæ¨¡å—çš„è°ƒè¯•æ—¥å¿—æ—¶ï¼Œæ‰ä¼šæ˜¾ç¤º</li> <li><code>logger.trace()</code>ï¼šæ˜¾ç¤ºå †æ ˆè·Ÿè¸ªä¿¡æ¯ï¼Œå±•ç¤ºå½¢å¼ç±»ä¼¼äº <code>logger.debug</code></li> <li><code>logger.group(...)</code>ï¼šå°†æ¶ˆæ¯è¿›è¡Œåˆ†ç»„ï¼Œå±•ç¤ºå½¢å¼ç±»ä¼¼äº <code>logger.log</code></li> <li><code>logger.groupEnd()</code>ï¼šç»“æŸæ¶ˆæ¯åˆ†ç»„</li> <li><code>logger.groupCollapsed(...)</code>ï¼šå°†æ¶ˆæ¯è¿›è¡Œåˆ†ç»„ã€‚é»˜è®¤æ˜¾ç¤ºä¸ºæŠ˜å  <code>logger.log</code> æ—¥å¿—ï¼Œå½“æ—¥å¿—è®°å½•çº§åˆ«è®¾ç½®ä¸º <code>'verbose'</code> æˆ– <code>'debug'</code> æ—¶ï¼Œæ˜¾ç¤ºå±•å¼€çš„æ—¥å¿—</li> <li><code>logger.status</code>ï¼šå†™å…¥ä¸€æ¡ä¸´æ—¶æ¶ˆæ¯ï¼Œå¹¶ä¸”è®¾ç½®æ–°çŠ¶æ€ï¼Œè¦†ç›–ä¸Šä¸€ä¸ªçŠ¶æ€</li> <li><code>logger.clear()</code>ï¼šæ‰“å°æ°´å¹³çº¿ã€‚å±•ç¤ºå½¢å¼ç±»ä¼¼äº <code>logger.log</code></li> <li><code>logger.profile(...)</code>ï¼Œ<code>logger.profileEnd(...)</code>ï¼šæ•è·é…ç½®æ–‡ä»¶ã€‚å½“æ”¯æŒ <code>console.profile</code> API æ—¶ï¼Œä½¿ç”¨å…¶è¿›è¡Œè¾“å‡º</li> </ul> <h2 id="runtime-logger-api">Runtime Logger API <a href="#runtime-logger-api" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>Runtime logger API ä»…åº”è¯¥ç”¨ä½œå¼€å‘å·¥å…·ï¼Œä¸åº”è¯¥åŒ…å«åœ¨ <a href="../../configuration/mode/index.htm#mode-production" tppabs="https://webpack.docschina.org/configuration/mode/#mode-production">ç”Ÿäº§æ¨¡å¼</a>ä¸­ã€‚</p> <ul> <li><code>const logging = require('webpack/lib/logging/runtime')</code>ï¼šç›´æ¥ä» Webpack ä¸­å¼•å…¥å³å¯ä½¿ç”¨ logger API</li> <li><code>logging.getLogger('name')</code>ï¼šæ ¹æ®åç§°è·å–ä¸€ä¸ª logger çš„å®ä¾‹</li> <li><code>logging.configureDefaultLogger(...)</code>ï¼šé‡å†™ logger çš„é»˜è®¤é…ç½®</li> </ul> <pre><code class="hljs language-javascript"><span class="token keyword">const</span> logging <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/lib/logging/runtime'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logging<span class="token punctuation">.</span><span class="token function">configureDefaultLogger</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  level<span class="token operator">:</span> <span class="token string">'log'</span><span class="token punctuation">,</span>
  debug<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">something</span><span class="token regex-delimiter">/</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <ul> <li><code>logging.hooks.log</code>ï¼šå‘ logger ä¸­æ·»åŠ  Plugins</li> </ul> <h1 id="æ¨¡å—æ–¹æ³•">æ¨¡å—æ–¹æ³•<a href="#%E6%A8%A1%E5%9D%97%E6%96%B9%E6%B3%95" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>æœ¬ç« èŠ‚æ¶µç›–äº†ä½¿ç”¨ webpack ç¼–è¯‘ä»£ç çš„æ‰€æœ‰æ–¹æ³•ã€‚åœ¨ webpack æ‰“åŒ…åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©å„ç§æ¨¡å—è¯­æ³•é£æ ¼ï¼ŒåŒ…æ‹¬ <a href="javascript:if(confirm('https://en.wikipedia.org/wiki/ECMAScript  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_-_ECMAScript_2015'" tppabs="https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_-_ECMAScript_2015">ES6</a>ï¼Œ<a href="javascript:if(confirm('https://en.wikipedia.org/wiki/CommonJS  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/CommonJS'" tppabs="https://en.wikipedia.org/wiki/CommonJS">CommonJS</a> å’Œ <a href="javascript:if(confirm('https://en.wikipedia.org/wiki/Asynchronous_module_definition  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://en.wikipedia.org/wiki/Asynchronous_module_definition'" tppabs="https://en.wikipedia.org/wiki/Asynchronous_module_definition">AMD</a>ã€‚</p> <p>å°½ç®¡ webpack æ”¯æŒå¤šç§æ¨¡å—è¯­æ³•ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å»ºè®®å°½é‡ä½¿ç”¨ä¸€è‡´çš„è¯­æ³•ï¼Œä»¥æ­¤é¿å…ä¸€äº›å¥‡æ€ªçš„è¡Œä¸ºå’Œ bugã€‚äº‹å®ä¸Šï¼Œå½“è·ç¦»æœ€è¿‘çš„ <code>package.json</code> æ–‡ä»¶ä¸­åŒ…å«å€¼ä¸º <code>"module"</code> æˆ– <code>"commonjs"</code> çš„ <code>"type"</code> å­—æ®µæ—¶ï¼Œwebpack ä¼šå¯ç”¨è¯­æ³•ä¸€è‡´æ€§æ£€æŸ¥ã€‚è¯·å¤§å®¶åœ¨é˜…è¯»å‰ï¼Œæ³¨æ„æ­¤æƒ…å†µï¼š</p> <ul> <li>åœ¨ <code>package.json</code> ä¸­ä¸º <code>.mjs</code> æˆ– <code>.js</code> è®¾ç½® <code>"type": "module"</code> <ul> <li>ä¸å…è®¸ä½¿ç”¨ CommonJSï¼Œä¾‹å¦‚ï¼Œä½ ä¸èƒ½ä½¿ç”¨ <code>require</code>ï¼Œ<code>module.exports</code> æˆ– <code>exports</code></li> <li>å½“å¼•å…¥æ–‡ä»¶æ—¶ï¼Œå¼ºåˆ¶ç¼–å†™æ‰©å±•åï¼Œä¾‹å¦‚ï¼Œä½ åº”ä½¿ç”¨ <code>import './src/App.mjs'</code>ï¼Œè€Œé <code>import './src/App'</code>ï¼ˆä½ å¯ä»¥é€šè¿‡è®¾ç½® <a href="../../configuration/module/index.htm#resolvefullyspecified" tppabs="https://webpack.docschina.org/configuration/module/#resolvefullyspecified"><code>Rule.resolve.fullySpecified</code></a> æ¥ç¦ç”¨æ­¤è§„åˆ™)</li> </ul> </li> <li>åœ¨ <code>package.json</code> ä¸­ä¸º <code>.cjs</code> æˆ– <code>.js</code> è®¾ç½® <code>"type": "commonjs"</code> <ul> <li><code>import</code> å’Œ <code>export</code> å‡ä¸å¯ç”¨</li> </ul> </li> <li>åœ¨ <code>package.json</code> ä¸­ä¸º <code>.wasm</code> è®¾ç½® <code>"type": "module"</code> <ul> <li>å¼•å…¥ wasm æ–‡ä»¶æ—¶ï¼Œå¿…é¡»ç¼–å†™æ–‡ä»¶æ‰©å±•å</li> </ul> </li> </ul> <h2 id="es6-recommended">ES6 (æ¨è) <a href="#es6-recommended" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>webpack 2 æ”¯æŒåŸç”Ÿçš„ ES6 æ¨¡å—è¯­æ³•ï¼Œæ„å‘³ç€ä½ æ— é¡»é¢å¤–å¼•å…¥ babel è¿™æ ·çš„å·¥å…·ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>import</code> å’Œ <code>export</code>ã€‚ä½†æ˜¯æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨å…¶ä»–çš„ ES6+ ç‰¹æ€§ï¼Œä»ç„¶éœ€è¦å¼•å…¥ babelã€‚webpack æ”¯æŒä»¥ä¸‹çš„æ–¹æ³•ï¼š</p> <h3 id="import"><code>import</code> <a href="#import" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>é€šè¿‡ <code>import</code> ä»¥é™æ€çš„æ–¹å¼å¯¼å…¥å¦ä¸€ä¸ªé€šè¿‡ <code>export</code> å¯¼å‡ºçš„æ¨¡å—ã€‚</p> <pre><code class="hljs language-javascript"><span class="token keyword">import</span> MyModule <span class="token keyword">from</span> <span class="token string">'./my-module.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NamedExport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./other-module.js'</span><span class="token punctuation">;</span></code></pre> <blockquote class="warning"> <p>è¿™é‡Œçš„å…³é”®è¯æ˜¯__é™æ€çš„__ã€‚æ ‡å‡†çš„ <code>import</code> è¯­å¥ä¸­ï¼Œæ¨¡å—è¯­å¥ä¸­ä¸èƒ½ä»¥ã€Œå…·æœ‰é€»è¾‘æˆ–å«æœ‰å˜é‡ã€çš„åŠ¨æ€æ–¹å¼å»å¼•å…¥å…¶ä»–æ¨¡å—ã€‚å…³äº import çš„æ›´å¤šä¿¡æ¯å’Œ <code>import()</code> åŠ¨æ€ç”¨æ³•ï¼Œè¯·æŸ¥çœ‹è¿™é‡Œçš„<a href="javascript:if(confirm('https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import'" tppabs="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">è¯´æ˜</a>ã€‚</p> </blockquote> <p>ä½ ä¹Ÿé€šè¿‡ <code>import</code> æ¥å¼•å…¥ Data URIï¼š</p> <pre><code class="hljs language-javascript"><span class="token keyword">import</span> <span class="token string">'data:text/javascript;charset=utf-8;base64,Y29uc29sZS5sb2coJ2lubGluZSAxJyk7'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> number<span class="token punctuation">,</span> fn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'data:text/javascript;charset=utf-8;base64,ZXhwb3J0IGNvbnN0IG51bWJlciA9IDQyOwpleHBvcnQgY29uc3QgZm4gPSAoKSA9PiAiSGVsbG8gd29ybGQiOw=='</span><span class="token punctuation">;</span></code></pre> <h3 id="export"><code>export</code> <a href="#export" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>é»˜è®¤</code>å¯¼å‡ºæ•´ä¸ªæ¨¡å—æˆ–å…·åå¯¼å‡ºæ¨¡å—ã€‚</p> <pre><code class="hljs language-javascript"><span class="token comment">// å…·åå¯¼å‡º</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> Count <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">Multiply</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// é»˜è®¤å¯¼å‡º</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// Some data...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="import"><code>import()</code> <a href="#import" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function(string path):Promise</code></p> <p>åŠ¨æ€çš„åŠ è½½æ¨¡å—ã€‚è°ƒç”¨ <code>import</code> çš„ä¹‹å¤„ï¼Œè¢«è§†ä¸ºåˆ†å‰²ç‚¹ï¼Œæ„æ€æ˜¯ï¼Œè¢«è¯·æ±‚çš„æ¨¡å—å’Œå®ƒå¼•ç”¨çš„æ‰€æœ‰å­æ¨¡å—ï¼Œä¼šåˆ†å‰²åˆ°ä¸€ä¸ªå•ç‹¬çš„ chunk ä¸­ã€‚</p> <blockquote class="tip"> <p><a href="javascript:if(confirm('https://whatwg.github.io/loader/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://whatwg.github.io/loader/'" tppabs="https://whatwg.github.io/loader/">ES2015 Loader è§„èŒƒ</a> å®šä¹‰äº† <code>import()</code> æ–¹æ³•ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°åŠ è½½ ES2015 æ¨¡å—ã€‚</p> </blockquote> <pre><code class="hljs language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span> module<span class="token punctuation">.</span>hot <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something with lodash (a.k.a '_')...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> <blockquote class="warning"> <p>import() ç‰¹æ€§ä¾èµ–äºå†…ç½®çš„ <a href="javascript:if(confirm('https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise'" tppabs="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>ã€‚å¦‚æœæƒ³åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸­ä½¿ç”¨ <code>import()</code>ï¼Œè®°å¾—ä½¿ç”¨åƒ <a href="javascript:if(confirm('https://github.com/stefanpenner/es6-promise  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/stefanpenner/es6-promise'" tppabs="https://github.com/stefanpenner/es6-promise">es6-promise</a> æˆ–è€… <a href="javascript:if(confirm('https://github.com/taylorhakes/promise-polyfill  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/taylorhakes/promise-polyfill'" tppabs="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a> è¿™æ · polyfill åº“ï¼Œæ¥é¢„å…ˆå¡«å……(shim) <code>Promise</code> ç¯å¢ƒã€‚</p> </blockquote> <h3 id="dynamic-expressions-in-import">import() ä¸­çš„è¡¨è¾¾å¼ <a href="#dynamic-expressions-in-import" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ä¸èƒ½ä½¿ç”¨å®Œå…¨åŠ¨æ€çš„ import è¯­å¥ï¼Œä¾‹å¦‚ <code>import(foo)</code>ã€‚æ˜¯å› ä¸º <code>foo</code> å¯èƒ½æ˜¯ç³»ç»Ÿæˆ–é¡¹ç›®ä¸­ä»»ä½•æ–‡ä»¶çš„ä»»ä½•è·¯å¾„ã€‚</p> <p><code>import()</code> å¿…é¡»è‡³å°‘åŒ…å«ä¸€äº›å…³äºæ¨¡å—çš„è·¯å¾„ä¿¡æ¯ã€‚æ‰“åŒ…å¯ä»¥é™å®šäºä¸€ä¸ªç‰¹å®šçš„ç›®å½•æˆ–æ–‡ä»¶é›†ï¼Œä»¥ä¾¿äºåœ¨ä½¿ç”¨åŠ¨æ€è¡¨è¾¾å¼æ—¶ - åŒ…æ‹¬å¯èƒ½åœ¨ <code>import()</code> è°ƒç”¨ä¸­è¯·æ±‚çš„æ¯ä¸ªæ¨¡å—ã€‚ä¾‹å¦‚ï¼Œ <code>import(`./locale/${language}.json`)</code> ä¼šæŠŠ <code>.locale</code> ç›®å½•ä¸­çš„æ¯ä¸ª <code>.json</code> æ–‡ä»¶æ‰“åŒ…åˆ°æ–°çš„ chunk ä¸­ã€‚åœ¨è¿è¡Œæ—¶ï¼Œè®¡ç®—å®Œå˜é‡ <code>language</code> åï¼Œå°±å¯ä»¥ä½¿ç”¨åƒ <code>english.json</code> æˆ– <code>german.json</code> çš„ä»»ä½•æ–‡ä»¶ã€‚</p> <pre><code class="hljs language-javascript"><span class="token comment">// æƒ³è±¡æˆ‘ä»¬æœ‰ä¸€ä¸ªä» cookies æˆ–å…¶ä»–å­˜å‚¨ä¸­è·å–è¯­è¨€çš„æ–¹æ³•</span>
<span class="token keyword">const</span> language <span class="token operator">=</span> <span class="token function">detectVisitorLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./locale/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// do something with the translations</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <blockquote class="tip"> <p>ä½¿ç”¨ <a href="../module-methods/index.htm#magic-comments" tppabs="https://webpack.docschina.org/api/module-methods/#magic-comments"><code>webpackInclude</code> and <code>webpackExclude</code></a> é€‰é¡¹å¯è®©ä½ æ·»åŠ æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼Œä»¥å‡å°‘ webpack æ‰“åŒ…å¯¼å…¥çš„æ–‡ä»¶æ•°é‡ã€‚</p> </blockquote> <h4 id="magic-comments">Magic Comments <a href="#magic-comments" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h4> <p>å†…è”æ³¨é‡Šä½¿è¿™ä¸€ç‰¹æ€§å¾—ä»¥å®ç°ã€‚é€šè¿‡åœ¨ import ä¸­æ·»åŠ æ³¨é‡Šï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œè¯¸å¦‚ç»™ chunk å‘½åæˆ–é€‰æ‹©ä¸åŒæ¨¡å¼çš„æ“ä½œã€‚</p> <pre><code class="hljs language-js"><span class="token comment">// å•ä¸ªç›®æ ‡</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackChunkName: "my-chunk-name" */</span>
  <span class="token comment">/* webpackMode: "lazy" */</span>
  <span class="token comment">/* webpackExports: ["default", "named"] */</span>
  <span class="token string">'module'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// å¤šä¸ªå¯èƒ½çš„ç›®æ ‡</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackInclude: /\.json$/ */</span>
  <span class="token comment">/* webpackExclude: /\.noimport\.json$/ */</span>
  <span class="token comment">/* webpackChunkName: "my-chunk-name" */</span>
  <span class="token comment">/* webpackMode: "lazy" */</span>
  <span class="token comment">/* webpackPrefetch: true */</span>
  <span class="token comment">/* webpackPreload: true */</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./locale/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <pre><code class="hljs language-js"><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackIgnore: true */</span> <span class="token string">'ignored-module.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p><code>webpackIgnore</code>ï¼šè®¾ç½®ä¸º true æ—¶ï¼Œç¦ç”¨åŠ¨æ€å¯¼å…¥è§£æã€‚</p> <blockquote class="warning"> <p>æ³¨æ„ï¼šå°† <code>webpackIgnore</code> è®¾ç½®ä¸º <code>true</code> åˆ™ä¸è¿›è¡Œä»£ç åˆ†å‰²ã€‚</p> </blockquote> <p><code>webpackChunkName</code>: æ–° chunk çš„åç§°ã€‚ ä» webpack 2.6.0 å¼€å§‹ï¼Œå ä½ç¬¦ <code>[index]</code> å’Œ <code>[request]</code> åˆ†åˆ«æ”¯æŒé€’å¢çš„æ•°å­—æˆ–å®é™…çš„è§£ææ–‡ä»¶åã€‚ æ·»åŠ æ­¤æ³¨é‡Šåï¼Œå°†å•ç‹¬çš„ç»™æˆ‘ä»¬çš„ chunk å‘½åä¸º [my-chunk-name].js è€Œä¸æ˜¯ [id].jsã€‚</p> <p><code>webpackMode</code>ï¼šä» webpack 2.6.0 å¼€å§‹ï¼Œå¯ä»¥æŒ‡å®šä»¥ä¸åŒçš„æ¨¡å¼è§£æåŠ¨æ€å¯¼å…¥ã€‚æ”¯æŒä»¥ä¸‹é€‰é¡¹ï¼š</p> <ul> <li><code>'lazy'</code> (é»˜è®¤å€¼)ï¼šä¸ºæ¯ä¸ª <code>import()</code> å¯¼å…¥çš„æ¨¡å—ç”Ÿæˆä¸€ä¸ªå¯å»¶è¿ŸåŠ è½½ï¼ˆlazy-loadableï¼‰çš„ chunkã€‚</li> <li><code>'lazy-once'</code>ï¼šç”Ÿæˆä¸€ä¸ªå¯ä»¥æ»¡è¶³æ‰€æœ‰ <code>import()</code> è°ƒç”¨çš„å•ä¸ªå¯å»¶è¿ŸåŠ è½½ï¼ˆlazy-loadableï¼‰çš„ chunkã€‚æ­¤ chunk å°†åœ¨ç¬¬ä¸€æ¬¡ <code>import()</code> æ—¶è°ƒç”¨æ—¶è·å–ï¼Œéšåçš„ <code>import()</code> åˆ™ä½¿ç”¨ç›¸åŒçš„ç½‘ç»œå“åº”ã€‚æ³¨æ„ï¼Œè¿™ç§æ¨¡å¼ä»…åœ¨éƒ¨åˆ†åŠ¨æ€è¯­å¥ä¸­æœ‰æ„ä¹‰ï¼Œä¾‹å¦‚ <code>import(`./locales/${language}.json`)</code>ï¼Œå…¶ä¸­å¯èƒ½å«æœ‰å¤šä¸ªè¢«è¯·æ±‚çš„æ¨¡å—è·¯å¾„ã€‚</li> <li><code>'eager'</code>ï¼šä¸ä¼šç”Ÿæˆé¢å¤–çš„ chunkã€‚æ‰€æœ‰çš„æ¨¡å—éƒ½è¢«å½“å‰çš„ chunk å¼•å…¥ï¼Œå¹¶ä¸”æ²¡æœ‰é¢å¤–çš„ç½‘ç»œè¯·æ±‚ã€‚ä½†æ˜¯ä»ä¼šè¿”å›ä¸€ä¸ª resolved çŠ¶æ€çš„ <code>Promise</code>ã€‚ä¸é™æ€å¯¼å…¥ç›¸æ¯”ï¼Œåœ¨è°ƒç”¨ <code>import()</code> å®Œæˆä¹‹å‰ï¼Œè¯¥æ¨¡å—ä¸ä¼šè¢«æ‰§è¡Œã€‚</li> <li><code>'weak'</code>ï¼šå°è¯•åŠ è½½æ¨¡å—ï¼Œå¦‚æœè¯¥æ¨¡å—å‡½æ•°å·²ç»ä»¥å…¶ä»–æ–¹å¼åŠ è½½ï¼Œï¼ˆå³å¦ä¸€ä¸ª chunk å¯¼å…¥è¿‡æ­¤æ¨¡å—ï¼Œæˆ–åŒ…å«æ¨¡å—çš„è„šæœ¬è¢«åŠ è½½ï¼‰ã€‚ä»ä¼šè¿”å› <code>Promise</code>ï¼Œ ä½†æ˜¯åªæœ‰åœ¨å®¢æˆ·ç«¯ä¸Šå·²ç»æœ‰è¯¥ chunk æ—¶æ‰ä¼šæˆåŠŸè§£æã€‚å¦‚æœè¯¥æ¨¡å—ä¸å¯ç”¨ï¼Œåˆ™è¿”å› rejected çŠ¶æ€çš„ <code>Promise</code>ï¼Œä¸”ç½‘ç»œè¯·æ±‚æ°¸è¿œéƒ½ä¸ä¼šæ‰§è¡Œã€‚å½“éœ€è¦çš„ chunks å§‹ç»ˆåœ¨ï¼ˆåµŒå…¥åœ¨é¡µé¢ä¸­çš„ï¼‰åˆå§‹è¯·æ±‚ä¸­æ‰‹åŠ¨æä¾›ï¼Œè€Œä¸æ˜¯åœ¨åº”ç”¨ç¨‹åºå¯¼èˆªåœ¨æœ€åˆæ²¡æœ‰æä¾›çš„æ¨¡å—å¯¼å…¥çš„æƒ…å†µä¸‹è§¦å‘ï¼Œè¿™å¯¹äºé€šç”¨æ¸²æŸ“ï¼ˆSSRï¼‰æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</li> </ul> <p><code>webpackPrefetch</code>ï¼šå‘Šè¯‰æµè§ˆå™¨å°†æ¥å¯èƒ½éœ€è¦è¯¥èµ„æºæ¥è¿›è¡ŒæŸäº›å¯¼èˆªè·³è½¬ã€‚æŸ¥çœ‹æŒ‡å—ï¼Œäº†è§£æœ‰å…³æ›´å¤šä¿¡æ¯ <a href="../../guides/code-splitting/index.htm#prefetchingpreloading-modules" tppabs="https://webpack.docschina.org/guides/code-splitting/#prefetchingpreloading-modules">how webpackPrefetch works</a>ã€‚</p> <p><code>webpackPreload</code>ï¼šå‘Šè¯‰æµè§ˆå™¨åœ¨å½“å‰å¯¼èˆªæœŸé—´å¯èƒ½éœ€è¦è¯¥èµ„æºã€‚ æŸ¥é˜…æŒ‡å—ï¼Œäº†è§£æœ‰å…³çš„æ›´å¤šä¿¡æ¯ <a href="../../guides/code-splitting/index.htm#prefetchingpreloading-modules" tppabs="https://webpack.docschina.org/guides/code-splitting/#prefetchingpreloading-modules">how webpackPreload works</a>ã€‚</p> <blockquote class="tip"> <p>æ³¨æ„ï¼šæ‰€æœ‰é€‰é¡¹éƒ½å¯ä»¥åƒè¿™æ ·ç»„åˆ <code>/* webpackMode: "lazy-once", webpackChunkName: "all-i18n-data" */</code>ã€‚è¿™ä¼šæŒ‰æ²¡æœ‰èŠ±æ‹¬å·çš„ JSON5 å¯¹è±¡å»è§£æã€‚å®ƒä¼šè¢«åŒ…è£¹åœ¨ JavaScript å¯¹è±¡ä¸­ï¼Œå¹¶ä½¿ç”¨ <a href="javascript:if(confirm('https://nodejs.org/dist/latest-v8.x/docs/api/vm.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://nodejs.org/dist/latest-v8.x/docs/api/vm.html'" tppabs="https://nodejs.org/dist/latest-v8.x/docs/api/vm.html">node VM</a> æ‰§è¡Œã€‚æ‰€ä»¥ä½ ä¸éœ€è¦æ·»åŠ èŠ±æ‹¬å·ã€‚</p> </blockquote> <p><code>webpackInclude</code>ï¼šåœ¨å¯¼å…¥è§£æï¼ˆimport resolutionï¼‰è¿‡ç¨‹ä¸­ï¼Œç”¨äºåŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚åªæœ‰åŒ¹é…åˆ°çš„æ¨¡å—__æ‰ä¼šè¢«æ‰“åŒ…__ã€‚</p> <p><code>webpackExclude</code>ï¼šåœ¨å¯¼å…¥è§£æï¼ˆimport resolutionï¼‰è¿‡ç¨‹ä¸­ï¼Œç”¨äºåŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æ‰€æœ‰åŒ¹é…åˆ°çš„æ¨¡å—__éƒ½ä¸ä¼šè¢«æ‰“åŒ…__ã€‚</p> <blockquote class="tip"> <p>æ³¨æ„ï¼Œ<code>webpackInclude</code> å’Œ <code>webpackExclude</code> ä¸ä¼šå½±å“åˆ°å‰ç¼€ï¼Œä¾‹å¦‚ <code>./locale</code>ã€‚</p> </blockquote> <p><code>webpackExports</code>: å‘ŠçŸ¥ webpack åªæ„å»ºæŒ‡å®šå‡ºå£çš„åŠ¨æ€ <code>import()</code> æ¨¡å—ã€‚å®ƒå¯ä»¥å‡å° chunk çš„å¤§å°ã€‚ä» <a href="javascript:if(confirm('https://github.com/webpack/webpack/releases/tag/v5.0.0-beta.18  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/webpack/releases/tag/v5.0.0-beta.18'" tppabs="https://github.com/webpack/webpack/releases/tag/v5.0.0-beta.18">webpack 5.0.0-beta.18</a> èµ·å¯ç”¨ã€‚</p> <h2 id="commonjs">CommonJS <a href="#commonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>CommonJS çš„ç›®æ ‡æ˜¯ä¸ºæµè§ˆå™¨ä¹‹å¤–çš„ JavaScript æŒ‡å®šä¸€ä¸ªç”Ÿæ€ç³»ç»Ÿã€‚webpack æ”¯æŒä»¥ä¸‹ CommonJS çš„æ–¹æ³•ï¼š</p> <h3 id="require"><code>require</code> <a href="#require" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-typescript"><span class="token keyword">require</span><span class="token punctuation">(</span>dependency<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å·²åŒæ­¥çš„æ–¹å¼æ£€ç´¢å…¶ä»–æ¨¡å—çš„å¯¼å‡ºã€‚ç¼–è¯‘å™¨ï¼ˆcompilerï¼‰ä¼šç¡®ä¿ä¾èµ–é¡¹åœ¨è¾“å‡º bundle ä¸­å¯ç”¨ã€‚</p> <pre><code class="hljs language-javascript"><span class="token keyword">var</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myModule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'my-module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <blockquote class="warning"> <p>ä»¥å¼‚æ­¥çš„æ–¹å¼ä½¿ç”¨ï¼Œå¯èƒ½ä¸ä¼šè¾¾åˆ°é¢„æœŸæ•ˆæœã€‚</p> </blockquote> <h3 id="requireresolve"><code>require.resolve</code> <a href="#requireresolve" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-typescript"><span class="token keyword">require</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dependency<span class="token operator">:</span> String<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å·²åŒæ­¥çš„æ–¹å¼è·å–æ¨¡å—çš„ IDã€‚ç¼–è¯‘å™¨ï¼ˆcompilerï¼‰ä¼šç¡®ä¿ä¾èµ–é¡¹åœ¨æœ€ç»ˆè¾“å‡º bundle ä¸­å¯ç”¨ã€‚å»ºè®®å°†å…¶è§†ä¸ºä¸é€æ˜å€¼ï¼Œåªèƒ½ä¸ <code>require.cache[id]</code> æˆ– <code>__webpack_require__(id)</code> é…åˆä½¿ç”¨ï¼ˆæœ€å¥½é¿å…è¿™ç§ç”¨æ³•ï¼‰ã€‚</p> <blockquote class="warning"> <p>æ¨¡å— ID çš„ç±»å‹å¯ä»¥æ˜¯ <code>number</code> æˆ– <code>string</code>ï¼Œå…·ä½“å–å†³äº <a href="../../configuration/optimization/index.htm#optimizationmoduleids" tppabs="https://webpack.docschina.org/configuration/optimization/#optimizationmoduleids"><code>optimization.moduleIds</code></a> é…ç½®ã€‚</p> </blockquote> <p>æœ‰å…³æ›´å¤šæ¨¡å—çš„ä¿¡æ¯ï¼Œè¯¦è§ <a href="../module-variables/index.htm#moduleid-commonjs" tppabs="https://webpack.docschina.org/api/module-variables/#moduleid-commonjs"><code>module.id</code></a>ã€‚</p> <h3 id="requirecache"><code>require.cache</code> <a href="#requirecache" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>å¤šå¤„å¼•ç”¨åŒä¸€æ¨¡å—ï¼Œæœ€ç»ˆåªä¼šäº§ç”Ÿä¸€æ¬¡æ¨¡å—æ‰§è¡Œå’Œä¸€æ¬¡å¯¼å‡ºã€‚æ‰€ä»¥ï¼Œä¼šåœ¨è¿è¡Œæ—¶ï¼ˆruntimeï¼‰ä¸­ä¼šä¿å­˜ä¸€ä»½ç¼“å­˜ã€‚åˆ é™¤æ­¤ç¼“å­˜ï¼Œåˆ™ä¼šäº§ç”Ÿæ–°çš„æ¨¡å—æ‰§è¡Œå’Œæ–°çš„å¯¼å‡ºã€‚</p> <blockquote class="warning"> <p>ä»…åœ¨æå°‘æ•°æƒ…å†µä¸‹æ‰éœ€è¦è€ƒè™‘å…¼å®¹æ€§ï¼</p> </blockquote> <pre><code class="hljs language-javascript"><span class="token keyword">var</span> d1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span> <span class="token operator">===</span> d1<span class="token punctuation">;</span>
<span class="token keyword">delete</span> require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> d1<span class="token punctuation">;</span></code></pre> <pre><code class="hljs language-javascript"><span class="token comment">// in file.js</span>
require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">===</span> module<span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./file.js'</span><span class="token punctuation">)</span> <span class="token operator">===</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token keyword">delete</span> require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./file.js'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span> <span class="token comment">// ç†è®ºä¸Šæ˜¯ä¸ç›¸ç­‰çš„ï¼›å®é™…è¿è¡Œä¸­ï¼Œåˆ™ä¼šå¯¼è‡´å †æ ˆæº¢å‡º</span>
require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">!==</span> module<span class="token punctuation">;</span></code></pre> <h3 id="requireensure"><code>require.ensure</code> <a href="#requireensure" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <blockquote class="warning"> <p><code>require.ensure()</code> æ˜¯ webpack ç‰¹æœ‰çš„ï¼Œå·²è¢« <code>import()</code> å–ä»£ã€‚</p> </blockquote> <pre><code class="hljs language-js">require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span>
  dependencies<span class="token operator">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">require</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function-variable function">errorCallback</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  chunkName<span class="token operator">:</span> String
<span class="token punctuation">)</span></code></pre> <p>ç»™å®š <code>dependencies</code> å‚æ•°ï¼Œå°†å…¶å¯¹åº”çš„æ–‡ä»¶æ‹†åˆ†åˆ°ä¸€ä¸ªå•ç‹¬çš„ bundle ä¸­ï¼Œæ­¤ bundle ä¼šè¢«å¼‚æ­¥åŠ è½½ã€‚å½“ä½¿ç”¨ CommonJS æ¨¡å—è¯­æ³•æ—¶ï¼Œè¿™æ˜¯åŠ¨æ€åŠ è½½ä¾èµ–é¡¹çš„å”¯ä¸€æ–¹æ³•ã€‚è¿™æ„å‘³ç€ï¼Œå¯ä»¥åœ¨æ¨¡å—æ‰§è¡Œæ—¶æ‰å…è®¸ä»£ç ï¼Œåªæœ‰åœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶æ‰ä¼šåŠ è½½ <code>dependencies</code>ã€‚</p> <blockquote class="warning"> <p>è¿™ä¸ªç‰¹æ€§ä¾èµ–å†…ç½®çš„ <a href="javascript:if(confirm('https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise'" tppabs="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>ã€‚å¦‚æœä½ åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸­ä½¿ç”¨ <code>require.ensure</code>ï¼Œè®°å¾—ä½¿ç”¨åƒ <a href="javascript:if(confirm('https://github.com/stefanpenner/es6-promise  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/stefanpenner/es6-promise'" tppabs="https://github.com/stefanpenner/es6-promise">es6-promise</a> æˆ– <a href="javascript:if(confirm('https://github.com/taylorhakes/promise-polyfill  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/taylorhakes/promise-polyfill'" tppabs="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a> è¿™æ ·çš„ polyfill åº“ï¼Œé¢„å…ˆå¡«å……ï¼ˆshimï¼‰<code>Promise</code> ç¯å¢ƒã€‚</p> </blockquote> <pre><code class="hljs language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'normal-dep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> module<span class="token punctuation">.</span>hot <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">require</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Do something special...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre> <p>æŒ‰ç…§ä¸Šé¢æŒ‡å®šçš„é¡ºåºï¼Œ<code>require.ensure</code> æ”¯æŒä»¥ä¸‹å‚æ•°ï¼š</p> <ul> <li><code>dependencies</code>ï¼šå­—ç¬¦ä¸²æ•°ç»„ï¼Œå£°æ˜ <code>callback</code> å›è°ƒå‡½æ•°ä¸­æ‰€éœ€è¦çš„æ‰€æœ‰æ¨¡å—ã€‚</li> <li><code>callback</code>ï¼šå½“ä¾èµ–é¡¹åŠ è½½å®Œæˆåï¼Œwebpack å°†ä¼šæ‰§è¡Œæ­¤å‡½æ•°ï¼Œ<code>require</code> å‡½æ•°çš„å®ç°ï¼Œä½œä¸ºå‚æ•°ä¼ å…¥æ­¤å‡½æ•°ä¸­ã€‚å½“ç¨‹åºè¿è¡Œéœ€è¦ä¾èµ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>require()</code> æ¥åŠ è½½ä¾èµ–ã€‚å‡½æ•°ä½“å¯ä»¥ä½¿ç”¨æ­¤å‚æ•°ï¼Œæ¥è¿›ä¸€æ­¥æ‰§è¡Œ <code>require()</code> æ¨¡å—ã€‚</li> <li><code>errorCallback</code>ï¼šå½“ webpack åŠ è½½ä¾èµ–å¤±è´¥æ—¶ä¼šæ‰§è¡Œæ­¤å‡½æ•°ã€‚</li> <li><code>chunkName</code>ï¼šç”± <code>require.ensure</code> åˆ›å»ºçš„ chunk çš„åç§°ã€‚é€šè¿‡å°†ç›¸åŒ <code>chunkName</code> ä¼ é€’ç»™ä¸åŒçš„ <code>require.ensure</code> è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä»£ç åˆå¹¶åˆ°ä¸€ä¸ªå•ç‹¬çš„ chunk ä¸­ï¼Œä»è€Œåªäº§ç”Ÿä¸€ä¸ªæµè§ˆå™¨å¿…é¡»åŠ è½½çš„ bundleã€‚</li> </ul> <blockquote class="warning"> <p>è™½ç„¶å°† <code>require</code> çš„å®ç°ä½œä¸ºå‚æ•°ï¼ˆå¯ä»¥ä½¿ç”¨ä»»æ„åç§°ï¼‰ä¼ é€’ç»™ <code>callback</code> å‡½æ•°ï¼Œä¾‹å¦‚ï¼Œ<code>require.ensure([], function(request) { request('someModule'); })</code> åˆ™ä¸èƒ½è¢« webpack é™æ€è§£æå™¨å¤„ç†ï¼Œå› æ­¤è¿˜æ˜¯ä½¿ç”¨ <code>require</code> ä½œä¸ºå‚æ•°åï¼Œä¾‹å¦‚ï¼Œ<code>require.ensure([], function(require) { require('someModule') })</code>ã€‚</p> </blockquote> <h2 id="amd">AMD <a href="#amd" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>AMDï¼ˆAsynchronous Module Definitionï¼‰æ˜¯ä¸€ç§å®šä¹‰äº†ç”¨äºç¼–å†™å’ŒåŠ è½½æ¨¡å—æ¥å£çš„ JavaScript è§„èŒƒã€‚</p> <h3 id="define-with-factory"><code>define</code> (é€šè¿‡ factory æ–¹æ³•å¯¼å‡º) <a href="#define-with-factory" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-js"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token operator">:</span> String<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dependencies<span class="token operator">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function-variable function">factoryMethod</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre> <p>å¦‚æœæä¾›äº† <code>dependencies</code> å‚æ•°ï¼Œå°±ä¼šè°ƒç”¨ <code>factoryMethod</code> æ–¹æ³•ï¼Œå¹¶ï¼ˆä»¥ç›¸åŒçš„é¡ºåºï¼‰å¯¼å‡ºæ¯ä¸ªä¾èµ–é¡¹ã€‚å¦‚æœæœªæä¾› <code>dependencies</code> å‚æ•°ï¼Œè°ƒç”¨ <code>factoryMethod</code> æ–¹æ³•æ—¶ä¼šä¼ å…¥ <code>require</code> , <code>exports</code> å’Œ <code>module</code>ï¼ˆç”¨äºå…¼å®¹ï¼ï¼‰ã€‚å¦‚æœæ­¤æ–¹æ³•è¿”å›ä¸€ä¸ªå€¼ï¼Œåˆ™è¿”å›å€¼ä¼šä½œä¸ºæ­¤æ¨¡å—çš„å¯¼å‡ºã€‚ç”±ç¼–è¯‘å™¨ï¼ˆcompilerï¼‰æ¥ç¡®ä¿ä¾èµ–é¡¹åœ¨æœ€ç»ˆè¾“å‡ºçš„ bundle ä¸­å¯ç”¨ã€‚</p> <blockquote class="warning"> <p>æ³¨æ„ï¼šwebpack ä¼šå¿½ç•¥ <code>name</code> å‚æ•°ã€‚</p> </blockquote> <pre><code class="hljs language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">,</span> <span class="token string">'my-module'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$<span class="token punctuation">,</span> myModule</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä½¿ç”¨ $ å’Œ myModule åšä¸€äº›æ“ä½œ...</span>

  <span class="token comment">// å¯¼å‡ºä¸€ä¸ªå‡½æ•°</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <blockquote class="warning"> <p>ä¸Šé¢çš„å†™æ³•ä¸èƒ½åœ¨å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨ã€‚</p> </blockquote> <h3 id="define-with-value"><code>define</code> (é€šè¿‡ value å¯¼å‡º) <a href="#define-with-value" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-js"><span class="token function">define</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token operator">!</span>Function<span class="token punctuation">)</span></code></pre> <p>è¿™ç§æ–¹å¼åªå°†æä¾›çš„ <code>value</code> å¯¼å‡ºã€‚è¿™é‡Œçš„ <code>value</code> å¯ä»¥æ˜¯é™¤å‡½æ•°ä»¥å¤–çš„ä»»ä½•å€¼ã€‚</p> <pre><code class="hljs language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  answer<span class="token operator">:</span> <span class="token number">42</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <blockquote class="warning"> <p>ä¸Šé¢çš„å†™æ³•ä¸èƒ½åœ¨å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨ã€‚</p> </blockquote> <h3 id="require-amd-version"><code>require</code> (AMD ç‰ˆæœ¬) <a href="#require-amd-version" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-js"><span class="token function">require</span><span class="token punctuation">(</span>dependencies<span class="token operator">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre> <p>ä¸ <code>require.ensure</code> ç±»ä¼¼ï¼Œç»™å®š <code>dependencies</code> å‚æ•°ï¼Œå°†å…¶å¯¹åº”çš„æ–‡ä»¶æ‹†åˆ†åˆ°ä¸€ä¸ªå•ç‹¬çš„ bundle ä¸­ï¼Œæ­¤ bundle ä¼šè¢«å¼‚æ­¥åŠ è½½ã€‚ç„¶åä¼šè°ƒç”¨ <code>callback</code> å›è°ƒå‡½æ•°ï¼Œå¹¶ä¼ å…¥ <code>dependencies</code> æ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹å¯¼å‡ºã€‚</p> <blockquote class="warning"> <p>è¿™ä¸ªç‰¹æ€§ä¾èµ–å†…ç½®çš„ <a href="javascript:if(confirm('https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise'" tppabs="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>ã€‚å¦‚æœä½ åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸­ä½¿ç”¨ <code>require.ensure</code>ï¼Œè®°å¾—ä½¿ç”¨åƒ <a href="javascript:if(confirm('https://github.com/stefanpenner/es6-promise  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/stefanpenner/es6-promise'" tppabs="https://github.com/stefanpenner/es6-promise">es6-promise</a> æˆ– <a href="javascript:if(confirm('https://github.com/taylorhakes/promise-polyfill  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/taylorhakes/promise-polyfill'" tppabs="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a> è¿™æ ·çš„ polyfill åº“ï¼Œé¢„å…ˆå¡«å……ï¼ˆshimï¼‰<code>Promise</code> ç¯å¢ƒã€‚</p> </blockquote> <pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <blockquote class="warning"> <p>è¿™é‡Œæ²¡æœ‰æä¾›å‘½å bundle åç§°çš„é€‰é¡¹ã€‚</p> </blockquote> <h2 id="labeled-modules">æ ‡ç­¾æ¨¡å—(Labeled Modules) <a href="#labeled-modules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>webpack å†…ç½®çš„ <code>LabeledModulesPlugin</code> æ’ä»¶ï¼Œå…è®¸ä½ ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•å¯¼å‡ºå’Œå¯¼å…¥æ¨¡å—ï¼š</p> <h3 id="export-label"><code>export</code> æ ‡ç­¾ <a href="#export-label" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>å¯¼å‡ºç»™å®šçš„ <code>value</code>ã€‚æ ‡ç­¾å¯ä»¥å‡ºç°åœ¨å‡½æ•°å£°æ˜æˆ–å˜é‡å£°æ˜ä¹‹å‰ã€‚å‡½æ•°åæˆ–å˜é‡åæ˜¯å¯¼å‡ºå€¼çš„æ ‡è¯†ç¬¦ã€‚</p> <pre><code class="hljs language-js"><span class="token keyword">export</span><span class="token operator">:</span> <span class="token keyword">var</span> answer <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token function-variable function">export</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <blockquote class="warning"> <p>åœ¨å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå¯èƒ½ä¸ä¼šè¾¾åˆ°é¢„æœŸçš„æ•ˆæœã€‚</p> </blockquote> <h3 id="require-label"><code>require</code> æ ‡ç­¾ <a href="#require-label" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>åœ¨å½“å‰ä½œç”¨åŸŸä¸‹ï¼Œä¾èµ–é¡¹çš„æ‰€æœ‰å¯¼å‡ºå‡å¯ç”¨ã€‚<code>require</code> æ ‡ç­¾å¯ä»¥æ”¾ç½®åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¹‹å‰ã€‚ä¾èµ–æ¨¡å—å¿…é¡»ä½¿ç”¨ <code>export</code> æ ‡ç­¾å¯¼å‡ºå€¼ã€‚CommonJS æˆ– AMD æ¨¡å—æ— æ³•é€šè¿‡è¿™ç§æ–¹å¼ä½¿ç”¨ã€‚</p> <p><strong>some-dependency.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">export</span><span class="token operator">:</span> <span class="token keyword">var</span> answer <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token function-variable function">export</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <pre><code class="hljs language-js">require<span class="token operator">:</span> <span class="token string">'some-dependency'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">method</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h2 id="webpack">Webpack <a href="#webpack" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>é™¤äº†ä¸Šè¿°æ¨¡å—è¯­æ³•ä¹‹å¤–ï¼Œè¿˜å…è®¸ä½¿ç”¨ä¸€äº› webpack ç‰¹å®šçš„æ–¹æ³•ï¼š</p> <h3 id="requirecontext"><code>require.context</code> <a href="#requirecontext" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-js">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>
  directory<span class="token operator">:</span> String<span class="token punctuation">,</span>
  includeSubdirs<span class="token operator">:</span> Boolean <span class="token comment">/* å¯é€‰çš„ï¼Œé»˜è®¤å€¼æ˜¯ true */</span><span class="token punctuation">,</span>
  filter<span class="token operator">:</span> RegExp <span class="token comment">/* å¯é€‰çš„ï¼Œé»˜è®¤å€¼æ˜¯ /^\.\/.*$/ï¼Œæ‰€æœ‰æ–‡ä»¶ */</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span> String  <span class="token comment">/* å¯é€‰çš„ï¼Œ 'sync' | 'eager' | 'weak' | 'lazy' | 'lazy-once'ï¼Œé»˜è®¤å€¼æ˜¯ 'sync' */</span>
<span class="token punctuation">)</span></code></pre> <p>æŒ‡å®šä¸€ç³»åˆ—ä¾èµ–é¡¹ï¼Œé€šè¿‡ä½¿ç”¨ <code>directory</code> çš„è·¯å¾„ï¼Œä»¥åŠ <code>includeSubdirs</code> ï¼Œ<code>filter</code> é€‰é¡¹ï¼Œè¿›è¡Œæ›´ç»†ç²’åº¦çš„æ¨¡å—å¼•å…¥ï¼Œä½¿ç”¨ <code>mode</code> å®šä¹‰åŠ è½½æ–¹å¼ã€‚ä»¥æ­¤å¯ä»¥å¾ˆå®¹æ˜“çš„è§£ææ¨¡å—ï¼š</p> <pre><code class="hljs language-javascript"><span class="token keyword">var</span> context <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'components'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.html$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> componentA <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'componentA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å¦‚æœ <code>mode</code> è®¾ç½®ä¸º <code>lazy</code>ï¼ŒåŸºç¡€æ¨¡å—å°†ä»¥å¼‚æ­¥æ–¹å¼åŠ è½½ï¼š</p> <pre><code class="hljs language-javascript"><span class="token keyword">var</span> context <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'locales'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.json$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'lazy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'localeA'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">locale</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// do something with locale</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p><code>mode</code> çš„å¯ç”¨æ¨¡å¼åŠè¯´æ˜çš„å®Œæ•´åˆ—è¡¨åœ¨ <a href="#import-1"><code>import()</code></a> æ–‡æ¡£ä¸­è¿›è¡Œäº†æè¿°ã€‚</p> <h3 id="requireinclude"><code>require.include</code> <a href="#requireinclude" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <pre><code class="hljs language-js">require<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span>dependency<span class="token operator">:</span> String<span class="token punctuation">)</span></code></pre> <p>å¼•å…¥ä¸€ä¸ªä¸éœ€è¦æ‰§è¡Œçš„ <code>dependency</code>ï¼Œè¿™æ ·å¯ä»¥ç”¨äºä¼˜åŒ–è¾“å‡º chunk ä¸­ä¾èµ–æ¨¡å—çš„ä½ç½®ã€‚</p> <pre><code class="hljs language-javascript">require<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">require</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">require</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>è¿™ä¼šäº§ç”Ÿä»¥ä¸‹è¾“å‡ºï¼š</p> <ul> <li>entry chunk: <code>file.js</code> and <code>a</code></li> <li>anonymous chunk: <code>b</code></li> <li>anonymous chunk: <code>c</code></li> </ul> <p>ä¸ä½¿ç”¨ <code>require.include('a')</code>ï¼Œè¾“å‡ºçš„ä¸¤ä¸ªåŒ¿å chunk éƒ½ä¼šæœ‰æ¨¡å— aã€‚</p> <h3 id="requireresolveweak"><code>require.resolveWeak</code> <a href="#requireresolveweak" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ä¸ <code>require.resolve</code> ç±»ä¼¼ï¼Œä½†æ˜¯ä¸ä¼šæŠŠ <code>module</code> å¼•å…¥åˆ° bundle ä¸­ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œå¼±ï¼ˆweakï¼‰â€ä¾èµ–ã€‚</p> <pre><code class="hljs language-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>__webpack_modules__<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolveWeak</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å½“æ¨¡å—å¯ç”¨æ—¶ï¼Œæ‰§è¡Œä¸€äº›æ“ä½œâ€¦â€¦</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolveWeak</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åœ¨æ¨¡å—åŠ è½½å®Œæˆä¹‹å‰ï¼Œæ‰§è¡Œä¸€äº›æ“ä½œâ€¦â€¦</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½ å¯ä»¥åƒæ‰§è¡Œå…¶ä»– require/import æ–¹æ³•ä¸€æ ·ï¼Œ</span>
<span class="token comment">// æ‰§è¡ŒåŠ¨æ€è§£æä¸Šä¸‹æ–‡ resolves ("context")ã€‚</span>
<span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token string">'Foo'</span><span class="token punctuation">;</span>
__webpack_modules__<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolveWeak</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./page/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code></pre> <blockquote class="tip"> <p><code>require.resolveWeak</code> æ˜¯_é€šç”¨æ¸²æŸ“_ï¼ˆæœåŠ¡å™¨ç«¯æ¸²æŸ“ SSR + ä»£ç åˆ†å‰² Code Splittingï¼‰çš„åŸºç¡€ã€‚ä¾‹å¦‚åœ¨ <a href="javascript:if(confirm('https://github.com/faceyspacey/react-universal-component  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/faceyspacey/react-universal-component'" tppabs="https://github.com/faceyspacey/react-universal-component">react-universal-component</a> ç­‰åŒ…ä¸­çš„ç”¨æ³•ã€‚å®ƒå…è®¸ä»£ç åœ¨æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯åˆå§‹é¡µé¢çš„åŠ è½½ä¸ŠåŒæ­¥æ¸²æŸ“ã€‚å®ƒè¦æ±‚æ‰‹åŠ¨æˆ–ä»¥æŸç§æ–¹å¼æä¾› chunkã€‚å®ƒå¯ä»¥åœ¨ä¸éœ€è¦æŒ‡ç¤ºåº”è¯¥è¢«æ‰“åŒ…çš„æƒ…å†µä¸‹å¼•å…¥æ¨¡å—ã€‚å®ƒä¸ <code>import()</code> ä¸€èµ·ä½¿ç”¨ï¼Œå½“ç”¨æˆ·å¯¼èˆªè§¦å‘é¢å¤–çš„å¯¼å…¥æ—¶ï¼Œå®ƒä¼šè¢«æ¥ç®¡ã€‚</p> </blockquote> <h1 id="Module-Variables">Module Variables<a href="#Module-Variables" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>æœ¬ç« èŠ‚æ¶µç›–äº†ä½¿ç”¨ webpack ç¼–è¯‘çš„ä»£ç ä¸­æ‰€æœ‰çš„ <strong>å˜é‡</strong>ã€‚æ¨¡å—å°†é€šè¿‡ <code>module</code> å’Œå…¶ä»–å˜é‡ï¼Œæ¥è®¿é—®ç¼–è¯‘è¿‡ç¨‹ä¸­çš„æŸäº›æ•°æ®ã€‚</p> <h3 id="moduleloaded-nodejs"><code>module.loaded</code> (NodeJS) <a href="#moduleloaded-nodejs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>false</code> è¡¨ç¤ºè¯¥æ¨¡å—æ­£åœ¨æ‰§è¡Œï¼Œ <code>true</code> è¡¨ç¤ºåŒæ­¥æ‰§è¡Œå·²ç»å®Œæˆã€‚</p> <h3 id="modulehot-webpack-specific"><code>module.hot</code> (webpack-specific) <a href="#modulehot-webpack-specific" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>è¡¨ç¤º <a href="../../concepts/hot-module-replacement.htm" tppabs="https://webpack.docschina.org/concepts/hot-module-replacement">æ¨¡å—çƒ­æ›¿æ¢(Hot Module Replacement)</a> æ˜¯å¦å¯ç”¨ï¼Œå¹¶ç»™è¿›ç¨‹æä¾›ä¸€ä¸ªæ¥å£ã€‚è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ <a href="../hot-module-replacement.htm" tppabs="https://webpack.docschina.org/api/hot-module-replacement">æ¨¡å—çƒ­æ›¿æ¢ API é¡µé¢</a>ã€‚</p> <h3 id="moduleid-commonjs"><code>module.id</code> (CommonJS) <a href="#moduleid-commonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>å½“å‰æ¨¡å—çš„ IDã€‚</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>id <span class="token operator">===</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./file.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="moduleexports-commonjs"><code>module.exports</code> (CommonJS) <a href="#moduleexports-commonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>è°ƒç”¨è€…é€šè¿‡ <code>require</code> å¯¹æ¨¡å—è¿›è¡Œè°ƒç”¨æ—¶è¿”å›çš„å€¼ï¼ˆé»˜è®¤ä¸ºä¸€ä¸ªæ–°å¯¹è±¡ï¼‰ã€‚</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <blockquote class="warning"> <p>æ— æ³•åœ¨å¼‚æ­¥å‡½æ•°ä¸­è®¿é—®è¯¥å˜é‡ã€‚</p> </blockquote> <h3 id="exports-commonjs"><code>exports</code> (CommonJS) <a href="#exports-commonjs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>è¯¥å˜é‡é»˜è®¤å€¼ä¸º <code>module.exports</code>ï¼ˆå³ä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚ å¦‚æœ <code>module.exports</code> è¢«é‡å†™çš„è¯ï¼Œ <code>exports</code> ä¸å†ä¼šè¢«å¯¼å‡ºã€‚</p> <pre><code class="hljs language-javascript">exports<span class="token punctuation">.</span>someValue <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>anObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token operator">:</span> <span class="token number">123</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">aFunction</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="global-nodejs"><code>global</code> (NodeJS) <a href="#global-nodejs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>è§ <a href="javascript:if(confirm('https://nodejs.org/api/globals.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://nodejs.org/api/globals.html#globals_global'" tppabs="https://nodejs.org/api/globals.html#globals_global">node.js global</a>.</p> <p>å‡ºäºå…¼å®¹æ€§è€ƒè™‘ï¼Œwebpack é»˜è®¤å¡«å……äº† <code>global</code> å˜é‡ã€‚</p> <h3 id="__dirname-nodejs"><code>__dirname</code> (NodeJS) <a href="#__dirname-nodejs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>å–å†³äº <code>node.__dirname</code> é…ç½®é€‰é¡¹ï¼š</p> <ul> <li><code>false</code>: æœªå®šä¹‰</li> <li><code>mock</code>: ç­‰åŒäº <code>'/'</code></li> <li><code>true</code>: <a href="javascript:if(confirm('https://nodejs.org/api/globals.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://nodejs.org/api/globals.html#globals_dirname'" tppabs="https://nodejs.org/api/globals.html#globals_dirname">node.js __dirname</a></li> </ul> <p>å¦‚æœåœ¨ä¸€ä¸ªè¢« Parser è§£æçš„è¡¨è¾¾å¼å†…éƒ¨ä½¿ç”¨ï¼Œåˆ™é…ç½®é€‰é¡¹ä¼šè¢«å½“ä½œ <code>true</code> å¤„ç†ã€‚</p> <h3 id="import-meta-url"><code>import.meta.url</code> <a href="#import-meta-url" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>è¿”å›æ¨¡å—ä»¥ <code>fike:</code> å¼€å¤´ç»å¯¹è·¯å¾„çš„ URLã€‚</p> <p><strong>src/index.js</strong></p> <pre><code class="hljs language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¾“å‡ºç»“æœç±»ä¼¼äº `file:///path/to/your/project/src/index.js`</span></code></pre> <h3 id="import-meta-webpack"><code>import.meta.webpack</code> <a href="#import-meta-webpack" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>è¿”å› webpack çš„ç‰ˆæœ¬</p> <p><strong>src/index.js</strong></p> <pre><code class="hljs language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>webpack<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// output `5` for webpack 5</span></code></pre> <h3 id="__filename-nodejs"><code>__filename</code> (NodeJS) <a href="#__filename-nodejs" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>å–å†³äº <code>node.__filename</code> é…ç½®é€‰é¡¹ï¼š</p> <ul> <li><code>false</code>: æœªå®šä¹‰</li> <li><code>mock</code>: ç­‰åŒäº <code>'/index.js'</code></li> <li><code>true</code>: <a href="javascript:if(confirm('https://nodejs.org/api/globals.html  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://nodejs.org/api/globals.html#globals_filename'" tppabs="https://nodejs.org/api/globals.html#globals_filename">node.js __filename</a></li> </ul> <p>å¦‚æœåœ¨ä¸€ä¸ªè¢« Parser è§£æçš„è¡¨è¾¾å¼å†…éƒ¨ä½¿ç”¨ï¼Œåˆ™é…ç½®é€‰é¡¹ä¼šè¢«å½“ä½œ <code>true</code> å¤„ç†ã€‚</p> <h3 id="__resourcequery-webpack-specific"><code>__resourceQuery</code> (webpack ç‰¹æœ‰å˜é‡) <a href="#__resourcequery-webpack-specific" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>å½“å‰æ¨¡å—çš„èµ„æºæŸ¥è¯¢(resource query) ã€‚å¦‚æœè¿›è¡Œäº†å¦‚ä¸‹çš„ <code>reqiure</code> è°ƒç”¨ï¼Œé‚£ä¹ˆæŸ¥è¯¢å­—ç¬¦ä¸²(query string)åœ¨<code>file.js</code> ä¸­å¯è®¿é—®ã€‚</p> <pre><code class="hljs language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'file.js?test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p><strong>file.js</strong></p> <pre><code class="hljs language-javascript">__resourceQuery <span class="token operator">===</span> <span class="token string">'?test'</span><span class="token punctuation">;</span></code></pre> <h3 id="webpack_public_path-webpack-specific"><code>__webpack_public_path__</code> (webpack ç‰¹æœ‰å˜é‡) {#<strong>webpack_public_path</strong>-webpack-specific}<a href="#webpack_public_path-webpack-specific" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ç­‰åŒäº <code>output.publicPath</code> é…ç½®é€‰é¡¹ã€‚</p> <h3 id="webpack_require-webpack-specific"><code>__webpack_require__</code> (webpack ç‰¹æœ‰å˜é‡) {#<strong>webpack_require</strong>-webpack-specific}<a href="#webpack_require-webpack-specific" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>åŸå§‹ require å‡½æ•°ã€‚è¿™ä¸ªè¡¨è¾¾å¼ä¸ä¼šè¢«è§£æå™¨è§£æä¸ºä¾èµ–ã€‚</p> <h3 id="webpack_chunk_load-webpack-specific"><code>__webpack_chunk_load__</code> (webpack ç‰¹æœ‰å˜é‡) {#<strong>webpack_chunk_load</strong>-webpack-specific}<a href="#webpack_chunk_load-webpack-specific" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>å†…éƒ¨ chunk è½½å…¥å‡½æ•°ï¼Œæœ‰ä¸¤ä¸ªè¾“å…¥å‚æ•°ï¼š</p> <ul> <li><code>chunkId</code> éœ€è¦è½½å…¥çš„ chunk idã€‚</li> <li><code>callback(require)</code> chunk è½½å…¥åè°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚</li> </ul> <h3 id="webpack_modules-webpack-specific"><code>__webpack_modules__</code> (webpack ç‰¹æœ‰å˜é‡) {#<strong>webpack_modules</strong>-webpack-specific}<a href="#webpack_modules-webpack-specific" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>è®¿é—®æ‰€æœ‰æ¨¡å—çš„å†…éƒ¨å¯¹è±¡ã€‚</p> <h3 id="webpack_hash-webpack-specific"><code>__webpack_hash__</code> (webpack ç‰¹æœ‰å˜é‡) {#<strong>webpack_hash</strong>-webpack-specific}<a href="#webpack_hash-webpack-specific" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>è¿™ä¸ªå˜é‡åªæœ‰åœ¨å¯ç”¨ <code>HotModuleReplacementPlugin</code> æˆ–è€… <code>ExtendedAPIPlugin</code> æ—¶æ‰ç”Ÿæ•ˆã€‚è¿™ä¸ªå˜é‡æä¾›å¯¹ç¼–è¯‘è¿‡ç¨‹ä¸­(compilation)çš„ hash ä¿¡æ¯çš„è·å–ã€‚</p> <h3 id="non_webpack_require-webpack-specific"><code>__non_webpack_require__</code> (webpack ç‰¹æœ‰å˜é‡) {#<strong>non_webpack_require</strong>-webpack-specific}<a href="#non_webpack_require-webpack-specific" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ç”Ÿæˆä¸€ä¸ªä¸ä¼šè¢« webpack è§£æçš„ <code>require</code> å‡½æ•°ã€‚é…åˆå…¨å±€å¯ä»¥è·å–åˆ°çš„ require å‡½æ•°ï¼Œå¯ä»¥å®Œæˆä¸€äº›é…·ç‚«æ“ä½œã€‚</p> <h3 id="webpack_exports_info-webpack-specific"><code>__webpack_exports_info__</code> (webpack ç‰¹æœ‰å˜é‡) {#<strong>webpack_exports_info</strong>-webpack-specific}<a href="#webpack_exports_info-webpack-specific" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>åœ¨æ¨¡å—ä¸­, <code>__webpack_exports_info__</code> å¯ä»¥è¢«è·å–åˆ°ï¼Œä»¥ä¾¿å¯¼å‡ºæ¨¡å—ç”¨ä»¥è‡ªæˆ‘æ£€æŸ¥ï¼š</p> <ul> <li> <p><code>__webpack_exports_info__</code> æ€»æ˜¯ <code>true</code></p> </li> <li> <p>å½“å¯¼å‡ºæ¨¡å—æœªè¢«ä½¿ç”¨æ—¶ <code>__webpack_exports_info__.&#x3C;exportName>.used</code> ä¸º <code>false</code>, å¦åˆ™æ˜¯ <code>true</code></p> </li> <li> <p><code>__webpack_exports_info__.&#x3C;exportName>.useInfo</code> æ˜¯</p> <ul> <li><code>false</code> å½“å¯¼å‡ºæ¨¡å—æœªè¢«ä½¿ç”¨</li> <li><code>true</code> å½“å¯¼å‡ºæ¨¡å—è¢«ä½¿ç”¨</li> <li><code>null</code> å½“å¯¼å‡ºæ¨¡å—çš„ä½¿ç”¨æƒ…å†µå–å†³äºè¿è¡Œæ—¶çš„æ¡ä»¶</li> <li><code>undefined</code> å½“æ²¡æœ‰å¯ç”¨ä¿¡æ¯æ—¶</li> </ul> </li> <li> <p><code>__webpack_exports_info__.&#x3C;exportName>.provideInfo</code> æ˜¯</p> <ul> <li><code>false</code> å½“å¯¼å‡ºæ¨¡å—æ²¡æœ‰è¢«æä¾›</li> <li><code>true</code> å½“å¯¼å‡ºæ¨¡å—è¢«æä¾›</li> <li><code>null</code> å½“å¯¼å‡ºæ¨¡å—çš„æä¾›æƒ…å†µå–å†³äºè¿è¡Œæ—¶çš„æ¡ä»¶</li> <li><code>undefined</code> å½“æ²¡æœ‰å¯ç”¨ä¿¡æ¯æ—¶</li> </ul> </li> <li> <p>å¯ä»¥ä»åµŒå¥—çš„ exports ä¸­å¾—åˆ°ç›¸å…³ä¿¡æ¯: ä¾‹å¦‚ <code>__webpack_exports_info__.&#x3C;exportName>.&#x3C;exportName>.&#x3C;exportName>.used</code></p> </li> </ul> <h3 id="debug--webpack-specific"><code>DEBUG</code> (webpack ç‰¹æœ‰å˜é‡) <a href="#debug--webpack-specific" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ç­‰åŒäº <code>debug</code> é…ç½®é€‰é¡¹ã€‚</p> <h1 id="compiler-é’©å­">compiler é’©å­<a href="#compiler-%E9%92%A9%E5%AD%90" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p><code>Compiler</code> æ¨¡å—æ˜¯ webpack çš„ä¸»è¦å¼•æ“ï¼Œå®ƒé€šè¿‡ <a href="../cli.htm" tppabs="https://webpack.docschina.org/api/cli">CLI</a> ä¼ é€’çš„æ‰€æœ‰é€‰é¡¹ï¼Œ æˆ–è€… <a href="../node.htm" tppabs="https://webpack.docschina.org/api/node">Node API</a>ï¼Œåˆ›å»ºå‡ºä¸€ä¸ª compilation å®ä¾‹ã€‚ å®ƒæ‰©å±•(extend)è‡ª <code>Tapable</code> ç±»ï¼Œç”¨æ¥æ³¨å†Œå’Œè°ƒç”¨æ’ä»¶ã€‚ å¤§å¤šæ•°é¢å‘ç”¨æˆ·çš„æ’ä»¶ä¼šé¦–å…ˆåœ¨ <code>Compiler</code> ä¸Šæ³¨å†Œã€‚</p> <blockquote class="tip"> <p>æ­¤æ¨¡å—ä¼šæš´éœ²åœ¨ <code>webpack.Compiler</code>ï¼Œ å¯ä»¥ç›´æ¥é€šè¿‡è¿™ç§æ–¹å¼ä½¿ç”¨ã€‚ å…³äºæ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <a href="javascript:if(confirm('https://github.com/pksjce/webpack-internal-examples/tree/master/compiler-example  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/pksjce/webpack-internal-examples/tree/master/compiler-example'" tppabs="https://github.com/pksjce/webpack-internal-examples/tree/master/compiler-example">è¿™ä¸ªç¤ºä¾‹</a>ã€‚</p> </blockquote> <p>åœ¨ä¸º webpack å¼€å‘æ’ä»¶æ—¶ï¼Œä½ å¯èƒ½éœ€è¦çŸ¥é“æ¯ä¸ªé’©å­å‡½æ•°æ˜¯åœ¨å“ªé‡Œè°ƒç”¨çš„ã€‚æƒ³è¦äº†è§£è¿™äº›å†…å®¹ï¼Œè¯·åœ¨ webpack æºç ä¸­æœç´¢ <code>hooks.&#x3C;hook name>.call</code>ã€‚</p> <h2 id="watching">ç›‘å¬(watching) <a href="#watching" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>Compiler</code> æ”¯æŒå¯ä»¥ç›‘æ§æ–‡ä»¶ç³»ç»Ÿçš„ <a href="../node/index.htm#watching" tppabs="https://webpack.docschina.org/api/node/#watching">ç›‘å¬(watching)</a> æœºåˆ¶ï¼Œå¹¶ä¸”åœ¨æ–‡ä»¶ä¿®æ”¹æ—¶é‡æ–°ç¼–è¯‘ã€‚ å½“å¤„äºç›‘å¬æ¨¡å¼(watch mode)æ—¶ï¼Œ compiler ä¼šè§¦å‘è¯¸å¦‚ <code>watchRun</code>, <code>watchClose</code> å’Œ <code>invalid</code> ç­‰é¢å¤–çš„äº‹ä»¶ã€‚ é€šå¸¸åœ¨ <a href="../../guides/development.htm" tppabs="https://webpack.docschina.org/guides/development">å¼€å‘ç¯å¢ƒ</a> ä¸­ä½¿ç”¨ï¼Œ ä¹Ÿå¸¸å¸¸ä¼šåœ¨ <code>webpack-dev-server</code> è¿™äº›å·¥å…·çš„åº•å±‚è°ƒç”¨ï¼Œ ç”±æ­¤å¼€å‘äººå‘˜æ— é¡»æ¯æ¬¡éƒ½ä½¿ç”¨æ‰‹åŠ¨æ–¹å¼é‡æ–°ç¼–è¯‘ã€‚ è¿˜å¯ä»¥é€šè¿‡ <a href="../cli/index.htm#watch-options" tppabs="https://webpack.docschina.org/api/cli/#watch-options">CLI</a> è¿›å…¥ç›‘å¬æ¨¡å¼ã€‚</p> <h2 id="hooks">é’©å­ <a href="#hooks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œæ˜¯ç”± <code>compiler</code> æš´éœ²ï¼Œ å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è®¿é—®ï¼š</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å–å†³äºä¸åŒçš„é’©å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥åœ¨æŸäº›é’©å­ä¸Šè®¿é—® <code>tapAsync</code> å’Œ <code>tapPromise</code>ã€‚</p> <p>å…³äºé’©å­ç±»å‹çš„æè¿°ï¼Œè¯·æŸ¥çœ‹ <a href="javascript:if(confirm('https://github.com/webpack/tapable  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/tapable#tapable'" tppabs="https://github.com/webpack/tapable#tapable">Tapable æ–‡æ¡£</a>.</p> <h3 id="entryoption"><code>entryOption</code> <a href="#entryoption" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>åœ¨ webpack é€‰é¡¹ä¸­çš„ <a href="../../configuration/entry-context/index.htm#entry" tppabs="https://webpack.docschina.org/configuration/entry-context/#entry"><code>entry</code></a> è¢«å¤„ç†è¿‡ä¹‹åè°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<a href="../../configuration/entry-context/index.htm#context" tppabs="https://webpack.docschina.org/configuration/entry-context/#context"><code>context</code></a>, <a href="../../configuration/entry-context/index.htm#entry" tppabs="https://webpack.docschina.org/configuration/entry-context/#entry"><code>entry</code></a></li> </ul> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>entryOption<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> entry</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å‚æ•°ï¼š<code>context</code>, <code>entry</code></p> <h3 id="afterplugins"><code>afterPlugins</code> <a href="#afterplugins" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨åˆå§‹åŒ–å†…éƒ¨æ’ä»¶é›†åˆå®Œæˆè®¾ç½®ä¹‹åè°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compiler</code></li> </ul> <h3 id="afterresolvers"><code>afterResolvers</code> <a href="#afterresolvers" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>resolver è®¾ç½®å®Œæˆä¹‹åè§¦å‘ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compiler</code></li> </ul> <h3 id="environment"><code>environment</code> <a href="#environment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨åˆå§‹åŒ–é…ç½®æ–‡ä»¶ä¸­çš„æ’ä»¶ä¹‹åç«‹å³è°ƒç”¨ï¼Œåœ¨ compiler environment å‡†å¤‡æ—¶è°ƒç”¨ã€‚</p> <h3 id="afterenvironment"><code>afterEnvironment</code> <a href="#afterenvironment" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ <code>environment</code> é’©å­ä¹‹åç«‹å³è°ƒç”¨ï¼Œåœ¨ compiler environment å®Œæˆè®¾ç½®æ—¶è°ƒç”¨ã€‚</p> <h3 id="beforerun"><code>beforeRun</code> <a href="#beforerun" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>åœ¨å¼€å§‹æ‰§è¡Œä¸€æ¬¡æ„å»ºä¹‹å‰è°ƒç”¨ï¼Œcompiler.run æ–¹æ³•å¼€å§‹æ‰§è¡Œåç«‹åˆ»è¿›è¡Œè°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compiler</code></li> </ul> <h3 id="additionalpass"><code>additionalPass</code> <a href="#additionalpass" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>This hook allows you to do a one more additional pass of the build.</p> <h3 id="run"><code>run</code> <a href="#run" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>åœ¨å¼€å§‹è¯»å– <a href="../../configuration/other-options/index.htm#recordspath" tppabs="https://webpack.docschina.org/configuration/other-options/#recordspath"><code>records</code></a> ä¹‹å‰è°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compiler</code></li> </ul> <h3 id="watchrun"><code>watchRun</code> <a href="#watchrun" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>åœ¨ç›‘å¬æ¨¡å¼ä¸‹ï¼Œä¸€ä¸ªæ–°çš„ compilation è§¦å‘ä¹‹åï¼Œä½†åœ¨ compilation å®é™…å¼€å§‹ä¹‹å‰æ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compiler</code></li> </ul> <h3 id="normalmodulefactory"><code>normalModuleFactory</code> <a href="#normalmodulefactory" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p><code>NormalModuleFactory</code> åˆ›å»ºä¹‹åè°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>normalModuleFactory</code></li> </ul> <h3 id="contextmodulefactory"><code>contextModuleFactory</code> <a href="#contextmodulefactory" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p><code>ContextModuleFactory</code> åˆ›å»ºä¹‹åè°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>contextModuleFactory</code></li> </ul> <h3 id="initialize"><code>initialize</code> <a href="#initialize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨åˆå§‹åŒ– compiler å¯¹è±¡æ—¶è°ƒç”¨ã€‚</p> <h3 id="beforecompile"><code>beforeCompile</code> <a href="#beforecompile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>åœ¨åˆ›å»º compilation parameter ä¹‹åæ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compilationParams</code></li> </ul> <p>åˆå§‹åŒ– <code>compilationParams</code> å˜é‡çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p> <pre><code class="hljs language-js">compilationParams <span class="token operator">=</span> <span class="token punctuation">{</span>
  normalModuleFactory<span class="token punctuation">,</span>
  contextModuleFactory<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>æ­¤é’©å­å¯ç”¨äºæ·»åŠ /ä¿®æ”¹ compilation parameterï¼š</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>beforeCompile<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  params<span class="token punctuation">[</span><span class="token string">'MyPlugin - data'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'important stuff my plugin will use later'</span><span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="compile"><code>compile</code> <a href="#compile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p><code>beforeCompile</code> ä¹‹åç«‹å³è°ƒç”¨ï¼Œä½†åœ¨ä¸€ä¸ªæ–°çš„ compilation åˆ›å»ºä¹‹å‰ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compilationParams</code></li> </ul> <h3 id="thiscompilation"><code>thisCompilation</code> <a href="#thiscompilation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åˆå§‹åŒ– compilation æ—¶è°ƒç”¨ï¼Œåœ¨è§¦å‘ <code>compilation</code> äº‹ä»¶ä¹‹å‰è°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compilation</code>, <code>compilationParams</code></li> </ul> <h3 id="compilation"><code>compilation</code> <a href="#compilation" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>compilation åˆ›å»ºä¹‹åæ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compilation</code>, <code>compilationParams</code></li> </ul> <h3 id="make"><code>make</code> <a href="#make" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncParallelHook</code></p> <p>compilation ç»“æŸä¹‹å‰æ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compilation</code></li> </ul> <h3 id="aftercompile"><code>afterCompile</code> <a href="#aftercompile" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>compilation ç»“æŸå’Œå°å°ä¹‹åæ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compilation</code></li> </ul> <h3 id="shouldemit"><code>shouldEmit</code> <a href="#shouldemit" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>åœ¨è¾“å‡º asset ä¹‹å‰è°ƒç”¨ã€‚è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå‘ŠçŸ¥æ˜¯å¦è¾“å‡ºã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compilation</code></li> </ul> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>shouldEmit<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// è¿”å› true ä»¥è¾“å‡º output ç»“æœï¼Œå¦åˆ™è¿”å› false</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="emit"><code>emit</code> <a href="#emit" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>è¾“å‡º asset åˆ° output ç›®å½•ä¹‹å‰æ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compilation</code></li> </ul> <h3 id="afteremit"><code>afterEmit</code> <a href="#afteremit" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>è¾“å‡º asset åˆ° output ç›®å½•ä¹‹åæ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compilation</code></li> </ul> <h3 id="assetemitted"><code>assetEmitted</code> <a href="#assetemitted" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>åœ¨ asset è¢«è¾“å‡ºæ—¶æ‰§è¡Œã€‚æ­¤é’©å­å¯ä»¥è®¿é—®è¢«è¾“å‡ºçš„ asset çš„ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚å®ƒçš„è¾“å‡ºè·¯å¾„å’Œå­—èŠ‚å†…å®¹ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>file</code>, <code>info</code></li> </ul> <p>ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡ <code>info.content</code> è®¿é—® asset çš„å†…å®¹ bufferï¼š</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>assetEmitted<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>
  <span class="token string">'MyPlugin'</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">file<span class="token punctuation">,</span> <span class="token punctuation">{</span> content<span class="token punctuation">,</span> source<span class="token punctuation">,</span> outputPath<span class="token punctuation">,</span> compilation<span class="token punctuation">,</span> targetPath <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x3C;Buffer 66 6f 6f 62 61 72></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="done"><code>done</code> <a href="#done" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>åœ¨ compilation å®Œæˆæ—¶æ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>stats</code></li> </ul> <h3 id="failed"><code>failed</code> <a href="#failed" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ compilation å¤±è´¥æ—¶è°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>error</code></li> </ul> <h3 id="invalid"><code>invalid</code> <a href="#invalid" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ä¸€ä¸ªè§‚å¯Ÿä¸­çš„ compilation æ— æ•ˆæ—¶æ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>fileName</code>, <code>changeTime</code></li> </ul> <h3 id="watchclose"><code>watchClose</code> <a href="#watchclose" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ä¸€ä¸ªè§‚å¯Ÿä¸­çš„ compilation åœæ­¢æ—¶æ‰§è¡Œã€‚</p> <h3 id="infrastructurelog"><code>infrastructureLog</code> <a href="#infrastructurelog" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>åœ¨é…ç½®ä¸­å¯ç”¨ <a href="../../configuration/other-options/index.htm#infrastructurelogging" tppabs="https://webpack.docschina.org/configuration/other-options/#infrastructurelogging"><code>infrastructureLogging</code> é€‰é¡¹</a> åï¼Œå…è®¸ä½¿ç”¨ infrastructure log(åŸºç¡€æ—¥å¿—)ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>name</code>, <code>type</code>, <code>args</code></li> </ul> <h3 id="log"><code>log</code> <a href="#log" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>å¯ç”¨åå…è®¸è®°å½•åˆ° <a href="../../configuration/stats/index.htm" tppabs="https://webpack.docschina.org/configuration/stats/">stats</a> å¯¹è±¡ï¼Œè¯·å‚é˜… <a href="../../configuration/stats/index.htm#stats-options" tppabs="https://webpack.docschina.org/configuration/stats/#stats-options"><code>stats.logging</code>, <code>stats.loggingDebug</code> å’Œ <code>stats.loggingTrace</code> é€‰é¡¹</a>ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>origin</code>, <code>logEntry</code></li> </ul> <h1 id="compilation-é’©å­">compilation é’©å­<a href="#compilation-%E9%92%A9%E5%AD%90" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p><code>Compilation</code> æ¨¡å—ä¼šè¢« <code>Compiler</code> ç”¨æ¥åˆ›å»ºæ–°çš„ compilation å¯¹è±¡ï¼ˆæˆ–æ–°çš„ build å¯¹è±¡ï¼‰ã€‚ <code>compilation</code> å®ä¾‹èƒ½å¤Ÿè®¿é—®æ‰€æœ‰çš„æ¨¡å—å’Œå®ƒä»¬çš„ä¾èµ–ï¼ˆå¤§éƒ¨åˆ†æ˜¯å¾ªç¯ä¾èµ–ï¼‰ã€‚ å®ƒä¼šå¯¹åº”ç”¨ç¨‹åºçš„ä¾èµ–å›¾ä¸­æ‰€æœ‰æ¨¡å—ï¼Œ è¿›è¡Œå­—é¢ä¸Šçš„ç¼–è¯‘(literal compilation)ã€‚ åœ¨ç¼–è¯‘é˜¶æ®µï¼Œæ¨¡å—ä¼šè¢«åŠ è½½(load)ã€å°å­˜(seal)ã€ä¼˜åŒ–(optimize)ã€ åˆ†å—(chunk)ã€å“ˆå¸Œ(hash)å’Œé‡æ–°åˆ›å»º(restore)ã€‚</p> <p><code>Compilation</code> ç±»æ‰©å±•(extend)è‡ª <code>Tapable</code>ï¼Œå¹¶æä¾›äº†ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚ å¯ä»¥æŒ‰ç…§ compiler é’©å­çš„ç›¸åŒæ–¹å¼æ¥è°ƒç”¨ tapï¼š</p> <pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å’Œ <code>compiler</code> ç”¨æ³•ç›¸åŒï¼Œå–å†³äºä¸åŒçš„é’©å­ç±»å‹ï¼Œ æ‰€ä»¥ä¹Ÿå¯ä»¥åœ¨æŸäº›é’©å­ä¸Šè®¿é—® <code>tapAsync</code> å’Œ <code>tapPromise</code>ã€‚</p> <h3 id="buildmodule"><code>buildModule</code> <a href="#buildmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨æ¨¡å—æ„å»ºå¼€å§‹ä¹‹å‰è§¦å‘ï¼Œå¯ä»¥ç”¨æ¥ä¿®æ”¹æ¨¡å—ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>module</code></li> </ul> <pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>buildModule<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'SourceMapDevToolModuleOptionsPlugin'</span><span class="token punctuation">,</span>
  <span class="token parameter">module</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span>useSourceMap <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="rebuildmodule"><code>rebuildModule</code> <a href="#rebuildmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨é‡æ–°æ„å»ºä¸€ä¸ªæ¨¡å—ä¹‹å‰è§¦å‘ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>module</code></li> </ul> <h3 id="failedmodule"><code>failedModule</code> <a href="#failedmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>æ¨¡å—æ„å»ºå¤±è´¥æ—¶æ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>module</code> <code>error</code></li> </ul> <h3 id="succeedmodule"><code>succeedModule</code> <a href="#succeedmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>æ¨¡å—æ„å»ºæˆåŠŸæ—¶æ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>module</code></li> </ul> <h3 id="finishmodules"><code>finishModules</code> <a href="#finishmodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>æ‰€æœ‰æ¨¡å—éƒ½å®Œæˆæ„å»ºå¹¶ä¸”æ²¡æœ‰é”™è¯¯æ—¶æ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code></li> </ul> <h3 id="finishrebuildingmodule"><code>finishRebuildingModule</code> <a href="#finishrebuildingmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>ä¸€ä¸ªæ¨¡å—å®Œæˆé‡æ–°æ„å»ºæ—¶æ‰§è¡Œï¼Œåœ¨éƒ½æˆåŠŸæˆ–æœ‰é”™è¯¯çš„æƒ…å†µä¸‹ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>module</code></li> </ul> <h3 id="seal"><code>seal</code> <a href="#seal" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>compilation å¯¹è±¡åœæ­¢æ¥æ”¶æ–°çš„æ¨¡å—æ—¶è§¦å‘ã€‚</p> <h3 id="unseal"><code>unseal</code> <a href="#unseal" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>compilation å¯¹è±¡å¼€å§‹æ¥æ”¶æ–°æ¨¡å—æ—¶è§¦å‘ã€‚</p> <h3 id="optimizedependencies"><code>optimizeDependencies</code> <a href="#optimizedependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>ä¾èµ–ä¼˜åŒ–å¼€å§‹æ—¶è§¦å‘ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code></li> </ul> <h3 id="afteroptimizedependencies"><code>afterOptimizeDependencies</code> <a href="#afteroptimizedependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>ä¾èµ–ä¼˜åŒ–ä¹‹åè§¦å‘ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code></li> </ul> <h3 id="optimize"><code>optimize</code> <a href="#optimize" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>ä¼˜åŒ–é˜¶æ®µå¼€å§‹æ—¶è§¦å‘ã€‚</p> <h3 id="optimizemodules"><code>optimizeModules</code> <a href="#optimizemodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>åœ¨æ¨¡å—ä¼˜åŒ–é˜¶æ®µå¼€å§‹æ—¶è°ƒç”¨ã€‚æ’ä»¶å¯ä»¥ tap æ­¤é’©å­å¯¹æ¨¡å—è¿›è¡Œä¼˜åŒ–ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code></li> </ul> <h3 id="afteroptimizemodules"><code>afterOptimizeModules</code> <a href="#afteroptimizemodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨æ¨¡å—ä¼˜åŒ–å®Œæˆä¹‹åè°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code></li> </ul> <h3 id="optimizechunks"><code>optimizeChunks</code> <a href="#optimizechunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>åœ¨ chunk ä¼˜åŒ–é˜¶æ®µå¼€å§‹æ—¶è°ƒç”¨ã€‚æ’ä»¶å¯ä»¥ tap æ­¤é’©å­å¯¹ chunk æ‰§è¡Œä¼˜åŒ–ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code></li> </ul> <h3 id="afteroptimizechunks"><code>afterOptimizeChunks</code> <a href="#afteroptimizechunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>chunk ä¼˜åŒ–å®Œæˆä¹‹åè§¦å‘ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code></li> </ul> <h3 id="optimizetree"><code>optimizeTree</code> <a href="#optimizetree" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>åœ¨ä¼˜åŒ–ä¾èµ–æ ‘ä¹‹å‰è°ƒç”¨ã€‚æ’ä»¶å¯ä»¥ tap æ­¤é’©å­æ‰§è¡Œä¾èµ–æ ‘ä¼˜åŒ–ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code> <code>modules</code></li> </ul> <h3 id="afteroptimizetree"><code>afterOptimizeTree</code> <a href="#afteroptimizetree" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ä¾èµ–æ ‘ä¼˜åŒ–æˆåŠŸå®Œæˆä¹‹åè°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code> <code>modules</code></li> </ul> <h3 id="optimizechunkmodules"><code>optimizeChunkModules</code> <a href="#optimizechunkmodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>åœ¨æ ‘ä¼˜åŒ–ä¹‹åï¼Œchunk æ¨¡å—ä¼˜åŒ–å¼€å§‹æ—¶è°ƒç”¨ã€‚æ’ä»¶å¯ä»¥ tap æ­¤é’©å­æ¥æ‰§è¡Œ chunk æ¨¡å—çš„ä¼˜åŒ–ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code> <code>modules</code></li> </ul> <h3 id="afteroptimizechunkmodules"><code>afterOptimizeChunkModules</code> <a href="#afteroptimizechunkmodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ chunk æ¨¡å—ä¼˜åŒ–æˆåŠŸå®Œæˆä¹‹åè°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code> <code>modules</code></li> </ul> <h3 id="shouldrecord"><code>shouldRecord</code> <a href="#shouldrecord" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>è°ƒç”¨æ¥å†³å®šæ˜¯å¦å­˜å‚¨ recordã€‚è¿”å›ä»»ä½•å†…å®¹ <code>!== false</code> å°†é˜»æ­¢æ‰§è¡Œæ‰€æœ‰å…¶ä»– "record" é’©å­ï¼ˆ<a href="#record"><code>record</code></a>, <a href="#recordmodules"><code>recordModules</code></a>, <a href="#recordchunks"><code>recordChunks</code></a> å’Œ <a href="#recordhash"><code>recordHash</code></a>ï¼‰ã€‚</p> <h3 id="revivemodules"><code>reviveModules</code> <a href="#revivemodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>ä» record ä¸­æ¢å¤æ¨¡å—ä¿¡æ¯ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code> <code>records</code></li> </ul> <h3 id="beforemoduleids"><code>beforeModuleIds</code> <a href="#beforemoduleids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ä¸ºæ¯ä¸ªæ¨¡å—åˆ†é… <code>id</code> ä¹‹å‰æ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code></li> </ul> <h3 id="moduleids"><code>moduleIds</code> <a href="#moduleids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>è°ƒç”¨æ¥æ¯ä¸ªæ¨¡å—åˆ†é…ä¸€ä¸ª <code>id</code>ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code></li> </ul> <h3 id="optimizemoduleids"><code>optimizeModuleIds</code> <a href="#optimizemoduleids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨æ¨¡å— <code>id</code> ä¼˜åŒ–å¼€å§‹æ—¶è°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code></li> </ul> <h3 id="afteroptimizemoduleids"><code>afterOptimizeModuleIds</code> <a href="#afteroptimizemoduleids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨æ¨¡å— <code>id</code> ä¼˜åŒ–å®Œæˆæ—¶è°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code></li> </ul> <h3 id="revivechunks"><code>reviveChunks</code> <a href="#revivechunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>ä» record ä¸­æ¢å¤ chunk ä¿¡æ¯ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code> <code>records</code></li> </ul> <h3 id="beforechunkids"><code>beforeChunkIds</code> <a href="#beforechunkids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ä¸ºæ¯ä¸ª chunk åˆ†é… <code>id</code> ä¹‹å‰æ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code></li> </ul> <h3 id="chunkids"><code>chunkIds</code> <a href="#chunkids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>è°ƒç”¨æ—¶ï¼Œä¼šä¸ºæ¯ä¸ª chunk åˆ†é…ä¸€ä¸ª <code>id</code>ã€‚</p> <ul> <li>å›è°ƒå‡½æ•°çš„å‚æ•°ä¸ºï¼š<code>chunks</code></li> </ul> <h3 id="optimizechunkids"><code>optimizeChunkIds</code> <a href="#optimizechunkids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ chunk <code>id</code> ä¼˜åŒ–é˜¶æ®µå¼€å§‹æ—¶è°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code></li> </ul> <h3 id="afteroptimizechunkids"><code>afterOptimizeChunkIds</code> <a href="#afteroptimizechunkids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>chunk <code>id</code> ä¼˜åŒ–ç»“æŸä¹‹åè§¦å‘ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code></li> </ul> <h3 id="recordmodules"><code>recordModules</code> <a href="#recordmodules" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>å°†æ¨¡å—ä¿¡æ¯å­˜å‚¨åˆ° record ä¸­ã€‚<a href="#shouldrecord"><code>shouldRecord</code></a> è¿”å› truthy å€¼æ—¶è§¦å‘ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>modules</code> <code>records</code></li> </ul> <h3 id="recordchunks"><code>recordChunks</code> <a href="#recordchunks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>å°† chunk å­˜å‚¨åˆ° record ä¸­ã€‚<a href="#shouldrecord"><code>shouldRecord</code></a> è¿”å› truthy å€¼æ—¶è§¦å‘ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code> <code>records</code></li> </ul> <h3 id="beforehash"><code>beforeHash</code> <a href="#beforehash" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ compilation æ·»åŠ å“ˆå¸Œ(hash)ä¹‹å‰ã€‚</p> <h3 id="afterhash"><code>afterHash</code> <a href="#afterhash" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨ compilation æ·»åŠ å“ˆå¸Œ(hash)ä¹‹åã€‚</p> <h3 id="recordhash"><code>recordHash</code> <a href="#recordhash" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>å°†æœ‰å…³ record çš„ä¿¡æ¯å­˜å‚¨åˆ° <code>records</code> ä¸­ã€‚ä»…åœ¨ <a href="#shouldrecord"><code>shouldRecord</code></a> è¿”å› truthy å€¼æ—¶è§¦å‘ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>records</code></li> </ul> <h3 id="record"><code>record</code> <a href="#record" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>å°† <code>compilation</code> ç›¸å…³ä¿¡æ¯å­˜å‚¨åˆ° <code>record</code> ä¸­ã€‚ä»…åœ¨ <a href="#shouldrecord"><code>shouldRecord</code></a> è¿”å› truthy å€¼æ—¶è§¦å‘ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>compilation</code> <code>records</code></li> </ul> <h3 id="beforemoduleassets"><code>beforeModuleAssets</code> <a href="#beforemoduleassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨åˆ›å»ºæ¨¡å— asset ä¹‹å‰æ‰§è¡Œã€‚</p> <h3 id="additionalchunkassets"><code>additionalChunkAssets</code> <a href="#additionalchunkassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <blockquote class="warning"> <p><code>additionalChunkAssets</code> å·²å¼ƒç”¨ï¼ˆå¯ä½¿ç”¨ <a href="#processassets">Compilation.hook.processAssets</a> æ¥ä»£æ›¿ï¼Œå¹¶ä¸”å¯ä½¿ç”¨ Compilation.PROCESS_ASSETS_STAGE_* ä½œä¸ºå…¶é€‰é¡¹å‚æ•°ã€‚ï¼‰</p> </blockquote> <p>ä¸ºè¿™äº› chunk åˆ›å»ºå…¶ä»– assetã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code></li> </ul> <h3 id="shouldgeneratechunkassets"><code>shouldGenerateChunkAssets</code> <a href="#shouldgeneratechunkassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>è°ƒç”¨ä»¥ç¡®å®šæ˜¯å¦ç”Ÿæˆ chunk assetã€‚è¿”å›ä»»ä½• <code>!== false</code> å°†å…è®¸ç”Ÿæˆ chunk assetã€‚</p> <h3 id="beforechunkassets"><code>beforeChunkAssets</code> <a href="#beforechunkassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>åœ¨åˆ›å»º chunk asset ä¹‹å‰ã€‚</p> <h3 id="additionalassets"><code>additionalAssets</code> <a href="#additionalassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>ä¸º compilation åˆ›å»ºé¢å¤– assetã€‚ è¿™ä¸ªé’©å­å¯ä»¥ç”¨æ¥ä¸‹è½½å›¾åƒï¼Œä¾‹å¦‚ï¼š</p> <pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>additionalAssets<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">callback</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">download</span><span class="token punctuation">(</span><span class="token string">'https://img.shields.io/npm/v/webpack.svg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span><span class="token string">'webpack-version.svg'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">toAsset</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'[webpack-example-plugin] Unable to download the image'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="optimizechunkassets"><code>optimizeChunkAssets</code> <a href="#optimizechunkassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <blockquote class="warning"> <p><code>optimizeChunkAssets</code> å·²å¼ƒç”¨ã€‚ï¼ˆå¯ä½¿ç”¨ <a href="#processassets">Compilation.hook.processAssets</a> æ¥ä»£æ›¿ï¼Œå¹¶ä¸”å¯ä½¿ç”¨ Compilation.PROCESS_ASSETS_STAGE_* ä½œä¸ºå…¶é€‰é¡¹å‚æ•°ã€‚</p> </blockquote> <p>ä¼˜åŒ–æ‰€æœ‰ chunk assetã€‚asset å­˜å‚¨åœ¨ <code>compilation.assets</code> ä¸­ã€‚ æ¯ä¸ª <code>Chunk</code> éƒ½å…·æœ‰ä¸€ä¸ª <code>files</code> å±æ€§ï¼Œå…¶æŒ‡å‘ç”±ä¸€ä¸ª chunk åˆ›å»ºçš„æ‰€æœ‰æ–‡ä»¶ã€‚ ä»»ä½•é¢å¤– chunk asset éƒ½å­˜å‚¨åœ¨ <code>compilation.additionalChunkAssets</code> ä¸­ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code></li> </ul> <p>Here's an example that simply adds a banner to each chunk.</p> <pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks
  <span class="token punctuation">.</span>optimizeChunkAssets
  <span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunks<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">chunk</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      chunk<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">file</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>file<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcatSource</span><span class="token punctuation">(</span>
          <span class="token string">'\/**Sweet Banner**\/'</span><span class="token punctuation">,</span>
          <span class="token string">'\n'</span><span class="token punctuation">,</span>
          compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>file<span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="afteroptimizechunkassets"><code>afterOptimizeChunkAssets</code> <a href="#afteroptimizechunkassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <blockquote class="warning"> <p><code>afterOptimizeChunkAssets</code> å·²å¼ƒç”¨ã€‚ï¼ˆå¯ä½¿ç”¨ <a href="#processassets">Compilation.hook.processAssets</a> æ¥ä»£æ›¿ï¼Œå¹¶ä¸”å¯ä½¿ç”¨ Compilation.PROCESS_ASSETS_STAGE_* ä½œä¸ºå…¶é€‰é¡¹å‚æ•°ã€‚</p> </blockquote> <p>chunk asset å·²ç»è¢«ä¼˜åŒ–ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunks</code></li> </ul> <p>è¿™é‡Œæ˜¯ä¸€ä¸ªæ¥è‡ª <a href="javascript:if(confirm('https://github.com/boopathi  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/boopathi'" tppabs="https://github.com/boopathi">@boopathi</a> çš„ç¤ºä¾‹æ’ä»¶ï¼Œè¯¦ç»†åœ°è¾“å‡ºæ¯ä¸ª chunk é‡Œæœ‰ä»€ä¹ˆã€‚</p> <pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>afterOptimizeChunkAssets<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">chunks</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">chunk</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token operator">:</span> chunk<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      name<span class="token operator">:</span> chunk<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      includes<span class="token operator">:</span> chunk<span class="token punctuation">.</span><span class="token function">getModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">module</span> <span class="token operator">=></span> module<span class="token punctuation">.</span>request<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="optimizeassets"><code>optimizeAssets</code> <a href="#optimizeassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>ä¼˜åŒ–å­˜å‚¨åœ¨ <code>compilation.assets</code> ä¸­çš„æ‰€æœ‰ assetã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>assets</code></li> </ul> <h3 id="afteroptimizeassets"><code>afterOptimizeAssets</code> <a href="#afteroptimizeassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>asset å·²ç»ä¼˜åŒ–ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>assets</code></li> </ul> <h3 id="processassets"><code>processAssets</code> <a href="#processassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>Asset processing.</p> <ul> <li>Callback Parameters: <code>assets</code></li> </ul> <p>Here's an example:</p> <pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>processAssets<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'MyPlugin'</span><span class="token punctuation">,</span>
    stage<span class="token operator">:</span> Compilation<span class="token punctuation">.</span><span class="token constant">PROCESS_ASSETS_STAGE_ADDITIONS</span><span class="token punctuation">,</span> <span class="token comment">// see below for more stages</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">assets</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// code here</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>In addition to <code>name</code> and <code>stage</code>, you can pass a <code>additionalAssets</code> <Badge text="5.8.0+"/> option which accepts either a value of <code>true</code> or a function with <code>assets</code> as parameter:</p> <ol> <li> <p><code>true</code> - Run callback against assets added later by plugins.</p> <pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>processAssets<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'MyPlugin'</span><span class="token punctuation">,</span>
    stage<span class="token operator">:</span> Compilation<span class="token punctuation">.</span><span class="token constant">PROCESS_ASSETS_STAGE_DEV_TOOLING</span><span class="token punctuation">,</span>
    additionalAssets<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">assets</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// this callback will run against assets added later by plugins.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> </li> <li> <p><code>(assets) => {}</code> - Run this specified callback against assets added later by plugins.</p> <pre><code class="hljs language-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>processAssets<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'MyPlugin'</span><span class="token punctuation">,</span>
    stage<span class="token operator">:</span> Compilation<span class="token punctuation">.</span><span class="token constant">PROCESS_ASSETS_STAGE_DEV_TOOLING</span><span class="token punctuation">,</span>
    <span class="token function-variable function">additionalAssets</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">assets</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// this callback will run against assets added later by plugins.</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">assets</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// code</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> </li> </ol> <p>Here's a list of stages we can use:</p> <ul> <li><code>PROCESS_ASSETS_STAGE_ADDITIONAL</code> - Add additional assets to the compilation.</li> <li><code>PROCESS_ASSETS_STAGE_PRE_PROCESS</code> - Basic preprocessing of the assets.</li> <li><code>PROCESS_ASSETS_STAGE_DERIVED</code> - Derive new assets from the existing assets.</li> <li><code>PROCESS_ASSETS_STAGE_ADDITIONS</code> - Add additional sections to the existing assets e.g. banner or initialization code.</li> <li><code>PROCESS_ASSETS_STAGE_OPTIMIZE</code> - Optimize existing assets in a general way.</li> <li><code>PROCESS_ASSETS_STAGE_OPTIMIZE_COUNT</code> - Optimize the count of existing assets, e.g. by merging them.</li> <li><code>PROCESS_ASSETS_STAGE_OPTIMIZE_COMPATIBILITY</code> - Optimize the compatibility of existing assets, e.g. add polyfills or vendor prefixes.</li> <li><code>PROCESS_ASSETS_STAGE_OPTIMIZE_SIZE</code> - Optimize the size of existing assets, e.g. by minimizing or omitting whitespace.</li> <li><code>PROCESS_ASSETS_STAGE_DEV_TOOLING</code> - Add development tooling to the assets, e.g. by extracting a source map.</li> <li><code>PROCESS_ASSETS_STAGE_OPTIMIZE_INLINE</code> <Badge text="5.8.0+"/> - Optimize the numbers of existing assets, e.g. by inlining assets into other assets.</li> <li><code>PROCESS_ASSETS_STAGE_SUMMARIZE</code> - Summarize the list of existing assets.</li> <li><code>PROCESS_ASSETS_STAGE_OPTIMIZE_HASH</code> - Optimize the hashes of the assets, e.g. by generating real hashes of the asset content.</li> <li><code>PROCESS_ASSETS_STAGE_OPTIMIZE_TRANSFER</code> - Optimize the transfer of existing assets, e.g. by preparing a compressed (gzip) file as separate asset.</li> <li><code>PROCESS_ASSETS_STAGE_ANALYSE</code> - Analyze the existing assets.</li> <li><code>PROCESS_ASSETS_STAGE_REPORT</code> - Creating assets for the reporting purposes.</li> </ul> <h3 id="afterprocessassets"><code>afterProcessAssets</code> <a href="#afterprocessassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>Called after the <a href="#processassets"><code>processAssets</code></a> hook had finished without error.</p> <h3 id="needadditionalseal"><code>needAdditionalSeal</code> <a href="#needadditionalseal" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>è°ƒç”¨æ¥å†³å®š compilation æ˜¯å¦éœ€è¦è§£é™¤ seal ä»¥å¼•å…¥å…¶ä»–æ–‡ä»¶ã€‚</p> <h3 id="afterseal"><code>afterSeal</code> <a href="#afterseal" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>AsyncSeriesHook</code></p> <p>åœ¨ <code>needAdditionalSeal</code> ä¹‹åç«‹å³æ‰§è¡Œã€‚</p> <h3 id="chunkhash"><code>chunkHash</code> <a href="#chunkhash" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>è§¦å‘æ¥ä¸ºæ¯ä¸ª chunk ç”Ÿæˆ hashã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunk</code> <code>chunkHash</code></li> </ul> <h3 id="moduleasset"><code>moduleAsset</code> <a href="#moduleasset" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>ä¸€ä¸ªæ¨¡å—ä¸­çš„ä¸€ä¸ª asset è¢«æ·»åŠ åˆ° compilation æ—¶è°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>module</code> <code>filename</code></li> </ul> <h3 id="chunkasset"><code>chunkAsset</code> <a href="#chunkasset" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>ä¸€ä¸ª chunk ä¸­çš„ä¸€ä¸ª asset è¢«æ·»åŠ åˆ° compilation æ—¶è°ƒç”¨ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>chunk</code> <code>filename</code></li> </ul> <h3 id="assetpath"><code>assetPath</code> <a href="#assetpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncWaterfallHook</code></p> <p>è°ƒç”¨ä»¥å†³å®š asset çš„è·¯å¾„ã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>path</code> <code>options</code></li> </ul> <h3 id="needadditionalpass"><code>needAdditionalPass</code> <a href="#needadditionalpass" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>è°ƒç”¨ä»¥å†³å®š asset åœ¨è¾“å‡ºåæ˜¯å¦éœ€è¦è¿›ä¸€æ­¥å¤„ç†ã€‚</p> <h3 id="childcompiler"><code>childCompiler</code> <a href="#childcompiler" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncHook</code></p> <p>å­ compiler è®¾ç½®ä¹‹åæ‰§è¡Œã€‚</p> <ul> <li>å›è°ƒå‚æ•°ï¼š<code>childCompiler</code> <code>compilerName</code> <code>compilerIndex</code></li> </ul> <h3 id="normalmoduleloader"><code>normalModuleLoader</code> <a href="#normalmoduleloader" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p>ä» webpack v5 å¼€å§‹ï¼Œ<code>normalModuleLoader</code> é’©å­å·²ç»åˆ é™¤ã€‚ç°åœ¨è¦è®¿é—®loader è¯·æ”¹ç”¨ <code>NormalModule.getCompilationHooks(compilation).loader</code>ã€‚</p> <h1 id="JavascriptParser-Hooks">JavascriptParser Hooks<a href="#JavascriptParser-Hooks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p><code>parser</code> å®ä¾‹ï¼Œåœ¨ <code>compiler</code> ä¸­è¢«å‘ç°ï¼Œæ˜¯ç”¨æ¥è§£æç”± webpack å¤„ç†è¿‡çš„æ¯ä¸ªæ¨¡å—ã€‚<code>parser</code> ä¹Ÿæ˜¯æ‰©å±•è‡ª <code>tapable</code> çš„ webpack ç±» å¹¶ä¸”æä¾›å¤šç§ <code>tapable</code> é’©å­ï¼Œ</p> <p>ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œ<code>parser</code> ä½äº <a href="../compiler-hooks/index.htm#normalmodulefactory" tppabs="https://webpack.docschina.org/api/compiler-hooks/#normalmodulefactory">module factories</a> ä¸­ï¼Œå› æ­¤éœ€è¦è°ƒç”¨é¢å¤–é’©å­ æ¥è¿›è¡Œè·å–ï¼š</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>normalModuleFactory<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">factory</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  factory<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>parser<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'javascript/auto'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">parser<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å’Œ <code>compiler</code> ç”¨æ³•ç›¸åŒï¼Œå–å†³äºä¸åŒçš„é’©å­ç±»å‹ï¼Œ ä¹Ÿå¯ä»¥åœ¨æŸäº›é’©å­ä¸Šè®¿é—® <code>tapAsync</code> å’Œ <code>tapPromise</code>ã€‚</p> <h2 id="hooks">é’©å­ <a href="#hooks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œæ˜¯ç”± <code>parser</code> æš´éœ²ï¼Œå¯ä»¥é€šè¿‡ å¦‚ä¸‹æ–¹å¼è®¿é—®ï¼š</p> <h3 id="evaluatetypeof">evaluateTypeof <a href="#evaluatetypeof" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Triggered when evaluating an expression consisting in a <code>typeof</code> of a free variable</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>evaluateTypeof<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'myIdentifier'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">expression</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
  <span class="token keyword">return</span> expressionResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>è¿™ä¼šè§¦å‘ <code>evaluateTypeof</code> é’©å­çš„è°ƒç”¨ï¼š</p> <pre><code class="hljs language-js"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">typeof</span> myIdentifier<span class="token punctuation">;</span></code></pre> <p>This won't trigger:</p> <pre><code class="hljs language-js"><span class="token keyword">const</span> myIdentifier <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">typeof</span> myIdentifier<span class="token punctuation">;</span></code></pre> <h3 id="evaluate">evaluate <a href="#evaluate" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when evaluating an expression.</p> <ul> <li>Hook parameters: <code>expressionType</code></li> <li>Callback parameters: <code>expression</code></li> </ul> <p>For example:</p> <p><strong>index.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p><strong>MyPlugin.js</strong></p> <pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>evaluate<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'NewExpression'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">expression</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
  <span class="token keyword">return</span> expressionResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>Where the expressions types are:</p> <ul> <li><code>'ArrowFunctionExpression'</code></li> <li><code>'AssignmentExpression'</code></li> <li><code>'AwaitExpression'</code></li> <li><code>'BinaryExpression'</code></li> <li><code>'CallExpression'</code></li> <li><code>'ClassExpression'</code></li> <li><code>'ConditionalExpression'</code></li> <li><code>'FunctionExpression'</code></li> <li><code>'Identifier'</code></li> <li><code>'LogicalExpression'</code></li> <li><code>'MemberExpression'</code></li> <li><code>'NewExpression'</code></li> <li><code>'ObjectExpression'</code></li> <li><code>'SequenceExpression'</code></li> <li><code>'SpreadElement'</code></li> <li><code>'TaggedTemplateExpression'</code></li> <li><code>'TemplateLiteral'</code></li> <li><code>'ThisExpression'</code></li> <li><code>'UnaryExpression'</code></li> <li><code>'UpdateExpression'</code></li> </ul> <h3 id="evaluateidentifier">evaluateIdentifier <a href="#evaluateidentifier" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when evaluating an identifier that is a free variable.</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <h3 id="evaluatedefinedidentifier">evaluateDefinedIdentifier <a href="#evaluatedefinedidentifier" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when evaluating an identifier that is a defined variable.</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <h3 id="evaluatecallexpressionmember">evaluateCallExpressionMember <a href="#evaluatecallexpressionmember" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when evaluating a call to a member function of a successfully evaluated expression.</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code> <code>param</code></li> </ul> <p>This expression will trigger the hook:</p> <p><strong>index.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">const</span> a <span class="token operator">=</span> expression<span class="token punctuation">.</span><span class="token function">myFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p><strong>MyPlugin.js</strong></p> <pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>evaluateCallExpressionMember<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'myFunc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">expression<span class="token punctuation">,</span> param</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
  <span class="token keyword">return</span> expressionResult<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="statement">statement <a href="#statement" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>General purpose hook that is called for every parsed statement in a code fragment.</p> <ul> <li>Callback Parameters: <code>statement</code></li> </ul> <pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>statement<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">statement</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>Where the <code>statement.type</code> could be:</p> <ul> <li><code>'BlockStatement'</code></li> <li><code>'VariableDeclaration'</code></li> <li><code>'FunctionDeclaration'</code></li> <li><code>'ReturnStatement'</code></li> <li><code>'ClassDeclaration'</code></li> <li><code>'ExpressionStatement'</code></li> <li><code>'ImportDeclaration'</code></li> <li><code>'ExportAllDeclaration'</code></li> <li><code>'ExportDefaultDeclaration'</code></li> <li><code>'ExportNamedDeclaration'</code></li> <li><code>'IfStatement'</code></li> <li><code>'SwitchStatement'</code></li> <li><code>'ForInStatement'</code></li> <li><code>'ForOfStatement'</code></li> <li><code>'ForStatement'</code></li> <li><code>'WhileStatement'</code></li> <li><code>'DoWhileStatement'</code></li> <li><code>'ThrowStatement'</code></li> <li><code>'TryStatement'</code></li> <li><code>'LabeledStatement'</code></li> <li><code>'WithStatement'</code></li> </ul> <h3 id="statementif">statementIf <a href="#statementif" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing an if statement. Same as the <code>statement</code> hook, but triggered only when <code>statement.type == 'IfStatement'</code>.</p> <ul> <li>Callback Parameters: <code>statement</code></li> </ul> <h3 id="label">label <a href="#label" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing statements with a <a href="javascript:if(confirm('https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/label  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/label'" tppabs="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/label">label</a>. Those statements have <code>statement.type === 'LabeledStatement'</code>.</p> <ul> <li>Hook Parameters: <code>labelName</code></li> <li>Callback Parameters: <code>statement</code></li> </ul> <h3 id="import">import <a href="#import" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called for every import statement in a code fragment. The <code>source</code> parameter contains the name of the imported file.</p> <ul> <li>Callback Parameters: <code>statement</code> <code>source</code></li> </ul> <p>The following import statement will trigger the hook once:</p> <p><strong>index.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span></code></pre> <p><strong>MyPlugin.js</strong></p> <pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>import<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">statement<span class="token punctuation">,</span> source</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// source == 'lodash'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="importspecifier">importSpecifier <a href="#importspecifier" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called for every specifier of every <code>import</code> statement.</p> <ul> <li>Callback Parameters: <code>statement</code> <code>source</code> <code>exportName</code> <code>identifierName</code></li> </ul> <p>The following import statement will trigger the hook twice:</p> <p><strong>index.js</strong></p> <pre><code class="hljs language-js"><span class="token keyword">import</span> _<span class="token punctuation">,</span> <span class="token punctuation">{</span> has <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span></code></pre> <p><strong>MyPlugin.js</strong></p> <pre><code class="hljs language-js">parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>importSpecifier<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">statement<span class="token punctuation">,</span> source<span class="token punctuation">,</span> exportName<span class="token punctuation">,</span> identifierName</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">/* First call
    source == 'lodash'
    exportName == 'default'
    identifierName == '_'
  */</span>
  <span class="token comment">/* Second call
    source == 'lodash'
    exportName == 'has'
    identifierName == 'has'
  */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="export">export <a href="#export" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called for every <code>export</code> statement in a code fragment.</p> <ul> <li>Callback Parameters: <code>statement</code></li> </ul> <h3 id="exportimport">exportImport <a href="#exportimport" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called for every <code>export</code>-import statement eg: <code>export * from 'otherModule';</code>.</p> <ul> <li>Callback Parameters: <code>statement</code> <code>source</code></li> </ul> <h3 id="exportdeclaration">exportDeclaration <a href="#exportdeclaration" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called for every <code>export</code> statement exporting a declaration.</p> <ul> <li>Callback Parameters: <code>statement</code> <code>declaration</code></li> </ul> <p>Those exports will trigger this hook:</p> <pre><code class="hljs language-js"><span class="token keyword">export</span> <span class="token keyword">const</span> myVar <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span> <span class="token comment">// also var, let</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">FunctionName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ClassName</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre> <h3 id="exportexpression">exportExpression <a href="#exportexpression" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called for every <code>export</code> statement exporting an expression e.g.<code>export default expression;</code>.</p> <ul> <li>Callback Parameters: <code>statement</code> <code>declaration</code></li> </ul> <h3 id="exportspecifier">exportSpecifier <a href="#exportspecifier" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called for every specifier of every <code>export</code> statement.</p> <ul> <li>Callback Parameters: <code>statement</code> <code>identifierName</code> <code>exportName</code> <code>index</code></li> </ul> <h3 id="exportimportspecifier">exportImportSpecifier <a href="#exportimportspecifier" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called for every specifier of every <code>export</code>-import statement.</p> <ul> <li>Callback Parameters: <code>statement</code> <code>source</code> <code>identifierName</code> <code>exportName</code> <code>index</code></li> </ul> <h3 id="vardeclaration">varDeclaration <a href="#vardeclaration" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing a variable declaration.</p> <ul> <li>Callback Parameters: <code>declaration</code></li> </ul> <h3 id="vardeclarationlet">varDeclarationLet <a href="#vardeclarationlet" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing a variable declaration defined using <code>let</code></p> <ul> <li>Callback Parameters: <code>declaration</code></li> </ul> <h3 id="vardeclarationconst">varDeclarationConst <a href="#vardeclarationconst" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing a variable declaration defined using <code>const</code></p> <ul> <li>Callback Parameters: <code>declaration</code></li> </ul> <h3 id="vardeclarationvar">varDeclarationVar <a href="#vardeclarationvar" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing a variable declaration defined using <code>var</code></p> <ul> <li>Callback Parameters: <code>declaration</code></li> </ul> <h3 id="canrename">canRename <a href="#canrename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Triggered before renaming an identifier to determine if the renaming is allowed. This is usually used together with the <code>rename</code> hook.</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <pre><code class="hljs language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>canRename<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">expression</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// returning true allows renaming</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="rename">rename <a href="#rename" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Triggered when renaming to get the new identifier. This hook will be called only if <code>canRename</code> returns <code>true</code>.</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <pre><code class="hljs language-js"><span class="token keyword">var</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>rename<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">expression</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="assigned">assigned <a href="#assigned" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing an <code>AssignmentExpression</code> before parsing the assigned expression.</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <pre><code class="hljs language-js">a <span class="token operator">+=</span> b<span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>assigned<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">expression</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// this is called before parsing b</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="assign">assign <a href="#assign" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing an <code>AssignmentExpression</code> before parsing the assign expression.</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <pre><code class="hljs language-js">a <span class="token operator">+=</span> b<span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>assigned<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">expression</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// this is called before parsing a</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="typeof">typeof <a href="#typeof" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Triggered when parsing the <code>typeof</code> of an identifier</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <h3 id="call">call <a href="#call" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing a function call.</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <pre><code class="hljs language-js"><span class="token function">eval</span><span class="token punctuation">(</span><span class="token comment">/* something */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>call<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'eval'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">expression</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="callanymember">callAnyMember <a href="#callanymember" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Triggered when parsing a call to a member function of an object.</p> <ul> <li>Hook Parameters: <code>objectIdentifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <pre><code class="hljs language-js">myObj<span class="token punctuation">.</span><span class="token function">anyFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>callAnyMember<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'myObj'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">expression</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="new">new <a href="#new" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Invoked when parsing a <code>new</code> expression.</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <pre><code class="hljs language-js"><span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>new<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'MyClass'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">expression</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="expression">expression <a href="#expression" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing an expression.</p> <ul> <li>Hook Parameters: <code>identifier</code></li> <li>Callback Parameters: <code>expression</code></li> </ul> <pre><code class="hljs language-js"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>expression<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'this'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">expression</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <h3 id="expressionconditionaloperator">expressionConditionalOperator <a href="#expressionconditionaloperator" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Called when parsing a <code>ConditionalExpression</code> e.g. <code>condition ? a : b</code></p> <ul> <li>Callback Parameters: <code>expression</code></li> </ul> <h3 id="program">program <a href="#program" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>SyncBailHook</code></p> <p>Get access to the abstract syntax tree (AST) of a code fragment</p> <ul> <li>Parameters: <code>ast</code> <code>comments</code></li> </ul> <h1 id="Plugin-API">Plugin API<a href="#Plugin-API" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>æ’ä»¶æ˜¯ webpack ç”Ÿæ€çš„å…³é”®éƒ¨åˆ†ï¼Œ å®ƒä¸ºç¤¾åŒºç”¨æˆ·æä¾›äº†ä¸€ç§å¼ºæœ‰åŠ›çš„æ–¹å¼æ¥ç›´æ¥è§¦åŠ webpack çš„ç¼–è¯‘è¿‡ç¨‹(compilation process)ã€‚ æ’ä»¶èƒ½å¤Ÿ <a href="../compiler-hooks/index.htm#hooks" tppabs="https://webpack.docschina.org/api/compiler-hooks/#hooks">hook</a> åˆ°æ¯ä¸€ä¸ªç¼–è¯‘(compilation)ä¸­å‘å‡ºçš„å…³é”®äº‹ä»¶ä¸­ã€‚ åœ¨ç¼–è¯‘çš„æ¯ä¸ªé˜¶æ®µä¸­ï¼Œæ’ä»¶éƒ½æ‹¥æœ‰å¯¹ <code>compiler</code> å¯¹è±¡çš„å®Œå…¨è®¿é—®èƒ½åŠ›ï¼Œ å¹¶ä¸”åœ¨åˆé€‚çš„æ—¶æœºï¼Œè¿˜å¯ä»¥è®¿é—®å½“å‰çš„ <code>compilation</code> å¯¹è±¡ã€‚</p> <blockquote class="tip"> <p>å…³äºç¼–å†™æ’ä»¶çš„é«˜çº§ä»‹ç»ï¼Œè¯·ç§»æ­¥ï¼š <a href="../../contribute/writing-a-plugin.htm" tppabs="https://webpack.docschina.org/contribute/writing-a-plugin">è‡ªå®šä¹‰æ’ä»¶</a>ã€‚</p> </blockquote> <p>è®©æˆ‘ä»¬é¦–å…ˆä» tapable å·¥å…·å¼€å§‹ï¼Œ å®ƒä¸º webpack æ’ä»¶æ¥å£æä¾›äº†æ ¸å¿ƒèƒ½åŠ›çš„ã€‚</p> <h2 id="tapable">Tapable <a href="#tapable" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>è¿™ä¸ªå°å‹åº“æ˜¯ webpack çš„ä¸€ä¸ªæ ¸å¿ƒå·¥å…·ï¼Œä½†ä¹Ÿå¯ç”¨äºå…¶ä»–åœ°æ–¹ï¼Œ ä»¥æä¾›ç±»ä¼¼çš„æ’ä»¶æ¥å£ã€‚ åœ¨ webpack ä¸­çš„è®¸å¤šå¯¹è±¡éƒ½æ‰©å±•è‡ª <code>Tapable</code> ç±»ã€‚ å®ƒå¯¹å¤–æš´éœ²äº† <code>tap</code>ï¼Œ<code>tapAsync</code> å’Œ <code>tapPromise</code> ç­‰æ–¹æ³•ï¼Œ æ’ä»¶å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•å‘ webpack ä¸­æ³¨å…¥è‡ªå®šä¹‰æ„å»ºçš„æ­¥éª¤ï¼Œè¿™äº›æ­¥éª¤å°†åœ¨æ„å»ºè¿‡ç¨‹ä¸­è§¦å‘ã€‚</p> <p>è¯·æŸ¥é˜…<a href="javascript:if(confirm('https://github.com/webpack/tapable  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/tapable'" tppabs="https://github.com/webpack/tapable">æ–‡æ¡£</a>äº†è§£æ›´å¤šçŸ¥è¯†ã€‚ ç†è§£ä¸Šé¢çš„çš„ä¸‰ç§ <code>tap</code> æ–¹æ³•ï¼Œ ä»¥åŠæä¾›è¿™äº›æ–¹æ³•çš„é’©å­(hooks)å¯¹äºç¼–å†™æ’ä»¶æ¥è¯´æ˜¯è‡³å…³é‡è¦çš„ã€‚ é‚£äº›æ‰©å±•è‡ª <code>Tapable</code> çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼šcompilerï¼‰ï¼Œ ä»¥åŠå…¶æä¾›çš„é’©å­(hooks)å’Œæ¯ä¸ªé’©å­çš„ç±»å‹ï¼ˆä¾‹å¦‚ï¼š<code>åŒæ­¥é’©å­(SyncHook)</code>ï¼‰å€¼å¾—å…³æ³¨ã€‚</p> <h2 id="plugin-types">æ’ä»¶ç±»å‹ <a href="#plugin-types" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>æ ¹æ®ä½¿ç”¨ä¸åŒçš„é’©å­(hooks)å’Œ <code>tap</code> æ–¹æ³•ï¼Œ æ’ä»¶å¯ä»¥ä»¥å¤šç§ä¸åŒçš„æ–¹å¼è¿è¡Œã€‚ è¿™ä¸ªå·¥ä½œæ–¹å¼ä¸ Tapable æä¾›çš„<a href="javascript:if(confirm('https://github.com/webpack/tapable  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/tapable#tapable'" tppabs="https://github.com/webpack/tapable#tapable">é’©å­(hooks)</a>å¯†åˆ‡ç›¸å…³ã€‚ <a href="../compiler-hooks/index.htm#hooks" tppabs="https://webpack.docschina.org/api/compiler-hooks/#hooks">compiler hooks</a> åˆ†åˆ«è®°å½•äº† Tapable å†…åœ¨çš„é’©å­ï¼Œ å¹¶æŒ‡å‡ºå“ªäº› tap æ–¹æ³•å¯ç”¨ã€‚</p> <p>æ‰€ä»¥ï¼Œä¾èµ–äºä½¿ç”¨çš„ <code>tap</code> æ–¹æ³•çš„ä¸åŒï¼Œ æ’ä»¶å¯èƒ½ä¼šä»¥ä¸åŒçš„æ–¹å¼è¿è¡Œã€‚ ä¾‹å¦‚ï¼šå½“ä½ é’©å…¥åˆ° <code>ç¼–è¯‘(compile)</code> é˜¶æ®µæ—¶ï¼Œåªæœ‰åŒæ­¥çš„ <code>tap</code> æ–¹æ³•å¯ä»¥ä½¿ç”¨ã€‚</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>compile<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">params</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä»¥åŒæ­¥æ–¹å¼è§¦åŠ compile é’©å­ã€‚'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>ç„¶è€Œï¼Œå¯¹äºå¯ä»¥ä½¿ç”¨ <code>AsyncHook</code> çš„ <code>run</code> é˜¶æ®µï¼Œ åˆ™éœ€ä½¿ç”¨ <code>tapAsync</code> æˆ– <code>tapPromise</code>ï¼ˆä»¥åŠ <code>tap</code>ï¼‰æ–¹æ³•ã€‚</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> target<span class="token punctuation">,</span> routesList<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä»¥å¼‚æ­¥æ–¹å¼è§¦åŠ run é’©å­ã€‚'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> target<span class="token punctuation">,</span> routesList</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä»¥å…·æœ‰å»¶è¿Ÿçš„å¼‚æ­¥æ–¹å¼è§¦åŠ run é’©å­ã€‚'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> target<span class="token punctuation">,</span> routesList</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä»¥å…·æœ‰å»¶è¿Ÿçš„å¼‚æ­¥æ–¹å¼è§¦åŠ run é’©å­ã€‚'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>è¿™äº›éœ€æ±‚(story)çš„å«ä¹‰åœ¨äºï¼Œ æˆ‘ä»¬å¯ä»¥æœ‰å¤šç§æ–¹å¼ hook åˆ° compiler ä¸­ï¼Œå¯ä»¥è®©å„ç§æ’ä»¶éƒ½ä»¥åˆé€‚çš„æ–¹å¼å»è¿è¡Œã€‚</p> <h2 id="custom-hooks">è‡ªå®šä¹‰é’©å­ <a href="#custom-hooks" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>ä¸ºäº†ä¾¿äºå…¶ä»–æ’ä»¶çš„ç¼–è¯‘è¿‡ç¨‹ä¸­å¯ä»¥ <code>tap</code> åˆ°ï¼Œåˆ™éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ hookï¼Œ æˆ‘ä»¬åªéœ€è¦ç®€å•çš„ä» <code>tapable</code> ä¸­ <code>require</code> æ‰€éœ€çš„ hook ç±»ï¼Œå¹¶åˆ›å»ºï¼š</p> <pre><code class="hljs language-js"><span class="token keyword">const</span> SyncHook <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tapable'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SyncHook<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'å·²å­˜åœ¨è¯¥é’©å­'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SyncHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åœ¨ä½ æƒ³è¦è§¦å‘é’©å­çš„ä½ç½®/æ—¶æœºä¸‹è°ƒç”¨â€¦â€¦</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">myCustomHook</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å†æ¬¡å£°æ˜ï¼Œ æŸ¥çœ‹ <code>tapable</code> <a href="javascript:if(confirm('https://github.com/webpack/tapable  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/tapable'" tppabs="https://github.com/webpack/tapable">æ–‡æ¡£</a> æ¥äº†è§£æ›´å¤šä¸åŒçš„é’©å­ç±»(hook class)ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p> <h2 id="reporting-progress">è¿›åº¦æŠ¥å‘Š <a href="#reporting-progress" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>æ’ä»¶èƒ½å¤Ÿé€šè¿‡ <a href="../../plugins/progress-plugin/index.htm" tppabs="https://webpack.docschina.org/plugins/progress-plugin/"><code>ProgressPlugin</code></a> è¿™ä¸ªåœ¨é»˜è®¤æƒ…å†µä¸‹å°†ä¿¡æ¯æ‰“å°åˆ°æ ‡å‡†é”™è¯¯è¾“å‡º(stderr)çš„æ’ä»¶æ¥è¿›è¡Œè¿›åº¦æŠ¥å‘Šã€‚å¦‚æœæƒ³è¦ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œåªéœ€è¦åœ¨ä½¿ç”¨ <a href="../cli/index.htm" tppabs="https://webpack.docschina.org/api/cli/">webpack CLI</a> çš„æ—¶å€™ä¼ å…¥ <code>--progress</code> å‚æ•°ã€‚</p> <p>å¦‚æœæƒ³è¦è‡ªå®šä¹‰æ‰“å°è¾“å‡ºï¼Œåªéœ€è¦ä¼ é€’ä¸åŒçš„å‚æ•°åˆ° <a href="../../plugins/progress-plugin/index.htm" tppabs="https://webpack.docschina.org/plugins/progress-plugin/"><code>ProgressPlugin</code></a> çš„ <code>reportProgress</code> æ–¹æ³•ã€‚</p> <p>å¦‚æœæƒ³è¦æŠ¥å‘Šè¿›åº¦ï¼Œæ’ä»¶å¿…é¡»åœ¨ <code>tap</code> åˆ° hook çš„æ—¶å€™ä½¿ç”¨ <code>context: true</code> é€‰é¡¹ã€‚</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'MyPlugin'</span><span class="token punctuation">,</span>
  context<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> compiler<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reportProgress <span class="token operator">=</span> context <span class="token operator">&#x26;&#x26;</span> context<span class="token punctuation">.</span>reportProgress<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>reportProgress<span class="token punctuation">)</span> <span class="token function">reportProgress</span><span class="token punctuation">(</span><span class="token number">0.95</span><span class="token punctuation">,</span> <span class="token string">'Starting work'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reportProgress<span class="token punctuation">)</span> <span class="token function">reportProgress</span><span class="token punctuation">(</span><span class="token number">0.95</span><span class="token punctuation">,</span> <span class="token string">'Done work'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p><code>reportProgress</code> æ–¹æ³•åœ¨è¢«è°ƒç”¨çš„æ—¶å€™ä¼šä¼ å…¥ä»¥ä¸‹çš„å‚æ•°ï¼š</p> <pre><code class="hljs language-js"><span class="token function">reportProgress</span><span class="token punctuation">(</span>percentage<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <ul> <li><code>percentage</code>ï¼šæ­¤å‚æ•°æœªä½¿ç”¨ã€‚ä½œä¸ºä»£æ›¿ï¼Œ<a href="../../plugins/progress-plugin/index.htm" tppabs="https://webpack.docschina.org/plugins/progress-plugin/"><code>ProgressPlugin</code></a> æ’ä»¶ä¼šåŸºäºå½“å‰çš„é’©å­(hook)è®¡ç®—è¿›åº¦ã€‚</li> <li><code>...args</code>ï¼šä»»æ„æ•°é‡çš„å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²ä¼šä¼ é€’ç»™ <code>ProgressPlugin</code> æ’ä»¶å¹¶æŠ¥å‘Šç»™ç”¨æˆ·ã€‚</li> </ul> <p>æ³¨æ„ï¼šåªæœ‰ compiler å’Œ compilation é’©å­çš„å­é›†æ‰æ”¯æŒ <code>reportProgress</code> æ–¹æ³•ã€‚è¯·æŸ¥çœ‹ <a href="../../plugins/progress-plugin/index.htm#supported-hooks" tppabs="https://webpack.docschina.org/plugins/progress-plugin/#supported-hooks"><code>ProgressPlugin</code></a> äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p> <h2 id="logging">æ—¥å¿— <a href="#logging" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>æ—¥å¿—çš„ API åœ¨ webpack 4.37 ç‰ˆæœ¬åæä¾›æ”¯æŒã€‚å½“ <code>logging</code> åœ¨ <a href="../../configuration/stats/index.htm#statslogging" tppabs="https://webpack.docschina.org/configuration/stats/#statslogging"><code>ç»Ÿè®¡é…ç½®(stats configuration)</code></a>ä¸­å¯ç”¨å’Œ(æˆ–)å½“ <a href="../../configuration/other-options/index.htm#infrastructurelogging" tppabs="https://webpack.docschina.org/configuration/other-options/#infrastructurelogging"><code>infrastructure logging</code></a> å¯ç”¨çš„æ—¶å€™ï¼Œæ’ä»¶ä¼šé€šè¿‡å„è‡ªçš„è®°å½•æ ¼å¼(statsï¼Œinfrastructure)æ‰“å°ä¿¡æ¯ã€‚</p> <ul> <li>æ’ä»¶å¯ä»¥ä½¿ç”¨ <code>compilation.getLogger('PluginName')</code> æ¥åšè®°å½•ã€‚è¿™ç§å½¢å¼çš„è®°å½•ä¿å­˜åœ¨ç»Ÿè®¡æ•°æ®(Stats)ä¸­å¹¶åšç›¸åº”çš„æ ¼å¼åŒ–ã€‚å®ƒèƒ½å¤Ÿè¢«ç”¨æˆ·è¿‡æ»¤å’Œå¯¼å‡ºã€‚</li> <li>æ’ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>compilation.getInfrastructureLogger('PluginName')</code> æ¥åšè®°å½•ã€‚ä½¿ç”¨ <code>infrastructure</code> çš„å½¢å¼å¹¶ä¸ä¼šè¢«ä¿å­˜åœ¨ç»Ÿè®¡æ•°æ®(Stats)ä¸­ï¼Œå› æ­¤ä¹Ÿä¸ä¼šè¢«æ ¼å¼åŒ–ã€‚å®ƒé€šå¸¸ç›´æ¥å°†è®°å½•è½½å…¥åˆ° console/dashboard/GUI ä¸­ã€‚å®ƒèƒ½å¤Ÿè¢«ç”¨æˆ·è¿‡æ»¤ã€‚</li> <li>æ’ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„é™çº§é€»è¾‘ <code>compilation.getLogger ? compilation.getLogger('PluginName') : console</code> æ¥æ£€æµ‹æ˜¯å¦æ”¯æŒè®°å½•ï¼Œä»¥æ­¤æ¥åœ¨ä¸æ”¯æŒ <code>compilation.getLogger</code> æ–¹æ³•çš„æ—§ç‰ˆæœ¬ webpack ä¸­æä¾›é™çº§æ–¹æ³•ã€‚</li> </ul> <h2 id="next-steps">ä¸‹ä¸€æ­¥ <a href="#next-steps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>æŸ¥çœ‹ <a href="../compiler-hooks/index.htm" tppabs="https://webpack.docschina.org/api/compiler-hooks/">compiler hooks</a> éƒ¨åˆ†ï¼Œ äº†è§£æ‰€æœ‰å¯ç”¨çš„ <code>compiler</code> é’©å­ä»¥åŠå®ƒä»¬æä¾›çš„å‚æ•°çš„è¯¦ç»†åˆ—è¡¨ã€‚</p> <h1 id="è§£æå™¨ï¼ˆResolversï¼‰">è§£æå™¨ï¼ˆResolversï¼‰<a href="#%E8%A7%A3%E6%9E%90%E5%99%A8%EF%BC%88Resolvers%EF%BC%89" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>è§£æå™¨æ˜¯ä½¿ç”¨ <code>enhanced-resolve</code> åº“åˆ›å»ºçš„ã€‚<code>Resolver</code> ç±» æ‹“å±•äº† <code>tapable</code> ç±»ï¼Œå¹¶ä½¿ç”¨ <code>tapable</code> æ¥æä¾›äº†ä¸€äº›é’©å­ã€‚ <code>enhanced-resolve</code> å¯ä»¥ç›´æ¥ç”¨äºåˆ›å»ºæ–°çš„è§£æå™¨ï¼Œ ä½†æ˜¯ï¼Œä»»ä½• <a href="../node/index.htm#compiler-instance" tppabs="https://webpack.docschina.org/api/node/#compiler-instance"><code>compiler</code> å®ä¾‹</a> éƒ½æœ‰ä¸€äº›è§£æå™¨å®ä¾‹ï¼Œå¯ä»¥ è¢« <code>tap</code> è¿›å»ã€‚</p> <p>åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»è¯»è¿‡ <a href="javascript:if(confirm('https://github.com/webpack/enhanced-resolve  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/enhanced-resolve'" tppabs="https://github.com/webpack/enhanced-resolve"><code>enhanced-resolve</code></a> å’Œ <a href="../plugins/index.htm#tapable" tppabs="https://webpack.docschina.org/api/plugins/#tapable"><code>tapable</code></a> æ–‡æ¡£ã€‚</p> <h2 id="types">ç±»å‹ <a href="#types" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>åœ¨ <code>compiler</code> ç±»ä¸­ï¼Œæä¾›äº†ä¸‰ç§ç±»å‹çš„å†…ç½®è§£æå™¨ï¼š</p> <ul> <li><code>normal</code>: é€šè¿‡ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„è§£ææ¨¡å—ã€‚</li> <li><code>context</code>: åœ¨ç»™å®šçš„ä¸Šä¸‹æ–‡ä¸­è§£ææ¨¡å—ã€‚</li> <li><code>loader</code>: è§£æ webpack <a href="../../loaders.htm" tppabs="https://webpack.docschina.org/loaders">loader</a>ã€‚</li> </ul> <p>æ ¹æ®éœ€è¦ï¼Œä»»ä¸€ä¸ªè¢«ä½¿ç”¨åœ¨ <code>compiler</code> ä¸­çš„å†…ç½®è§£æå™¨ï¼Œ å¯ä»¥é€šè¿‡æ’ä»¶è¿›è¡Œå®šåˆ¶ï¼š</p> <pre><code class="hljs language-js">compiler<span class="token punctuation">.</span>resolverFactory<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>resolver<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'[type]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token parameter">resolver</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// you can tap into resolver.hooks now</span>
  resolver<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>result<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre> <p>å…¶ä¸­ï¼Œ<code>[type]</code> æ˜¯ä¸Šè¿°ä¸‰ä¸ªè§£æå™¨ä¹‹ä¸€ã€‚</p> <p>è¯·å‚é˜… <a href="javascript:if(confirm('https://github.com/webpack/enhanced-resolve  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/enhanced-resolve'" tppabs="https://github.com/webpack/enhanced-resolve"><code>enhanced-resolve</code> documentation</a> ä»¥è·å¾—é’©å­çš„å®Œæ•´åˆ—è¡¨ä»¥åŠå®ƒä»¬çš„ä»‹ç»ã€‚</p> <h2 id="configuration-options">é…ç½®é€‰é¡¹ <a href="#configuration-options" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p>ä¸Šè¿°è§£æå™¨ä¹Ÿå¯ä»¥ åˆ©ç”¨ <a href="../../configuration/resolve/index.htm" tppabs="https://webpack.docschina.org/configuration/resolve/"><code>resolve</code></a> or <a href="../../configuration/resolve/index.htm#resolveloader" tppabs="https://webpack.docschina.org/configuration/resolve/#resolveloader"><code>resolveLoader</code></a> é€‰é¡¹ï¼Œé€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œå®šåˆ¶ã€‚è¿™äº›é€‰é¡¹å…è®¸ ç”¨æˆ·å¯ä»¥é€šè¿‡å¤šç§é€‰é¡¹æ¥æ›´æ”¹è§£æè¡Œä¸ºï¼ŒåŒ…æ‹¬ é€šè¿‡è§£æ <code>plugins</code>ã€‚</p> <p>è§£æå™¨æ’ä»¶ï¼Œä¾‹å¦‚ï¼š<a href="javascript:if(confirm('https://github.com/shaketbaby/directory-named-webpack-plugin  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/shaketbaby/directory-named-webpack-plugin'" tppabs="https://github.com/shaketbaby/directory-named-webpack-plugin"><code>DirectoryNamedPlugin</code></a>ï¼Œå¯ä»¥ç›´æ¥å¼•å…¥ åœ¨ <code>resolve.plugins</code>ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨ <a href="../../configuration/plugins/index.htm#plugins" tppabs="https://webpack.docschina.org/configuration/plugins/#plugins"><code>plugins</code> configuration option</a> ä¸­ä½¿ç”¨ã€‚</p> <blockquote class="tip"> <p>è¯·æ³¨æ„ï¼Œ<code>resolve</code> é…ç½®ä¼šå½±å“ <code>normal</code> è§£æå™¨å’Œ <code>context</code> è§£æå™¨ï¼Œè€Œâ€œ <code>resolveLoader</code> ç”¨äºä¿®æ”¹ <code>loader</code> è§£æå™¨ã€‚</p> </blockquote> <h1 id="Compilation-Object">Compilation Object<a href="#Compilation-Object" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h1> <p>Compilation å¯¹è±¡æœ‰å¾ˆå¤šå¯ç”¨çš„æ–¹æ³•å’Œé’©å­ã€‚åœ¨æ­¤é¡µé¢ï¼Œæˆ‘ä»¬å°†ä¼šåˆ—ä¸¾å‡ºè¿™äº›å¯ç”¨çš„æ–¹æ³•å’Œå±æ€§ã€‚</p> <h2 id="compilation-object-methods">compilation å¯¹è±¡æ–¹æ³• <a href="#compilation-object-methods" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <h3 id="getstats">getStats <a href="#getstats" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function</code></p> <p>è¿”å›å½“å‰ç¼–è¯‘çš„çŠ¶æ€å¯¹è±¡ã€‚</p> <h3 id="addmodule">addModule <a href="#addmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module, cacheGroup)</code></p> <p>å‘å½“å‰ç¼–è¯‘æ·»åŠ ä¸€ä¸ªæ¨¡å—ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦æ·»åŠ çš„æ¨¡å—</li> <li><code>cacheGroup</code> - æ¨¡å—çš„ <code>cacheGroup</code></li> </ul> <h3 id="getmodule">getModule <a href="#getmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module)</code></p> <p>é€šè¿‡ç¼–è¯‘çš„æ ‡è¯†ç¬¦è·å–å…¶æ¨¡å—ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦è·å–çš„æ¨¡å—ã€‚æ ‡è¯†ç¬¦æ˜¯é€šè¿‡ç¼–è¯‘ä½¿ç”¨ <code>module.identifier()</code> æ–¹æ³•ä»æ¨¡å—ä¸­æå–çš„ã€‚</li> </ul> <h3 id="findmodule">findModule <a href="#findmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module)</code></p> <p>å°è¯•é€šè¿‡å…¶æ ‡è¯†ç¬¦æœç´¢æ¨¡å—ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦æœç´¢çš„æ¨¡å—ã€‚æ ‡è¯†ç¬¦æ˜¯é€šè¿‡ç¼–è¯‘ä½¿ç”¨ <code>module.identifier()</code> æ–¹æ³•ä»æ¨¡å—ä¸­æå–çš„ã€‚</li> </ul> <h3 id="waitforbuildingfinished">waitForBuildingFinished <a href="#waitforbuildingfinished" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module, callback)</code></p> <p>åœ¨æ„å»ºç»™å®šæ¨¡å—æ—¶è¿è¡Œç»™å®šçš„ <code>callback</code> å‡½æ•°ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - æœ‰é—®é¢˜çš„æ¨¡å—ã€‚</li> <li><code>callback</code> - è¦è°ƒç”¨çš„å‡½æ•°ã€‚</li> </ul> <h3 id="buildmodule">buildModule <a href="#buildmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module, optional, origin, dependencies)</code></p> <p>æ„å»ºç»™å®šçš„æ¨¡å—ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦æ„å»ºçš„æ¨¡å—ã€‚</li> <li><code>optional</code> - å¯é€‰æ ‡å¿—ã€‚</li> <li><code>origin</code> - è¯·æ±‚æ­¤æ¨¡å—æ„å»ºçš„åŸå§‹æ¨¡å—ã€‚</li> <li><code>dependencies</code> - è¦æ„å»ºæ¨¡å—çš„å¯é€‰ä¾èµ–ã€‚</li> </ul> <h3 id="processmoduledependencies">processModuleDependencies <a href="#processmoduledependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module, callback)</code></p> <p>å¤„ç†ç»™å®šæ¨¡å—ä¾èµ–ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦è¢«å¤„ç†ä¾èµ–çš„æ¨¡å—ã€‚</li> <li><code>callback</code> - æ¨¡å—ä¾èµ–å¤„ç†å®Œæˆæ—¶å›è°ƒçš„å‡½æ•°ã€‚</li> </ul> <h3 id="addmoduledependencies">addModuleDependencies <a href="#addmoduledependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module, dependencies, bail, cacheGroup, recursive, callback)</code></p> <p>å‘æ¨¡å—æ·»åŠ ä¾èµ–ã€‚å¤„ç†ä¾èµ–ä¹‹åè¢« <code>processModuleDependencies</code> è‡ªåŠ¨è°ƒç”¨ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦æ·»åŠ ä¾èµ–çš„æ¨¡å—ã€‚</li> <li><code>dependencies</code> - è¦éå†æ·»åŠ åˆ°æ¨¡å—çš„ä¸€ç»„å·²æ’åºä¾èµ–ã€‚</li> <li><code>bail</code> - å‘ç”Ÿé”™è¯¯æ—¶æ˜¯å¦ä¸­æ–­è¿›ç¨‹å¹¶æŠ›å‡º errorã€‚</li> <li><code>cacheGroup</code> - æ¨¡å—çš„ <code>cacheGroup</code>ã€‚</li> <li><code>recursive</code> - æ˜¯å¦è¦é€’å½’éå†ã€‚</li> <li><code>callback</code> - æ·»åŠ æ¨¡å—ä¾èµ–ä¹‹åå›è°ƒçš„å‡½æ•°ã€‚</li> </ul> <h3 id="addentry">addEntry <a href="#addentry" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (context, entry, name, callback)</code></p> <p>ä¸ºç¼–è¯‘æ·»åŠ å…¥å£ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>context</code> - å…¥å£çš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚</li> <li><code>entry</code> - å…¥å£ä¾èµ–ã€‚</li> <li><code>name</code> - å…¥å£åç§°ã€‚</li> <li><code>callback</code> - æ·»åŠ å…¥å£å®Œæˆä¹‹åå›è°ƒçš„å‡½æ•°ã€‚</li> </ul> <h3 id="prefetch">prefetch <a href="#prefetch" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (context, dependency, callback)</code></p> <p>æ ¹æ®ç»™å®šçš„ä¾èµ–åˆ›å»ºä¸€ä¸ªæ¨¡å—ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>context</code> - ä¸Šä¸‹æ–‡è·¯å¾„ã€‚</li> <li><code>dependency</code> - è¢«ç”¨æ¥åˆ›å»ºæ¨¡å—çš„ä¾èµ–ã€‚</li> <li><code>callback</code> - å‘ä¸Šä¸€çº§å‘é€æ¨¡å—çš„æ¨¡å—å›è°ƒã€‚</li> </ul> <h3 id="rebuildmodule">rebuildModule <a href="#rebuildmodule" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module, thisCallback)</code></p> <p>è§¦å‘æ¨¡å—çš„é‡å»ºã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦è¢«é‡å»ºçš„æ¨¡å—ã€‚</li> <li><code>thisCallback</code> - æ¨¡å—é‡å»ºå®Œæˆä¹‹åè°ƒç”¨çš„å‡½æ•°ã€‚</li> </ul> <h3 id="finish">finish <a href="#finish" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (callback)</code></p> <p>å®Œæˆç¼–è¯‘å¹¶è°ƒç”¨ç»™å®šçš„å›è°ƒã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>callback</code> - ç¼–è¯‘å®Œæˆä¹‹åè°ƒç”¨çš„å‡½æ•°ã€‚</li> </ul> <h3 id="seal">seal <a href="#seal" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (callback)</code></p> <p>å°é—­ç¼–è¯‘ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>callback</code> - å°é—­ç¼–è¯‘æ—¶å›è°ƒçš„å‡½æ•°ã€‚</li> </ul> <h3 id="unseal">unseal <a href="#unseal" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function</code></p> <p>è§£é™¤å°é—­ç¼–è¯‘ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>callback</code> - è§£é™¤å°é—­ç¼–è¯‘æ—¶å›è°ƒçš„å‡½æ•°ã€‚</li> </ul> <h3 id="reportdependencyerrorsandwarnings">reportDependencyErrorsAndWarnings <a href="#reportdependencyerrorsandwarnings" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module, blocks)</code></p> <p>å°†ç»™å®šæ¨¡å—çš„é”™è¯¯å’Œè­¦å‘Šæ·»åŠ åˆ°ç¼–è¯‘çš„é”™è¯¯å’Œè­¦å‘Šä¸­ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦è¢«æŠ¥å‘Šé”™è¯¯ä¸è­¦å‘Šçš„æ¨¡å—ã€‚</li> <li><code>blocks</code> - ä¸€ç»„è¦æŠ¥å‘Šçš„ä¾èµ–å—ã€‚</li> </ul> <h3 id="addchunkingroup">addChunkInGroup <a href="#addchunkingroup" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (groupOptions, module, loc, request)</code></p> <p>å°†æ¨¡å—æ·»åŠ åˆ°ç°æœ‰ chunk ç»„æˆ–åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„ã€‚è¿”å›ä¸€ä¸ª <code>chunkGroup</code>ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>groupOptions</code> - chunk ç»„çš„é€‰é¡¹ã€‚</li> <li><code>module</code> - å¼•ç”¨ chunk ç»„çš„æ¨¡å—ã€‚</li> <li><code>loc</code> - å¼•ç”¨ chunk ç»„çš„ä½ç½®ï¼ˆæ¨¡å—å†…éƒ¨ï¼‰ã€‚</li> <li><code>request</code> - å¼•ç”¨ chunk ç»„çš„è¯·æ±‚ã€‚</li> </ul> <h3 id="addchunk">addChunk <a href="#addchunk" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (name)</code></p> <p>å‘ <code>compilation.chunks</code> åˆ›å»ºæˆ–æ·»åŠ ä¸€ä¸ªæ–°çš„ chunkã€‚è¿”å›è¿™ä¸ª <code>chunk</code>.</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>name</code> - chunk çš„åç§°ã€‚</li> </ul> <h3 id="assigndepth">assignDepth <a href="#assigndepth" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module)</code></p> <p>ä¸ºç»™å®šçš„æ¨¡å—åŠå…¶ä¾èµ–å—é€’å½’åˆ†é… <code>depth</code> ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦è¢«åˆ†é… depth çš„æ¨¡å—ã€‚</li> </ul> <h3 id="getdependencyreference">getDependencyReference <a href="#getdependencyreference" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module, dependency)</code></p> <p>è¿”å›ç»™å®šæ¨¡å—å¯¹ä¾èµ–çš„å¼•ç”¨ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - æœ‰é—®é¢˜çš„æ¨¡å—ã€‚</li> <li><code>dependency</code> - è¦å¼•ç”¨çš„ä¾èµ–ã€‚</li> </ul> <h3 id="processdependenciesblocksforchunkgroups">processDependenciesBlocksForChunkGroups <a href="#processdependenciesblocksforchunkgroups" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (inputChunkGroups)</code></p> <p>é€šè¿‡ <code>Module</code> å›¾åˆ›å»º <code>Chunk</code> å›¾ã€‚è¯¥è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µå®Œæˆã€‚é˜¶æ®µä¸€ï¼šéå†æ¨¡å—å›¾ï¼Œåœ¨ <code>chunkDependencies</code> ä¸­åˆ›å»ºä¸€ä¸ªåŸºç¡€ chunk å›¾ã€‚é˜¶æ®µäºŒï¼šé€šè¿‡åŸºæœ¬ chunk å›¾éå†æ‰€æœ‰å¯èƒ½çš„æ–¹æ³•å¹¶ä¸”è·Ÿè¸ªå¯ç”¨æ¨¡å—ã€‚éå†è¿‡ç¨‹ä¸­ <code>processDependenciesBlocksForChunkGroups</code> å°† chunk ç›¸äº’è¿æ¥ï¼Œå¹¶å°† <code>Blocks</code> ä¸ <code>Chunks</code> è¿æ¥. å½“ä¸€ä¸ª chunk çš„æ‰€æœ‰æ¨¡å—éƒ½å·²ç»å¯ç”¨ä¸”æœªè¿æ¥ä¸éœ€è¦çš„ chunk æ—¶ï¼Œå®ƒå°†åœæ­¢éå†ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>inputChunkGroups</code> - è¢«å¤„ç†çš„ chunk ç»„ã€‚</li> </ul> <h3 id="removereasonsofdependencyblock">removeReasonsOfDependencyBlock <a href="#removereasonsofdependencyblock" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module, block)</code></p> <p>ç§»é™¤æ¨¡å—ä¸ä¾èµ–å—ä¹‹é—´çš„å…³ç³»ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦ç§»é™¤çš„æ¨¡å—å…³ç³»ã€‚</li> <li><code>block</code> - ä¾èµ–å—ã€‚</li> </ul> <h3 id="patchchunksafterreasonremoval">patchChunksAfterReasonRemoval <a href="#patchchunksafterreasonremoval" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (module, chunk)</code></p> <p>åˆ é™¤ä¾èµ–æ€§åŸå› åï¼Œä¿®è¡¥æ¨¡å—å’Œ chunk çš„å…³ç³»ã€‚è¢« <code>removeReasonsOfDependencyBlock</code> è‡ªåŠ¨è°ƒç”¨ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>module</code> - è¦ä¿®å¤å…³ç³»çš„æ¨¡å—ã€‚</li> <li><code>chunk</code> - è¦ä¿®å¤å…³ç³»çš„ chunkã€‚</li> </ul> <h3 id="removechunkfromdependencies">removeChunkFromDependencies <a href="#removechunkfromdependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (block, chunk)</code></p> <p>åœ¨é™¤å»ä¾èµ–æ€§åŸå› åï¼Œä»ä¾èµ–å—æ¨¡å—å’Œ chunk ä¸­ç§»é™¤ç»™å®šçš„ chunkã€‚ä¼šè¢« <code>removeReasonsOfDependencyBlock</code> è‡ªåŠ¨è°ƒç”¨ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>block</code> - <code>Chunk</code> çš„å—è¿æ¥ã€‚</li> <li><code>chunk</code> - ä»ä¾èµ–ä¸­åˆ é™¤çš„å—ã€‚</li> </ul> <h3 id="sortitemswithmoduleids">sortItemsWithModuleIds <a href="#sortitemswithmoduleids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function</code></p> <h3 id="sortitemswithchunkids">sortItemsWithChunkIds <a href="#sortitemswithchunkids" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function</code></p> <h3 id="summarizedependencies">summarizeDependencies <a href="#summarizedependencies" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function</code></p> <h3 id="createhash">createHash <a href="#createhash" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function</code></p> <h3 id="createmoduleassets">createModuleAssets <a href="#createmoduleassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function</code></p> <h3 id="createchunkassets">createChunkAssets <a href="#createchunkassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function</code></p> <h3 id="getpath">getPath <a href="#getpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (filename, data)</code></p> <p>è¿”å›æ’å€¼è·¯å¾„ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>filename</code> - ç”¨äºé€šè¿‡å“ˆå¸Œè·å–èµ„æºè·¯å¾„ã€‚</li> <li><code>data</code> - æ•°æ®å¯¹è±¡ã€‚</li> </ul> <h3 id="getpathwithinfo">getPathWithInfo <a href="#getpathwithinfo" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (filename, data)</code></p> <p>è¿”å›æ’å€¼è·¯å¾„å’Œèµ„æºä¿¡æ¯ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>filename</code> - ç”¨äºé€šè¿‡å“ˆå¸Œè·å–èµ„æºè·¯å¾„ã€‚</li> <li><code>data</code> - æ•°æ®å¯¹è±¡ã€‚</li> </ul> <h3 id="createchildcompiler">createChildCompiler <a href="#createchildcompiler" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (name, outputOptions, plugins)</code></p> <p>å…è®¸åœ¨ webpack ä¸­è¿è¡Œå¦ä¸€ä¸ª webpack å®ä¾‹ã€‚ä½†æ˜¯ï¼Œå­ç¼–è¯‘å™¨ä¼šåº”ç”¨ä¸åŒçš„è®¾ç½®å’Œé…ç½®ã€‚ä»–ä¼šä»çˆ¶ç¼–è¯‘å™¨ï¼ˆæˆ–è€…é¡¶çº§ç¼–è¯‘å™¨ï¼‰ä¸­å¤åˆ¶æ‰€æœ‰çš„é’©å­(hook)å’Œæ’ä»¶(plugin)ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªå­ <code>Compiler</code> å®ä¾‹ã€‚ è¿”å›å€¼ä¸ºåˆ›å»ºå¥½çš„ <code>Compiler</code> å®ä¾‹ã€‚</p> <p>å‚æ•°ï¼š</p> <ul> <li><code>name</code> - å­ <code>Compiler</code> çš„åç§°ã€‚</li> <li><code>outputOptions</code> - è¾“å‡ºé€‰é¡¹ã€‚</li> <li><code>plugins</code> - å°†è¢«æä¾›çš„ webpack æ’ä»¶ã€‚</li> </ul> <h3 id="checkconstraints">checkConstraints <a href="#checkconstraints" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function</code></p> <h3 id="emitasset">emitAsset <a href="#emitasset" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (file, source, assetInfo = {})</code></p> <blockquote class="warning"> <p>webpack 4.40.0 åå¯ç”¨ã€‚</p> </blockquote> <p>å‚æ•°ï¼š</p> <ul> <li><code>file</code> - èµ„æºåç§°ã€‚</li> <li><code>source</code> - èµ„æºæ¥æºã€‚</li> <li><code>assetInfo</code> - é™„åŠ èµ„æºä¿¡æ¯ã€‚</li> </ul> <h3 id="updateasset">updateAsset <a href="#updateasset" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (file, newSourceOrFunction, assetInfoUpdateOrFunction)</code></p> <blockquote class="warning"> <p>webpack 4.40.0 åå¯ç”¨ã€‚</p> </blockquote> <p>å‚æ•°ï¼š</p> <ul> <li><code>file</code> - èµ„æºåç§°ã€‚</li> <li><code>newSourceOrFunction</code> - æ–°èµ„æºæ¥æºæˆ–å°†æ—§èµ„æºè½¬æ¢ä¸ºæ–°èµ„æºçš„å‡½æ•°ã€‚</li> <li><code>assetInfoUpdateOrFunction</code> - æ–°èµ„æºä¿¡æ¯æˆ–å°†æ—§èµ„æºè½¬æ¢ä¸ºæ–°èµ„æºçš„å‡½æ•°ã€‚</li> </ul> <h3 id="deleteasset">deleteAsset <a href="#deleteasset" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (file)</code></p> <p>å‚æ•°ï¼š</p> <ul> <li><code>file</code> â€”â€” èµ„æºçš„æ–‡ä»¶å</li> </ul> <h3 id="getassets">getAssets <a href="#getassets" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function</code></p> <blockquote class="warning"> <p>webpack 4.40.0 åå¯ç”¨ã€‚</p> </blockquote> <p>è¿”å›å½“å‰ç¼–è¯‘ä¸‹æ‰€æœ‰èµ„æºçš„æ•°ç»„ã€‚</p> <h3 id="getasset">getAsset <a href="#getasset" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>function (name)</code></p> <blockquote class="warning"> <p>webpack 4.40.0 åå¯ç”¨ã€‚</p> </blockquote> <p>å‚æ•°ï¼š</p> <ul> <li><code>name</code> - è¦è¿”å›çš„èµ„æºåç§°ã€‚</li> </ul> </div><div class="contributors__section"><hr/><h3>Contributors</h3><div class="contributors"><div class="contributors__list"><a class="contributor" href="javascript:if(confirm('https://github.com/webpack  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack'" tppabs="https://github.com/webpack"><img alt="webpack" src="../../icon-square-small-slack.9281492bb267314634b4.png" tppabs="https://webpack.docschina.org/icon-square-small-slack.9281492bb267314634b4.png"/><span class="contributor__name"> <!-- -->webpack</span></a></div></div></div></div></section></div><footer class="footer"><div class="container footer__inner"><section class="footer__left"><a class="footer__link" href="../../guides/getting-started/index.htm" tppabs="https://webpack.docschina.org/guides/getting-started/">èµ·æ­¥</a><a class="footer__link" href="../../organization/index.htm" tppabs="https://webpack.docschina.org/organization/">ç»„ç»‡</a><a class="footer__link" href="../../comparison/index.htm" tppabs="https://webpack.docschina.org/comparison/">æ¯”è¾ƒ</a></section><section class="footer__middle"><a class="footer__icon" href="../../index-1.htm" tppabs="https://webpack.docschina.org/"><img src="../../icon-square-small.85ba630cf0c5f29ae3e3.svg" tppabs="https://webpack.docschina.org/icon-square-small.85ba630cf0c5f29ae3e3.svg" alt="webpack icon"/></a></section><section class="footer__right"><a href="javascript:if(confirm('https://webpack.threadless.com/  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://webpack.threadless.com/'" tppabs="https://webpack.threadless.com/" target="_blank" rel="noopener noreferrer" class="footer__link">å•†åº—</a><a class="footer__link" href="../../glossary/index.htm" tppabs="https://webpack.docschina.org/glossary/">æ¦‚å¿µæœ¯è¯­</a><a class="footer__link" href="../../branding/index.htm" tppabs="https://webpack.docschina.org/branding/">å“ç‰Œ</a><a href="javascript:if(confirm('https://gitter.im/webpack/webpack  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://gitter.im/webpack/webpack'" tppabs="https://gitter.im/webpack/webpack" target="_blank" rel="noopener noreferrer" class="footer__link">Gitter</a><a href="javascript:if(confirm('https://github.com/webpack/webpack/releases  \n\n¸ÃÎÄ¼şÎŞ·¨ÓÃ Teleport Ultra ÏÂÔØ, ÒòÎª ËüÊÇÒ»¸öÓò»òÂ·¾¶Íâ²¿±»ÉèÖÃÎªËüµÄÆôÊ¼µØÖ·µÄµØÖ·¡£  \n\nÄãÏëÔÚ·şÎñÆ÷ÉÏ´ò¿ªËü?'))window.location='https://github.com/webpack/webpack/releases'" tppabs="https://github.com/webpack/webpack/releases" target="_blank" rel="noopener noreferrer" class="footer__link">æ›´æ–°æ—¥å¿—</a><a class="footer__link footer__license" href="../../license.htm" tppabs="https://webpack.docschina.org/license"><img alt="Creative Commons License" src="../../cc.ab77d813bf219c6e34ff.svg" tppabs="https://webpack.docschina.org/cc.ab77d813bf219c6e34ff.svg"/><img alt="Creative Commons License" src="../../by.1360bb2e6d1fc28cdd9e.svg" tppabs="https://webpack.docschina.org/by.1360bb2e6d1fc28cdd9e.svg"/></a></section></div></footer></div></div><script>
window.matchMedia('print').addListener(function(mql) {
  if (!mql.matches) {
      window.close();
  }
});
window.print();
</script><script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "../../../hm.baidu.com/hm.js-39edd8e76884f07399be96cd422c9af3"/*tpa=https://hm.baidu.com/hm.js?39edd8e76884f07399be96cd422c9af3*/;
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script></body></html>