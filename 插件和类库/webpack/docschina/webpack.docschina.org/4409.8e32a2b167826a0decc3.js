(self.webpackChunk=self.webpackChunk||[]).push([[4409],{4409:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return c}}),n(7378);var t=n(5318);function o(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function p(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?o(Object(n),!0).forEach((function(a){s(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function s(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}var r={};function c(e){var a=e.components,n=function(e,a){if(null==e)return{};var n,t,o=function(e,a){if(null==e)return{};var n,t,o={},p=Object.keys(e);for(t=0;t<p.length;t++)n=p[t],a.indexOf(n)>=0||(o[n]=e[n]);return o}(e,a);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(t=0;t<p.length;t++)n=p[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["components"]);return(0,t.kt)("wrapper",p(p(p({},r),n),{},{components:a,mdxType:"MDXLayout"}),(0,t.kt)("hr",null),(0,t.kt)("p",null,"title: 模块（Module）\nsort: 7\ncontributors:"),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"sokra"),(0,t.kt)("li",{parentName:"ul"},"skipjack"),(0,t.kt)("li",{parentName:"ul"},"jouni-kantola"),(0,t.kt)("li",{parentName:"ul"},"jhnns"),(0,t.kt)("li",{parentName:"ul"},"dylanonelson"),(0,t.kt)("li",{parentName:"ul"},"byzyk"),(0,t.kt)("li",{parentName:"ul"},"pnevares"),(0,t.kt)("li",{parentName:"ul"},"fadysamirsadek"),(0,t.kt)("li",{parentName:"ul"},"nerdkid93"),(0,t.kt)("li",{parentName:"ul"},"EugeneHlushko"),(0,t.kt)("li",{parentName:"ul"},"superburrito"),(0,t.kt)("li",{parentName:"ul"},"lukasgeiter"),(0,t.kt)("li",{parentName:"ul"},"skovy"),(0,t.kt)("li",{parentName:"ul"},"smelukov"),(0,t.kt)("li",{parentName:"ul"},"opl-"),(0,t.kt)("li",{parentName:"ul"},"Mistyyyy"),(0,t.kt)("li",{parentName:"ul"},"anshumanv"),(0,t.kt)("li",{parentName:"ul"},"chenxsan")),(0,t.kt)("hr",null),(0,t.kt)("p",null,"这些选项决定了如何处理项目中的",(0,t.kt)("a",p({parentName:"p"},{href:"/concepts/modules"}),"不同类型的模块"),"。"),(0,t.kt)("h2",p({},{id:"modulenoparse"}),(0,t.kt)("inlineCode",{parentName:"h2"},"module.noParse")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#modulenoparse","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"RegExp")," ",(0,t.kt)("inlineCode",{parentName:"p"},"[RegExp]")," ",(0,t.kt)("inlineCode",{parentName:"p"},"function(resource)")," ",(0,t.kt)("inlineCode",{parentName:"p"},"string")," ",(0,t.kt)("inlineCode",{parentName:"p"},"[string]")),(0,t.kt)("p",null,"防止 webpack 解析那些任何与给定正则表达式相匹配的文件。忽略的文件中 ",(0,t.kt)("strong",{parentName:"p"},"不应该含有")," ",(0,t.kt)("inlineCode",{parentName:"p"},"import"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"require"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"define")," 的调用，或任何其他导入机制。忽略大型的 library 可以提高构建性能。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    noParse",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"jquery|lodash"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token function-variable function"}),"noParse"),(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token parameter"}),"content"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=>")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"jquery|lodash"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"test"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"content",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("h2",p({},{id:"moduleunsafecache"}),(0,t.kt)("inlineCode",{parentName:"h2"},"module.unsafeCache")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#moduleunsafecache","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"boolean")," ",(0,t.kt)("inlineCode",{parentName:"p"},"function (module)")),(0,t.kt)("p",null,"缓存模块请求的解析。",(0,t.kt)("inlineCode",{parentName:"p"},"module.unsafeCache")," 包含如下几个默认值："),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"如果 ",(0,t.kt)("a",p({parentName:"li"},{href:"/configuration/other-options/#cache"}),(0,t.kt)("inlineCode",{parentName:"a"},"cache"))," 未被启用，则默认值为 ",(0,t.kt)("inlineCode",{parentName:"li"},"false"),"。"),(0,t.kt)("li",{parentName:"ul"},"如果 ",(0,t.kt)("a",p({parentName:"li"},{href:"/configuration/other-options/#cache"}),(0,t.kt)("inlineCode",{parentName:"a"},"cache"))," 被启用，并且此模块的来自 node_modules，则值为 ",(0,t.kt)("inlineCode",{parentName:"li"},"true"),"，否则为 ",(0,t.kt)("inlineCode",{parentName:"li"},"false"),"。")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    unsafeCache",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("blockquote",p({},{className:"warning"}),(0,t.kt)("p",{parentName:"blockquote"},"在 webpack 4 中其默认值为 ",(0,t.kt)("inlineCode",{parentName:"p"},"true"),"。")),(0,t.kt)("h2",p({},{id:"modulerules"}),(0,t.kt)("inlineCode",{parentName:"h2"},"module.rules")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#modulerules","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"[Rule]")),(0,t.kt)("p",null,"创建模块时，匹配请求的",(0,t.kt)("a",p({parentName:"p"},{href:"#rule"}),"规则"),"数组。这些规则能够修改模块的创建方式。\n这些规则能够对模块(module)应用 loader，或者修改解析器(parser)。"),(0,t.kt)("h2",p({},{id:"rule"}),"Rule ",(0,t.kt)("a",p({parentName:"h2"},{href:"#rule","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"object")),(0,t.kt)("p",null,"每个规则可以分为三部分 - 条件(condition)，结果(result)和嵌套规则(nested rule)。"),(0,t.kt)("h3",p({},{id:"rule-conditions"}),"Rule 条件 ",(0,t.kt)("a",p({parentName:"h3"},{href:"#rule-conditions","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"条件有两种输入值："),(0,t.kt)("ol",null,(0,t.kt)("li",{parentName:"ol"},(0,t.kt)("p",{parentName:"li"},"resource：资源文件的绝对路径。它已经根据 ",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/resolve"}),(0,t.kt)("inlineCode",{parentName:"a"},"resolve")," 规则"),"解析。")),(0,t.kt)("li",{parentName:"ol"},(0,t.kt)("p",{parentName:"li"},"issuer: 请求者的文件绝对路径。是导入时的位置。"))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"例如:")," 从 ",(0,t.kt)("inlineCode",{parentName:"p"},"app.js"/*tpa=https://webpack.docschina.org/app.js*/)," ",(0,t.kt)("inlineCode",{parentName:"p"},"导入 'style.css'/*tpa=https://webpack.docschina.org/style.css*/"),"，resource 是 ",(0,t.kt)("inlineCode",{parentName:"p"},"path/to/style.css"/*tpa=https://webpack.docschina.org/path/to/style.css*/),". issuer 是 ",(0,t.kt)("inlineCode",{parentName:"p"},"path/to/app.js"/*tpa=https://webpack.docschina.org/path/to/app.js*/),"。"),(0,t.kt)("p",null,"在规则中，属性 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-test"}),(0,t.kt)("inlineCode",{parentName:"a"},"test")),", ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-include"}),(0,t.kt)("inlineCode",{parentName:"a"},"include")),", ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-exclude"}),(0,t.kt)("inlineCode",{parentName:"a"},"exclude"))," 和 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-resource"}),(0,t.kt)("inlineCode",{parentName:"a"},"resource"))," 对 resource 匹配，并且属性 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-issuer"}),(0,t.kt)("inlineCode",{parentName:"a"},"issuer"))," 对 issuer 匹配。"),(0,t.kt)("p",null,"当使用多个条件时，所有条件都匹配。"),(0,t.kt)("blockquote",p({},{className:"warning"}),(0,t.kt)("p",{parentName:"blockquote"},"小心！resource 是文件的 ",(0,t.kt)("em",{parentName:"p"},"解析")," 路径，这意味着符号链接的资源是真正的路径，",(0,t.kt)("em",{parentName:"p"},"而不是")," 符号链接位置。\n在使用工具来符号链接包的时候（如 ",(0,t.kt)("inlineCode",{parentName:"p"},"npm link"),"）比较好记，像 ",(0,t.kt)("inlineCode",{parentName:"p"},"/node_modules/")," 等常见条件可能会不小心错过符号链接的文件。\n注意，可以通过 ",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/resolve#resolve-symlinks"}),(0,t.kt)("inlineCode",{parentName:"a"},"resolve.symlinks")),"\n关闭符号链接解析（以便将资源解析为符号链接路径）。")),(0,t.kt)("h3",p({},{id:"rule-results"}),"Rule 结果 ",(0,t.kt)("a",p({parentName:"h3"},{href:"#rule-results","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"规则结果只在规则条件匹配时使用。"),(0,t.kt)("p",null,"规则有两种输入值："),(0,t.kt)("ol",null,(0,t.kt)("li",{parentName:"ol"},"应用的 loader：应用在 resource 上的 loader 数组。"),(0,t.kt)("li",{parentName:"ol"},"Parser 选项：用于为模块创建解析器的选项对象。")),(0,t.kt)("p",null,"这些属性会影响 loader：",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-loader"}),(0,t.kt)("inlineCode",{parentName:"a"},"loader")),", ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-options-rule-query"}),(0,t.kt)("inlineCode",{parentName:"a"},"options")),", ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-use"}),(0,t.kt)("inlineCode",{parentName:"a"},"use")),"。"),(0,t.kt)("p",null,"也兼容这些属性：",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-options-rule-query"}),(0,t.kt)("inlineCode",{parentName:"a"},"query")),", ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-loaders"}),(0,t.kt)("inlineCode",{parentName:"a"},"loaders")),"。"),(0,t.kt)("p",null,(0,t.kt)("a",p({parentName:"p"},{href:"#rule-enforce"}),(0,t.kt)("inlineCode",{parentName:"a"},"enforce"))," 属性会影响 loader 种类。不论是普通的，前置的，后置的 loader。"),(0,t.kt)("p",null,(0,t.kt)("a",p({parentName:"p"},{href:"#rule-parser"}),(0,t.kt)("inlineCode",{parentName:"a"},"parser"))," 属性会影响 parser 选项。"),(0,t.kt)("h2",p({},{id:"nested-rules"}),"嵌套的 Rule ",(0,t.kt)("a",p({parentName:"h2"},{href:"#nested-rules","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"可以使用属性 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-rules"}),(0,t.kt)("inlineCode",{parentName:"a"},"rules"))," 和 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-oneof"}),(0,t.kt)("inlineCode",{parentName:"a"},"oneOf"))," 指定嵌套规则。"),(0,t.kt)("p",null,"这些规则用于在规则条件(rule condition)匹配时进行取值。每个嵌套规则包含它自己的条件。"),(0,t.kt)("p",null,"被解析的顺序基于以下规则："),(0,t.kt)("ol",null,(0,t.kt)("li",{parentName:"ol"},"父规则"),(0,t.kt)("li",{parentName:"ol"},(0,t.kt)("a",p({parentName:"li"},{href:"#rulerules"}),(0,t.kt)("inlineCode",{parentName:"a"},"rules"))),(0,t.kt)("li",{parentName:"ol"},(0,t.kt)("a",p({parentName:"li"},{href:"#ruleoneof"}),(0,t.kt)("inlineCode",{parentName:"a"},"oneOf")))),(0,t.kt)("h2",p({},{id:"ruleenforce"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.enforce")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleenforce","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"string")),(0,t.kt)("p",null,"可能的值有：",(0,t.kt)("inlineCode",{parentName:"p"},'"pre" | "post"')),(0,t.kt)("p",null,"指定 loader 种类。没有值表示是普通 loader。"),(0,t.kt)("p",null,'还有一个额外的种类"行内 loader"，loader 被应用在 import/require 行内。'),(0,t.kt)("p",null,"所有一个接一个地进入的 loader，都有两个阶段："),(0,t.kt)("ol",null,(0,t.kt)("li",{parentName:"ol"},(0,t.kt)("strong",{parentName:"li"},"Pitching")," 阶段: loader 上的 pitch 方法，按照 ",(0,t.kt)("inlineCode",{parentName:"li"},"后置(post)、行内(normal)、普通(inline)、前置(pre)")," 的顺序调用。更多详细信息，请查看 ",(0,t.kt)("a",p({parentName:"li"},{href:"/api/loaders/#pitching-loader"}),"Pitching Loader"),"。"),(0,t.kt)("li",{parentName:"ol"},(0,t.kt)("strong",{parentName:"li"},"Normal")," 阶段: loader 上的 常规方法，按照 ",(0,t.kt)("inlineCode",{parentName:"li"},"前置(pre)、行内(normal)、普通(inline)、后置(post)")," 的顺序调用。模块源码的转换，\n发生在这个阶段。")),(0,t.kt)("p",null,"所有普通 loader 可以通过在请求中加上 ",(0,t.kt)("inlineCode",{parentName:"p"},"!")," 前缀来忽略（覆盖）。"),(0,t.kt)("p",null,"所有普通和前置 loader 可以通过在请求中加上 ",(0,t.kt)("inlineCode",{parentName:"p"},"-!")," 前缀来忽略（覆盖）。"),(0,t.kt)("p",null,"所有普通，后置和前置 loader 可以通过在请求中加上 ",(0,t.kt)("inlineCode",{parentName:"p"},"!!")," 前缀来忽略（覆盖）。"),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用普通 loaders"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"import")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{")," a ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"from")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'!./file1.js'/*tpa=https://webpack.docschina.org/!./file1.js*/"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用前置和普通 loaders"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"import")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{")," b ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"from"),"  ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'-!./file2.js'/*tpa=https://webpack.docschina.org/-!./file2.js*/"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n\n",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用所有的 laoders"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"import")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{")," c ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"from"),"  ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'!!./file3.js'/*tpa=https://webpack.docschina.org/!!./file3.js*/"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,"Inline loaders and ",(0,t.kt)("inlineCode",{parentName:"p"},"!")," prefixes should not be used as they are non-standard. They may be use by loader generated code."),(0,t.kt)("h2",p({},{id:"ruleexclude"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.exclude")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleexclude","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"排除所有符合条件的模块。如果你提供了 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.exclude")," 选项，就不能再提供 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.resource"),"。详细请查看 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-resource"}),(0,t.kt)("inlineCode",{parentName:"a"},"Rule.resource"))," 和 ",(0,t.kt)("a",p({parentName:"p"},{href:"#condition"}),(0,t.kt)("inlineCode",{parentName:"a"},"Condition.exclude")),"。"),(0,t.kt)("h2",p({},{id:"ruleinclude"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.include")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleinclude","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"引入符合以下任何条件的模块。如果你提供了 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.include")," 选项，就不能再提供 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.resource"),"。详细请查看 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-resource"}),(0,t.kt)("inlineCode",{parentName:"a"},"Rule.resource"))," 和 ",(0,t.kt)("a",p({parentName:"p"},{href:"#condition"}),(0,t.kt)("inlineCode",{parentName:"a"},"Condition.include")),"。"),(0,t.kt)("h2",p({},{id:"ruleissuer"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.issuer")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleissuer","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"一个",(0,t.kt)("a",p({parentName:"p"},{href:"#condition"}),(0,t.kt)("inlineCode",{parentName:"a"},"条件")),"，用来与被发出的 request 对应的模块项匹配。在以下示例中，",(0,t.kt)("inlineCode",{parentName:"p"},"a.js"/*tpa=https://webpack.docschina.org/a.js*/)," request 的",(0,t.kt)("inlineCode",{parentName:"p"},"发出者(issuer)"),"\n是 index.js 文件的路径。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"index.js"/*tpa=https://webpack.docschina.org/index.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"import")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token constant"}),"A")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"from")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'a.js'/*tpa=https://webpack.docschina.org/a.js*/"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,"这个选项可以用来将 loader 应用到一个特定模块或一组模块的依赖中。"),(0,t.kt)("h2",p({},{id:"ruleloader"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.loader")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleloader","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"Rule.loader")," 是 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.use: [ { loader } ]")," 的简写。详细请查看 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-use"}),(0,t.kt)("inlineCode",{parentName:"a"},"https://webpack.docschina.org/Rule.use"))," 和 ",(0,t.kt)("a",p({parentName:"p"},{href:"#useentry"}),(0,t.kt)("inlineCode",{parentName:"a"},"UseEntry.loader")),"。"),(0,t.kt)("h2",p({},{id:"ruleloaders"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.loaders")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleloaders","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("blockquote",p({},{className:"warning"}),(0,t.kt)("p",{parentName:"blockquote"}," 由于需要支持 ",(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/Rule.use"),"，此选项 ",(0,t.kt)("strong",{parentName:"p"},"已废弃"),"。")),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"Rule.loaders")," 是 ",(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/Rule.use")," 的别名。详细请查看 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-use"}),(0,t.kt)("inlineCode",{parentName:"a"},"https://webpack.docschina.org/Rule.use")),"。"),(0,t.kt)("h2",p({},{id:"rulemimetype"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.mimetype")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#rulemimetype","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"你可以使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"mimetype")," 使 rules 配置与 data 的 uri 进行匹配。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-js"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// ..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        mimetype",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'application/json'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        type",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'json'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,"mimetype 已默认包含了 ",(0,t.kt)("inlineCode",{parentName:"p"},"application/json"),"，",(0,t.kt)("inlineCode",{parentName:"p"},"text/javascript"),"，",(0,t.kt)("inlineCode",{parentName:"p"},"application/javascript"),"，",(0,t.kt)("inlineCode",{parentName:"p"},"application/node")," 以及 ",(0,t.kt)("inlineCode",{parentName:"p"},"application/wasm"),"。"),(0,t.kt)("h2",p({},{id:"ruleoneof"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.oneOf")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleoneof","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("a",p({parentName:"p"},{href:"#rule"}),(0,t.kt)("inlineCode",{parentName:"a"},"规则")),"数组，当规则匹配时，只使用第一个匹配规则。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        test",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"\\\\.css$"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        oneOf",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            resourceQuery",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"inline"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"https:// foo.css/?inline"),"\n            use",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'url-loader'"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            resourceQuery",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"external"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"https:// foo.css/?external"),"\n            use",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'file-loader'"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("blockquote",p({},{className:"tip"}),(0,t.kt)("p",{parentName:"blockquote"},"详情请参阅 ",(0,t.kt)("a",p({parentName:"p"},{href:"#nested-rules"}),(0,t.kt)("inlineCode",{parentName:"a"},"嵌套规则")),"。")),(0,t.kt)("h2",p({},{id:"ruleoptions--rulequery"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.options")," / ",(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.query")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleoptions--rulequery","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"Rule.options")," 和 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.query")," 是 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.use: [ { options } ]")," 的简写。详细请查看 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-use"}),(0,t.kt)("inlineCode",{parentName:"a"},"https://webpack.docschina.org/Rule.use")),"\n和 ",(0,t.kt)("a",p({parentName:"p"},{href:"#useentry"}),(0,t.kt)("inlineCode",{parentName:"a"},"UseEntry.options")),"。"),(0,t.kt)("blockquote",p({},{className:"warning"}),(0,t.kt)("p",{parentName:"blockquote"},"由于需要支持 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.options"),"，",(0,t.kt)("inlineCode",{parentName:"p"},"UseEntry.options")," 以及 ",(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/Rule.use"),"，因此 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.query")," 已废弃。")),(0,t.kt)("h2",p({},{id:"ruleparser"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.parser")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleparser","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"解析选项对象。所有应用的解析选项都将合并。"),(0,t.kt)("p",null,"解析器(parser)可以查阅这些选项，并相应地禁用或重新配置。大多数默认插件，\n会如下解释值："),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"将选项设置为 ",(0,t.kt)("inlineCode",{parentName:"li"},"false"),"，将禁用解析器。"),(0,t.kt)("li",{parentName:"ul"},"将选项设置为 ",(0,t.kt)("inlineCode",{parentName:"li"},"true"),"，或不修改将其保留为 ",(0,t.kt)("inlineCode",{parentName:"li"},"undefined"),"，可以启用解析器。")),(0,t.kt)("p",null,"然而，一些解析器(parser)插件可能不光只接收一个布尔值。例如，内部的 ",(0,t.kt)("inlineCode",{parentName:"p"},"NodeStuffPlugin")," 插件，可以接收一个对象，而不是 ",(0,t.kt)("inlineCode",{parentName:"p"},"true"),"，\n来为特定的规则添加额外的选项。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"示例"),"（默认的插件解析器选项）："),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-js-with-links"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n        parser",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          amd",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用 AMD"),"\n          commonjs",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用 CommonJS"),"\n          system",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用 SystemJS"),"\n          harmony",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用 ES2015 Harmony import/export"),"\n          requireInclude",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用 require.include"),"\n          requireEnsure",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用 require.ensure"),"\n          requireContext",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用 require.context"),"\n          browserify",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用特殊处理的 browserify bundle"),"\n          requireJs",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用 requirejs.*"),"\n          node",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 禁用 __dirname, __filename, module, require.extensions, require.main, 等。"),"\n          node",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"..."),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// 在模块级别(module level)上重新配置 [node](/configuration/node) 层(layer)"),"\n          worker",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),'"default from web-worker"'),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),'"..."'),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),'// 自定义 WebWorker 对 JavaScript 的处理，其中 "..." 为默认值。'),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"))),(0,t.kt)("p",null,"如果 ",(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/Rule.type")," 的值为 ",(0,t.kt)("inlineCode",{parentName:"p"},"asset"),"，那么 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rules.parser")," 选项可能是一个对象或一个函数，其作用可能是将文件内容编码为 Base64，还可能是将其当做单独文件 emit 到输出目录。"),(0,t.kt)("p",null,"如果 ",(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/Rule.type")," 的值为 ",(0,t.kt)("inlineCode",{parentName:"p"},"asset")," 或 ",(0,t.kt)("inlineCode",{parentName:"p"},"asset/inline"),"，那么 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.generator")," 选项可能是一个描述模块源编码方式的对象，还可能是一个通过自定义算法对模块源代码进行编码的函数。"),(0,t.kt)("p",null,"更多信息及用例请查阅 ",(0,t.kt)("a",p({parentName:"p"},{href:"/guides/asset-modules/"}),"Asset 模块指南"),"。"),(0,t.kt)("h2",p({},{id:"ruleparserdataurlcondition"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.parser.dataUrlCondition")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleparserdataurlcondition","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"object = { maxSize number = 8096 }")," ",(0,t.kt)("inlineCode",{parentName:"p"},"function (source, { filename, module }) => boolean")),(0,t.kt)("p",null,"如果一个模块源码大小小于 ",(0,t.kt)("inlineCode",{parentName:"p"},"maxSize"),"，那么模块会被作为一个 Base64 编码的字符串注入到包中，\n否则模块文件会被生成到输出的目标目录中。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-js"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n        parser",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          dataUrlCondition",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            maxSize",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token number"}),"4")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"*")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token number"}),"1024"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,"当提供函数时，返回 ",(0,t.kt)("inlineCode",{parentName:"p"},"true")," 值时告知 webpack 将模块作为一个 Base64 编码的字符串注入到包中，\n否则模块文件会被生成到输出的目标目录中。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-js"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n        parser",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token function-variable function"}),"dataUrlCondition"),(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token parameter"}),"source",(0,t.kt)("span",p({parentName:"span"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"span"},{className:"token punctuation"}),"{")," filename",(0,t.kt)("span",p({parentName:"span"},{className:"token punctuation"}),",")," module ",(0,t.kt)("span",p({parentName:"span"},{className:"token punctuation"}),"}")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=>")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"const")," content ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," source",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"toString"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n            ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"return")," content",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"includes"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'some marker'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("h2",p({},{id:"rulegeneratordataurl"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.generator.dataUrl")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#rulegeneratordataurl","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"object = { encoding string = 'base64' | false, mimetype string = undefined | false }")," ",(0,t.kt)("inlineCode",{parentName:"p"},"function (content, { filename, module }) => string")),(0,t.kt)("p",null,"当 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.generator.dataUrl")," 被用作一个对象，你可以配置两个属性："),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"encoding: 当被设置为",(0,t.kt)("inlineCode",{parentName:"li"},"'base64'"),"，模块源码会用 Baes64算法 编码。设置 ",(0,t.kt)("inlineCode",{parentName:"li"},"encoding")," 为 false，会禁用编码。"),(0,t.kt)("li",{parentName:"ul"},"mimetype: 为数据链接(data URI)设置的一个 mimetype 值。默认根据模块资源后缀设置。")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-js"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n        generator",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          encoding",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'base64'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n          mimetype",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'mimetype/png'"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,"当被作为一个函数使用，它必须为每个模块执行且并须返回一个数据链接(data URI)字符串。"),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-js"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n        generator",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token function-variable function"}),"dataUrl"),(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token parameter"}),"content")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=>")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"const")," svgToMiniDataURI ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"require"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'mini-svg-data-uri'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n            ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"if")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"typeof")," content ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"!==")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'string'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n              content ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," content",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"toString"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n            ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n            ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"return")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"svgToMiniDataURI"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"content",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("h2",p({},{id:"rulegeneratorfilename"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.generator.filename")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#rulegeneratorfilename","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"对某些特定的规则而言与 ",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/output/#outputassetmodulefilename"}),(0,t.kt)("inlineCode",{parentName:"a"},"output.assetModuleFilename"))," 相同. 覆盖了 ",(0,t.kt)("inlineCode",{parentName:"p"},"output.assetModuleFilename")," 选项并且仅与 ",(0,t.kt)("inlineCode",{parentName:"p"},"asset")," 和 ",(0,t.kt)("inlineCode",{parentName:"p"},"asset/resource")," 模块类型一同起作用。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-js"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  output",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    assetModuleFilename",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'images/[hash][ext][query]'"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        test",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"../.png/index.htm"/*tpa=https://.png/*/),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        type",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'asset/resource'"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        test",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"https://.html/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        type",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'asset/resource'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        generator",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          filename",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'static/[hash][ext]'"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("h2",p({},{id:"ruleresource"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.resource")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleresource","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("a",p({parentName:"p"},{href:"#%E6%9D%A1%E4%BB%B6"}),(0,t.kt)("inlineCode",{parentName:"a"},"条件")),"会匹配 resource。在 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-conditions"}),(0,t.kt)("inlineCode",{parentName:"a"},"Rule")," 条件")," 中查阅详情。"),(0,t.kt)("h2",p({},{id:"ruleresourcequery"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.resourceQuery")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleresourcequery","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"A ",(0,t.kt)("a",p({parentName:"p"},{href:"#condition"}),(0,t.kt)("inlineCode",{parentName:"a"},"Condition"))," matched with the resource query. This option is used to test against the query section of a request string (i.e. from the question mark onwards). If you were to ",(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/import Foo from './foo.css?inline'"),", the following condition would match:"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        test",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"\\\\.css$"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        resourceQuery",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"inline"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        use",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'url-loader'"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("h2",p({},{id:"ruleparserparse"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.parser.parse")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleparserparse","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"function(input) => string | object")),(0,t.kt)("p",null,"如果 ",(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/Rule.type")," 被设置成  ",(0,t.kt)("inlineCode",{parentName:"p"},"'json'"),"，那么 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rules.parser.parse")," 选择可能会是一个方法，该方法实现自定义的逻辑，以解析模块的源和并将它转换成 JavaScript ",(0,t.kt)("inlineCode",{parentName:"p"},"对象"),"。\n它可能在没有特定加载器的时候，对将 ",(0,t.kt)("inlineCode",{parentName:"p"},"toml"),", ",(0,t.kt)("inlineCode",{parentName:"p"},"yaml")," 和其它非JSON文件导入成导入非常有用："),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"const")," toml ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"require"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'toml'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n\nmodule",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        test",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"https://.toml/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        type",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'json'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        parser",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          parse",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," toml",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"parse\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("h2",p({},{id:"rulerules"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.rules")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#rulerules","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("a",p({parentName:"p"},{href:"#rule"}),(0,t.kt)("inlineCode",{parentName:"a"},"规则")),"数组，当规则匹配时使用。"),(0,t.kt)("blockquote",p({},{className:"tip"}),(0,t.kt)("p",{parentName:"blockquote"},"详情参阅 ",(0,t.kt)("a",p({parentName:"p"},{href:"#nested-rules"}),(0,t.kt)("inlineCode",{parentName:"a"},"嵌套规则"))," 。")),(0,t.kt)("h2",p({},{id:"rulesideeffects"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.sideEffects")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#rulesideeffects","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"bool")),(0,t.kt)("p",null,"表明模块的哪一部份包含副作用。详情参阅 ",(0,t.kt)("a",p({parentName:"p"},{href:"/guides/tree-shaking/#mark-the-file-as-side-effect-free"}),"Tree Shaking"),"。"),(0,t.kt)("h2",p({},{id:"ruletest"}),(0,t.kt)("inlineCode",{parentName:"h2"},"https://webpack.docschina.org/Rule.test")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruletest","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"引入所有通过断言测试的模块。如果你提供了一个 ",(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/Rule.test")," 选项，就不能再提供 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.resource"),"。详细请查看 ",(0,t.kt)("a",p({parentName:"p"},{href:"#rule-resource"}),(0,t.kt)("inlineCode",{parentName:"a"},"Rule.resource"))," 和 ",(0,t.kt)("a",p({parentName:"p"},{href:"#condition"}),(0,t.kt)("inlineCode",{parentName:"a"},"https://webpack.docschina.org/Condition.test")),"。"),(0,t.kt)("h2",p({},{id:"ruletype"}),(0,t.kt)("inlineCode",{parentName:"h2"},"https://webpack.docschina.org/Rule.type")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruletype","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"string")),(0,t.kt)("p",null,"可设置值: ",(0,t.kt)("inlineCode",{parentName:"p"},"'javascript/auto' | 'javascript/dynamic' | 'javascript/esm' | 'json' | 'webassembly/sync' | 'webassembly/async' | 'asset' | 'asset/source' | 'asset/resource' | 'asset/inline'")),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/Rule.type")," 设置类型用于匹配模块。它防止了 ",(0,t.kt)("inlineCode",{parentName:"p"},"defaultRules")," 和它们的默认导入行为发生。例如，如果你想\n通过自定义 loader 加载一个 ",(0,t.kt)("inlineCode",{parentName:"p"},".json")," 文件，你会需要将 ",(0,t.kt)("inlineCode",{parentName:"p"},"type")," 设置为 ",(0,t.kt)("inlineCode",{parentName:"p"},"javascript/auto")," 以绕过 webpack 内置的 json 导入。\n（详参",(0,t.kt)("a",p({parentName:"p"},{href:"https://github.com/webpack/webpack/releases/tag/v4.0.0"}),"v4.0 更新日志"),"）"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        test",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"\\\\.json$"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        type",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'javascript/auto'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        loader",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'custom-json-loader'"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"关于 ",(0,t.kt)("inlineCode",{parentName:"p"},"asset*")," 类型详参 ",(0,t.kt)("a",p({parentName:"p"},{href:"/guides/asset-modules/"}),"资源模块指南")," 。")),(0,t.kt)("h2",p({},{id:"ruleuse"}),(0,t.kt)("inlineCode",{parentName:"h2"},"https://webpack.docschina.org/Rule.use")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleuse","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"[UseEntry]")," ",(0,t.kt)("inlineCode",{parentName:"p"},"function(info)")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},(0,t.kt)("inlineCode",{parentName:"strong"},"[UseEntry]"))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/Rule.use")," 可以是一个应用于模块的 ",(0,t.kt)("a",p({parentName:"p"},{href:"#useentry"}),"UseEntries")," 数组。每个入口(entry)指定使用一个 loader。"),(0,t.kt)("p",null,"传递字符串（如：",(0,t.kt)("inlineCode",{parentName:"p"},"use: [ 'style-loader' ]"),"）是 loader 属性的简写方式（如：",(0,t.kt)("inlineCode",{parentName:"p"},"use: [ { loader: 'style-loader'} ]"),"）。"),(0,t.kt)("p",null,"Loaders 可以通过传入多个 loaders 以达到链式调用的效果，它们会从右到左被应用（从最后到最先配置）。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n        use",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'style-loader'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            loader",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'css-loader'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n            options",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n              importLoaders",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token number"}),"1"),"\n            ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            loader",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'less-loader'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n            options",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n              noIeCompat",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"true"),"\n            ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},(0,t.kt)("inlineCode",{parentName:"strong"},"function(info)"))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/Rule.use")," 也可以是一个函数，接受对象参数，描述被加载的模块，而且必须\n返回 ",(0,t.kt)("inlineCode",{parentName:"p"},"UseEntry")," 元素的数组。"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"info")," 对象参数有以下的字段："),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"compiler"),": 当前 webpack 的编译器（可以是 undefined 值）"),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"issuer"),": 模块的路径，该元素正在导入一个被加载的模块(resource)"),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"realResource"),": 总会是被加载模块的路径"),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"resource"),": 被加载的模块路径，它常常与 ",(0,t.kt)("inlineCode",{parentName:"li"},"realResource")," 相等，只有当资源名称被 request 字符串中的 ",(0,t.kt)("inlineCode",{parentName:"li"},"!=!")," 覆盖时才不相等")),(0,t.kt)("p",null,"相同的作为数组的快捷方式可以用作返回值（如 ",(0,t.kt)("inlineCode",{parentName:"p"},"use: [ 'style-loader' ]"),"）。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token function-variable function"}),"use"),(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token parameter"}),"info"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=>")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            loader",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'custom-svg-loader'"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            loader",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'svgo-loader'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n            options",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n              plugins",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n                cleanupIDs",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{")," prefix",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"basename"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"info",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"resource",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n              ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n            ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,"参参 ",(0,t.kt)("a",p({parentName:"p"},{href:"#useentry"}),"UseEntry"),"。"),(0,t.kt)("h2",p({},{id:"ruleresolve"}),(0,t.kt)("inlineCode",{parentName:"h2"},"Rule.resolve")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#ruleresolve","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("blockquote",p({},{className:"warning"}),(0,t.kt)("p",{parentName:"blockquote"},"",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.resolve")," 从 webpack 4.36.1 起可用")),(0,t.kt)("p",null,"模块解析可以在模块层被配置。",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/resolve/#resolve"}),"resolve 配置页面"),"可查看所有可用的配置。\n所有被应用的 resolve 选项被更高层级的",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/resolve/#resolve"}),"resolve"),"配置合并。"),(0,t.kt)("p",null,"例如，假设我们有一个入口文件在 ",(0,t.kt)("inlineCode",{parentName:"p"},"src/index.js"/*tpa=https://webpack.docschina.org/src/index.js*/),", ",(0,t.kt)("inlineCode",{parentName:"p"},"src/footer/default.js"/*tpa=https://webpack.docschina.org/src/footer/default.js*/)," 和一个  ",(0,t.kt)("inlineCode",{parentName:"p"},"src/footer/overridden.js"/*tpa=https://webpack.docschina.org/src/footer/overridden.js*/),"，\n用以论证模块层级的解析。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"src/index.js"/*tpa=https://webpack.docschina.org/src/index.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"import")," footer ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"from")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'footer'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\nconsole",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"log"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"footer",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"src/footer/default.js"/*tpa=https://webpack.docschina.org/src/footer/default.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"export")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"default")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'default footer'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"src/footer/overridden.js"/*tpa=https://webpack.docschina.org/src/footer/overridden.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"export")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"default")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'overridden footer'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"https://webpack.docschina.org/webpack.js.org")),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  resolve",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    alias",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'footer'"),(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'footer/default.js'/*tpa=https://webpack.docschina.org/footer/default.js*/"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,"当用该配置创建一个包，",(0,t.kt)("inlineCode",{parentName:"p"},"console.log(footer)")," 会输出 'default footer'。让我们为 ",(0,t.kt)("inlineCode",{parentName:"p"},".js")," 文件设置 ",(0,t.kt)("inlineCode",{parentName:"p"},"Rule.resolve"),"，以及\n",(0,t.kt)("inlineCode",{parentName:"p"},"footer")," 作为 ",(0,t.kt)("inlineCode",{parentName:"p"},"overridden.js"/*tpa=https://webpack.docschina.org/overridden.js*/)," 的别名。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"https://webpack.docschina.org/webpack.js.org")),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  resolve",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    alias",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'footer'"),(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'footer/default.js'/*tpa=https://webpack.docschina.org/footer/default.js*/"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        resolve",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          alias",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'footer'"),(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'footer/overridden.js'/*tpa=https://webpack.docschina.org/footer/overridden.js*/"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,"当用该配置创建一个包，",(0,t.kt)("inlineCode",{parentName:"p"},"console.log(footer)")," 会输出 'overridden footer'。"),(0,t.kt)("h3",p({},{id:"resolve-fully-specified"}),(0,t.kt)("inlineCode",{parentName:"h3"},"resolve.fullySpecified")," ",(0,t.kt)("a",p({parentName:"h3"},{href:"#resolve-fully-specified","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"boolean = true")),(0,t.kt)("p",null,"启用后，你若在 ",(0,t.kt)("inlineCode",{parentName:"p"},".mjs")," 文件或其他 ",(0,t.kt)("inlineCode",{parentName:"p"},".js")," 文件中导入模块，并且它们最近的 ",(0,t.kt)("inlineCode",{parentName:"p"},"https://webpack.docschina.org/package.json")," 中包含 ",(0,t.kt)("inlineCode",{parentName:"p"},'"type"')," 字段，其值为 ",(0,t.kt)("inlineCode",{parentName:"p"},'"module"'),"时，你应为此文件提供扩展名，否则 webpack 会提示 ",(0,t.kt)("inlineCode",{parentName:"p"},"Module not found")," 的错误且编译失败。并且 webpack 不会解析 ",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/resolve/#resolvemainfiles"}),(0,t.kt)("inlineCode",{parentName:"a"},"resolve.mainFiles"))," 中定义的文件目录，你必须自己指定文件名。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-js"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// ..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        test",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"\\.m?js$"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        resolve",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          fullySpecified",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// disable the behaviour"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("blockquote",p({},{className:"warning"}),(0,t.kt)("p",{parentName:"blockquote"},"",(0,t.kt)("inlineCode",{parentName:"p"},"resolve.fullySpecified")," 不影响来自 ",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/resolve/#resolvemainfields"}),"mainFields"),"，",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/resolve/#resolvealiasfields"}),"aliasFields")," 或 ",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/resolve/#resolvealias"}),"aliases")," 的请求。")),(0,t.kt)("h2",p({},{id:"condition"}),(0,t.kt)("inlineCode",{parentName:"h2"},"条件")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#condition","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,"条件可以是这些之一："),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"字符串：匹配输入必须以提供的字符串开始。是的。目录绝对路径或文件绝对路径。"),(0,t.kt)("li",{parentName:"ul"},"正则表达式：test 输入值。"),(0,t.kt)("li",{parentName:"ul"},"函数：调用输入的函数，必须返回一个真值(truthy value)以匹配。"),(0,t.kt)("li",{parentName:"ul"},"条件数组：至少一个匹配条件。"),(0,t.kt)("li",{parentName:"ul"},"对象：匹配所有属性。每个属性都有一个定义行为。")),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"{ and: [Condition] }"),"：必须匹配数组中的所有条件"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"{ or: [Condition] }"),"：匹配数组中任何一个条件"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"{ not: [Condition] }"),"：必须排除这个条件"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"示例:")),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),(0,t.kt)("span",p({parentName:"code"},{className:"token keyword"}),"const")," path ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"require"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'path'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"),"\n\nmodule",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        test",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),"\\\\.css$"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        include",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n          path",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"resolve"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"__dirname",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'app/styles'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n          path",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"resolve"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"__dirname",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),",")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'vendor/styles'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("h2",p({},{id:"useentry"}),(0,t.kt)("inlineCode",{parentName:"h2"},"UseEntry")," ",(0,t.kt)("a",p({parentName:"h2"},{href:"#useentry","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"object")," ",(0,t.kt)("inlineCode",{parentName:"p"},"function(info)")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},(0,t.kt)("inlineCode",{parentName:"strong"},"object"))),(0,t.kt)("p",null,"必须有一个 ",(0,t.kt)("inlineCode",{parentName:"p"},"loader")," 属性是字符串。它使用 loader 解析选项（",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/resolve#resolveloader"}),"resolveLoader"),"），相对于配置中的 ",(0,t.kt)("a",p({parentName:"p"},{href:"/configuration/entry-context#context"}),(0,t.kt)("inlineCode",{parentName:"a"},"context"))," 来解析。"),(0,t.kt)("p",null,"可以有一个 ",(0,t.kt)("inlineCode",{parentName:"p"},"options")," 属性为字符串或对象。值可以传递到 loader 中，将其理解为 loader 选项。"),(0,t.kt)("p",null,"由于兼容性原因，也可能有 ",(0,t.kt)("inlineCode",{parentName:"p"},"query")," 属性，它是 ",(0,t.kt)("inlineCode",{parentName:"p"},"options")," 属性的别名。使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"options")," 属性替代。"),(0,t.kt)("p",null,"注意，webpack 需要生成资源和所有 loader 的独立模块标识，包括选项。\n它尝试对选项对象使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"JSON.stringify"),"。这在 99.9% 的情况下是可以的，\n但是如果将相同的 loader 应用于相同资源的不同选项，并且选项具有一些带字符的值，则可能不是唯一的。"),(0,t.kt)("p",null,"如果选项对象不被字符化（例如循环 JSON），它也会中断。因此，你可以在选项对象使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"ident")," 属性，\n作为唯一标识符。"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        loader",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'css-loader'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        options",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          modules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"true"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},(0,t.kt)("inlineCode",{parentName:"strong"},"function(info)"))),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"UseEntry")," 也可以是一个函数，接受对象参数，描述被加载的模块，而且必须返回一个参数对象。\n这可用于按模块更改 loader 选项。"),(0,t.kt)("p",null,(0,t.kt)("inlineCode",{parentName:"p"},"info")," 对象参数有以下的字段："),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"compiler"),": 当前 webpack 的编译器（可以是 undefined 值）"),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"issuer"),": 模块的路径，该元素正在导入一个被加载的模块(resource)"),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"realResource"),": 总会是被加载模块的路径"),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"resource"),": 被加载的模块路径，它常常与 ",(0,t.kt)("inlineCode",{parentName:"li"},"realResource")," 相等，只有当资源名称被 request 字符串中的 ",(0,t.kt)("inlineCode",{parentName:"li"},"!=!")," 覆盖时才不相等")),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    rules",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        loader",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'file-loader'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        options",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          outputPath",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'svgs'"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token parameter"}),"info"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=>")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n        loader",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'svgo-loader'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n        options",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n          plugins",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"["),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n            cleanupIDs",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{")," prefix",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token function"}),"basename"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"("),"info",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"resource",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n          ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n        ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("h2",p({},{id:"module-contexts"}),"模块上下文(Module Contexts) ",(0,t.kt)("a",p({parentName:"h2"},{href:"#module-contexts","aria-hidden":"true",tabIndex:-1}),(0,t.kt)("span",p({parentName:"a"},{className:"header-link"})))),(0,t.kt)("blockquote",null,(0,t.kt)("p",{parentName:"blockquote"},"避免使用这些选项，因为它们 ",(0,t.kt)("strong",{parentName:"p"},"已废弃"),"，并将很快删除。")),(0,t.kt)("p",null,"这些选项描述了当遇到动态依赖时，创建上下文的默认设置。"),(0,t.kt)("p",null,"例如，",(0,t.kt)("inlineCode",{parentName:"p"},"未知的(unknown)")," 动态依赖：",(0,t.kt)("inlineCode",{parentName:"p"},"require"),"。"),(0,t.kt)("p",null,"例如，",(0,t.kt)("inlineCode",{parentName:"p"},"表达式(expr)")," 动态依赖：",(0,t.kt)("inlineCode",{parentName:"p"},"require(expr)"),"。"),(0,t.kt)("p",null,"例如，",(0,t.kt)("inlineCode",{parentName:"p"},"包裹的(wrapped)")," 动态依赖：",(0,t.kt)("inlineCode",{parentName:"p"},"require('./templates/' + expr)"),"。"),(0,t.kt)("p",null,"以下是其",(0,t.kt)("a",p({parentName:"p"},{href:"https://github.com/webpack/webpack/blob/master/lib/config/defaults.js"}),"默认值"),"的可用选项"),(0,t.kt)("p",null,(0,t.kt)("strong",{parentName:"p"},"webpack.config.js"/*tpa=https://webpack.docschina.org/webpack.config.js*/)),(0,t.kt)("pre",null,(0,t.kt)("code",p({parentName:"pre"},{className:"hljs language-javascript"}),"module",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"."),"exports ",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),"=")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"//..."),"\n  module",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"{"),"\n    exprContextCritical",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"true"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    exprContextRecursive",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"true"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    exprContextRegExp",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    exprContextRequest",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'.'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    unknownContextCritical",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"true"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    unknownContextRecursive",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"true"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    unknownContextRegExp",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    unknownContextRequest",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token string"}),"'.'"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    wrappedContextCritical",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    wrappedContextRecursive",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"true"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    wrappedContextRegExp",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token regex"}),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-source language-regex"}),".*"),(0,t.kt)("span",p({parentName:"span"},{className:"token regex-delimiter"}),"/")),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),","),"\n    strictExportPresence",(0,t.kt)("span",p({parentName:"code"},{className:"token operator"}),":")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token boolean"}),"false")," ",(0,t.kt)("span",p({parentName:"code"},{className:"token comment"}),"// since webpack 2.3.0"),"\n  ",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),"\n",(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),"}"),(0,t.kt)("span",p({parentName:"code"},{className:"token punctuation"}),";"))),(0,t.kt)("blockquote",p({},{className:"tip"}),(0,t.kt)("p",{parentName:"blockquote"},"你可以使用 ",(0,t.kt)("inlineCode",{parentName:"p"},"ContextReplacementPlugin")," 来修改这些单个依赖的值。这也会删除警告。")),(0,t.kt)("p",null,"几个用例："),(0,t.kt)("ul",null,(0,t.kt)("li",{parentName:"ul"},"动态依赖的警告：",(0,t.kt)("inlineCode",{parentName:"li"},"wrappedContextCritical: true"),"。"),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"require(expr)")," 应该包含整个目录：",(0,t.kt)("inlineCode",{parentName:"li"},"exprContextRegExp: /^\\.\\//")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},'require("./templates/" + expr)')," 不应该包含默认子目录：",(0,t.kt)("inlineCode",{parentName:"li"},"wrappedContextRecursive: false")),(0,t.kt)("li",{parentName:"ul"},(0,t.kt)("inlineCode",{parentName:"li"},"strictExportPresence")," 将缺失的导出提示成错误而不是警告"),(0,t.kt)("li",{parentName:"ul"},"为部分动态依赖项设置内部正则表达式：",(0,t.kt)("inlineCode",{parentName:"li"},"wrappedContextRegExp: /\\\\.\\\\*/"))))}c.isMDXComponent=!0}}]);