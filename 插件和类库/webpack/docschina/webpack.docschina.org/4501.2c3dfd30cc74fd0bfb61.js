(self.webpackChunk=self.webpackChunk||[]).push([[4501],{4501:function(n){n.exports='<p><a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> å¯ç”¨äºå¿«é€Ÿå¼€å‘åº”ç”¨ç¨‹åºã€‚è¯·æŸ¥é˜… <a href="guides/development/index.htm"/*tpa=https://webpack.docschina.org/guides/development/*/>å¼€å‘æŒ‡å—</a> å¼€å§‹ä½¿ç”¨ã€‚</p> <p>å½“å‰é¡µé¢è®°å½•äº†å½±å“ <code>webpack-dev-server</code> (ç®€å†™: <code>dev-server</code>)é…ç½®çš„é€‰é¡¹ã€‚</p> <blockquote class="tip"> <p>ä¸ <a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a> å…¼å®¹çš„é…ç½®é¡¹åé¢ ğŸ”‘ æ ‡è®°ã€‚</p> </blockquote> <h2 id="devserver">å¼€å‘æœåŠ¡å™¨(<code>devServer</code>) <a href="#devserver" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>object</code></p> <p>é€šè¿‡ <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> çš„è¿™äº›é…ç½®ï¼Œèƒ½å¤Ÿä»¥å¤šç§æ–¹å¼æ”¹å˜å…¶è¡Œä¸ºã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œåˆ©ç”¨ <code>gzips</code> å‹ç¼© <code>dist/</code> ç›®å½•å½“ä¸­çš„æ‰€æœ‰å†…å®¹å¹¶æä¾›ä¸€ä¸ªæœ¬åœ°æœåŠ¡(serve)ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript"><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'dist\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    port<span class="token operator">:</span> <span class="token number">9000</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>å½“æœåŠ¡(<code>server</code>)å¯åŠ¨åï¼Œåœ¨è§£ææ¨¡å—åˆ—è¡¨ä¹‹å‰è¾“å‡ºä¸€æ¡æ¶ˆæ¯ï¼š</p> <pre><code class="hljs language-bash">http://localhost:9000/\nwebpack output is served from /build/\nContent not from webpack is served from /path/to/dist/</code></pre> <p>è¿™é‡Œå°†ä¼šç»™å‡ºæœåŠ¡å¯åŠ¨ä½ç½®ä»¥åŠå†…å®¹çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚</p> <p>å¦‚æœä½ é€šè¿‡ Node.js API ä½¿ç”¨ dev-serverï¼Œåˆ™ <code>devServer</code> ä¸­çš„é…ç½®é€‰é¡¹å°†è¢«å¿½ç•¥ã€‚ä½†å¯ä»¥å°†é…ç½®é€‰é¡¹ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ï¼š<code>new WebpackDevServer(compilerï¼Œ{...})</code>ã€‚<a href="https://github.com/webpack/webpack-dev-server/tree/master/examples/api/simple">æ­¤ç¤ºä¾‹</a>å±•ç¤ºäº†å¦‚ä½•é€šè¿‡ Node.js API ä½¿ç”¨ webpack-dev-serverã€‚</p> <blockquote class="warning"> <p>ä½¿ç”¨ <code>WebpackDevServer</code> æ—¶ï¼Œä¸èƒ½ä½¿ç”¨ç¬¬äºŒä¸ª <code>compiler</code> å‚æ•°ï¼ˆä¸€ä¸ªå›è°ƒï¼‰ã€‚</p> </blockquote> <blockquote class="warning"> <p>è¯·æ³¨æ„ï¼Œå½“<a href="configuration/configuration-types/index.htm#exporting-multiple-configurations"/*tpa=https://webpack.docschina.org/configuration/configuration-types/#exporting-multiple-configurations*/>å¯¼å‡ºå¤šä¸ªé…ç½®å¯¹è±¡</a>æ—¶ï¼Œåªä¼šä½¿ç”¨ <code>devServer</code> çš„ç¬¬ä¸€ä¸ªé…ç½®é€‰é¡¹ï¼Œå¹¶å°†å…¶åº”ç”¨äºæ‰€æœ‰çš„é…ç½®å½“ä¸­ã€‚</p> </blockquote> <blockquote class="tip"> <p>å¦‚æœä½ ç¢°åˆ°äº†é—®é¢˜ï¼Œè¯·å°†è·¯ç”±å¯¼èˆªè‡³ <code>/webpack-dev-server</code> å°†ä¼šä¸ºä½ å±•ç¤ºæœåŠ¡æ–‡ä»¶çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼š <code>http://localhost:9000/webpack-dev-server</code>ã€‚</p> </blockquote> <blockquote class="tip"> <p>å¦‚æœä½ éœ€è¦è¦æ‰‹åŠ¨é‡æ–°ç¼–è¯‘ <code>bundle</code>ï¼Œå°†è·¯ç”±å¯¼èˆªè‡³ <code>/invalidate</code> ä½¿å½“å‰ç¼–è¯‘çš„ <code>bundle</code> æ— æ•ˆï¼Œå¹¶é€šè¿‡ <a href="https://github.com/webpack/webpack-dev-middleware#invalidate">webpack-dev-middleware</a> ä¸ºä½ é‡æ–°ç¼–è¯‘ã€‚æ ¹æ®ä½ çš„é…ç½®ï¼ŒURL å¯èƒ½çœ‹èµ·æ¥åƒ <code>http://localhost:9000/invalidate</code>ã€‚</p> </blockquote> <blockquote class="tip"> <p>å½“å¯åŠ¨æœ¬åœ°æœåŠ¡çš„æ—¶å€™ HTML æ¨¡æ¿æ˜¯å¿…é¡»æä¾›çš„ï¼Œé€šå¸¸æ˜¯ <code>index.html</code>ã€‚ç¡®ä¿å°†è„šæœ¬å¼•ç”¨æ·»åŠ åˆ° HTML ä¸­ï¼Œwebpack-dev-server ä¸ä¼šè‡ªåŠ¨æ³¨å…¥å®ƒä»¬ã€‚</p> </blockquote> <h2 id="devserverafter"><code>devServer.after</code> <a href="#devserverafter" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>function (app, server, compiler)</code></p> <p>æä¾›è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼Œå½“ <code>devServer</code> æœåŠ¡å™¨å†…éƒ¨çš„ æ‰€æœ‰ä¸­é—´ä»¶æ‰§è¡Œå®Œæˆä¹‹åæ‰§è¡Œ</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">after</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app<span class="token punctuation">,</span> server<span class="token punctuation">,</span> compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token comment">// do fancy stuff</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserverallowedhosts"><code>devServer.allowedHosts</code> <a href="#devserverallowedhosts" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>[string]</code></p> <p>è¯¥é€‰é¡¹å…è®¸å°†å…è®¸è®¿é—®å¼€å‘æœåŠ¡å™¨çš„æœåŠ¡åˆ—å…¥ç™½åå•ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    allowedHosts<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token string">\'https://webpack.docschina.org/host.com\'</span><span class="token punctuation">,</span>\n      <span class="token string">\'https://webpack.docschina.org/subdomain.host.com\'</span><span class="token punctuation">,</span>\n      <span class="token string">\'https://webpack.docschina.org/subdomain2.host.com\'</span><span class="token punctuation">,</span>\n      <span class="token string">\'https://webpack.docschina.org/host2.com\'</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>æ¨¡ä»¿ django çš„<code>ALLOWED_HOSTS</code>ï¼Œç”¨ <code>.</code> ä½œä¸ºå­åŸŸé€šé…ç¬¦ã€‚<code>.host.com</code> ä¼šä¸ <code>host.com</code>ï¼Œ<code>www.host.com</code> ä»¥åŠ <code>host.com</code> ç­‰å…¶ä»–ä»»ä½•å…¶ä»–å­åŸŸåŒ¹é…ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token comment">// this achieves the same effect as the first example</span>\n    <span class="token comment">// with the bonus of not having to update your config</span>\n    <span class="token comment">// if new subdomains need to access the dev server</span>\n    allowedHosts<span class="token operator">:</span> <span class="token punctuation">[</span>\n      <span class="token string">\'https://webpack.docschina.org/.host.com\'</span><span class="token punctuation">,</span>\n      <span class="token string">\'https://webpack.docschina.org/host2.com\'</span>\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>è¦å°†è¿™ä¸ªé€‰é¡¹ä¸ CLI ä¸€èµ·ä½¿ç”¨ï¼Œè¯·å°† <code>--allowed-hosts</code> çš„è½¬æ¢ä¸ºç”¨é€—å·åˆ†å‰²çš„å­—ç¬¦ä¸²å¹¶ä¼ å…¥ã€‚</p> <pre><code class="hljs language-bash">webpack serve --entry ./entry/file --output-path ./output/path --allowed-hosts .host.com,host2.com</code></pre> <h2 id="devserverbefore"><code>devServer.before</code> <a href="#devserverbefore" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>function (app, server, compiler)</code></p> <p>æä¾›äº†ä¸€ä¸ªåœ¨ <code>devServer</code> å†…éƒ¨çš„ æ‰€æœ‰ä¸­é—´ä»¶æ‰§è¡Œä¹‹å‰çš„è‡ªå®šä¹‰æ‰§è¡Œå‡½æ•°ã€‚ ä¾‹ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">before</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app<span class="token punctuation">,</span> server<span class="token punctuation">,</span> compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'/some/path\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> custom<span class="token operator">:</span> <span class="token string">\'response\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserverbonjour"><code>devServer.bonjour</code> <a href="#devserverbonjour" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = false</code></p> <p>è¿™ä¸ªé…ç½®ç”¨äºåœ¨å¯åŠ¨æ—¶é€šè¿‡ <a href="http://www.zeroconf.org/">ZeroConf</a> ç½‘ç»œå¹¿æ’­ä½ çš„å¼€å‘æœåŠ¡å™¨ï¼Œç”¨äºæœåŠ¡å‘ç°ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    bonjour<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --bonjour</code></pre> <h2 id="devserverclientloglevel"><code>devServer.clientLogLevel</code> <a href="#devserverclientloglevel" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string = \'info\': \'silent\' | \'trace\' | \'debug\' | \'info\' | \'warn\' | \'error\' | \'none\' | \'warning\'</code></p> <blockquote class="warning"> <p><code>none</code> å’Œ <code>warning</code> å°†åœ¨ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¸­å¼ƒç”¨ã€‚</p> </blockquote> <p>å½“ä½¿ç”¨ <em>inline mode</em> æ—¶ï¼Œ DevTools ä¼šè¾“å‡ºä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šé‡æ–°åŠ è½½ä¹‹å‰ï¼Œå‡ºé”™ä¹‹å‰æˆ– <a href="concepts/hot-module-replacement/index.htm"/*tpa=https://webpack.docschina.org/concepts/hot-module-replacement/*/>Hot Module Replacement</a> è¢«å¼€å¯æ—¶ã€‚</p> <p><code>devServer.clientLogLevel</code> å¯èƒ½ä¼šå¯¼è‡´æ—¥å¿—è¿‡äºå†—ä½™ï¼Œä½ å¯ä»¥é€šè¿‡å°†å…¶è®¾ç½®ä¸º <code>\'silent\'</code> æ¥å…³é—­æ—¥å¿—ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    clientLogLevel<span class="token operator">:</span> <span class="token string">\'silent\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --client-log-level silent</code></pre> <h2 id="devservercompress"><code>devServer.compress</code> <a href="#devservercompress" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>ä¸ºæ¯ä¸ªé™æ€æ–‡ä»¶å¼€å¯ <a href="https://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/">gzip compression</a>ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    compress<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --compress</code></pre> <h2 id="devservercontentbase"><code>devServer.contentBase</code> <a href="#devservercontentbase" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean: false</code> <code>string</code> <code>[string]</code> <code>number</code></p> <p>å‘Šè¯‰æœåŠ¡å™¨å†…å®¹çš„æ¥æºã€‚ä»…åœ¨éœ€è¦æä¾›é™æ€æ–‡ä»¶æ—¶æ‰è¿›è¡Œé…ç½®ã€‚<a href="#devserverpublicpath-"><code>devServer.publicPath</code></a> å°†ç”¨äºç¡®å®š bundle çš„æ¥æºï¼Œå¹¶å…·æœ‰ä¼˜å…ˆçº§é«˜äº contentBaseã€‚</p> <blockquote class="tip"> <p>å»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚</p> </blockquote> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå°†ä½¿ç”¨å½“å‰çš„å·¥ä½œç›®å½•æ¥æä¾›å†…å®¹ã€‚ è¦ç¦ç”¨ <code>contentBase</code> ï¼Œè¯·å°†å…¶è®¾ç½®ä¸º <code>false</code> ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'public\'</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>å¦‚æœæƒ³ä½¿ç”¨ <a href="#devservercontentbasepublicpath"><code>contentBasePublicPath</code></a> åœ¨å¤šä¸ª URL ä¸Šæä¾›é™æ€å†…å®¹ï¼Œä¹Ÿå¯ä»¥ä»å¤šä¸ªç›®å½•æä¾›æœåŠ¡ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    contentBase<span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'public\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'assets\'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --content-base ./path/to/content/dir</code></pre> <h2 id="devservercontentbasepublicpath"><code>devServer.contentBasePublicPath</code> <a href="#devservercontentbasepublicpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string = \'/\'</code> <code>[string]</code></p> <p>å‘Šè¯‰æœåŠ¡å™¨ä½¿ç”¨å“ªä¸ª URL æœåŠ¡ <code>devServer.contentBase</code> é™æ€å†…å®¹ã€‚å¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶ <code>assets/manifest.json</code> ï¼Œå®ƒå°†åœ¨ <code>/serve-content-base-at-this-url/manifest.json</code> ä¸­æä¾›ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'assets\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    contentBasePublicPath<span class="token operator">:</span> <span class="token string">\'/serve-content-base-at-this-url\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>å¦‚æœåœ¨ <a href="#devservercontentbase"><code>contentBase</code></a> ä¸­è®¾ç½®äº†å¤šä¸ªé™æ€æ–‡ä»¶å¤¹ï¼Œè¯·æä¾›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    contentBase<span class="token operator">:</span> <span class="token punctuation">[</span>contentBasePublic<span class="token punctuation">,</span> contentBaseOther<span class="token punctuation">]</span><span class="token punctuation">,</span>\n    contentBasePublicPath<span class="token operator">:</span> <span class="token punctuation">[</span>\n      contentBasePublicPath<span class="token punctuation">,</span>\n      contentBasePublicOtherPath\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserverdisablehostcheck"><code>devServer.disableHostCheck</code> <a href="#devserverdisablehostcheck" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>å½“å°†æ­¤é¡¹é…ç½®è®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œå°†ä¼šè·³è¿‡ host æ£€æŸ¥. <strong>è¿™æ˜¯ä¸æ¨èçš„</strong> å› ä¸ºä¸æ£€æŸ¥hostçš„åº”ç”¨å®¹æ˜“å—åˆ°DNSé‡æ–°ç»‘å®šæ”»å‡»ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    disableHostCheck<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --disable-host-check</code></pre> <h2 id="devserverfilename-"><code>devServer.filename</code> ğŸ”‘ <a href="#devserverfilename-" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string</code></p> <p>æ­¤é€‰é¡¹å¯ä»¥å‡å°‘åœ¨ <a href="#devserverlazy-">lazy æ¨¡å¼</a>ä¸­çš„ç¼–è¯‘æ“ä½œã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ <a href="#devserverlazy-">lazy æ¨¡å¼</a>ä¸­ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½è§¦å‘æ–°çš„ç¼–è¯‘ã€‚ä½¿ç”¨ <code>filename</code> ä»…å½“è¯·æ±‚æŸä¸ªæ–‡ä»¶æ—¶æ‰å¯æ‰§è¡Œç¼–è¯‘ã€‚</p> <p>å¦‚æœ <a href="configuration/output/index.htm#outputfilename"/*tpa=https://webpack.docschina.org/configuration/output/#outputfilename*/><code>output.filename</code></a> è®¾ç½®ä¸º<code>\'bundle.js\'/*tpa=https://webpack.docschina.org/bundle.js*/</code>ï¼Œåˆ™ä½¿ç”¨ <code>devServer.filename</code> å¦‚ä¸‹ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  output<span class="token operator">:</span> <span class="token punctuation">{</span>\n    filename<span class="token operator">:</span> <span class="token string">\'bundle.js\'/*tpa=https://webpack.docschina.org/bundle.js*/</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    lazy<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    filename<span class="token operator">:</span> <span class="token string">\'bundle.js\'/*tpa=https://webpack.docschina.org/bundle.js*/</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>ç°åœ¨å®ƒå°†ä»…åœ¨è¯·æ±‚ <code>/bundle.js</code> æ—¶ç¼–è¯‘è¯¥æ†ç»‘è½¯ä»¶ã€‚</p> <blockquote class="tip"> <p>å½“ä¸ä½¿ç”¨ <a href="#devserverlazy-">lazy æ¨¡å¼</a>æ—¶ï¼Œ<code>filename</code> ä¸ä¼šç”Ÿæ•ˆ.</p> </blockquote> <h2 id="devserverheaders-"><code>devServer.headers</code> ğŸ”‘ <a href="#devserverheaders-" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>object</code></p> <p>ä¸ºæ‰€æœ‰è¯·æ±‚æ·»åŠ å“åº”æ ‡å¤´ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    headers<span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token string">\'X-Custom-Foo\'</span><span class="token operator">:</span> <span class="token string">\'bar\'</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserverhistoryapifallback"><code>devServer.historyApiFallback</code> <a href="#devserverhistoryapifallback" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = false</code> <code>object</code></p> <p>å½“ä½¿ç”¨ <a href="https://developer.mozilla.org/en-US/docs/Web/API/History">HTML5 History API</a> æ—¶, æ‰€æœ‰çš„ <code>404</code> è¯·æ±‚éƒ½ä¼šå“åº” <code>index.html</code> çš„å†…å®¹ã€‚ å°† <code>devServer.historyApiFallback</code> è®¾ä¸º <code>true</code>å¼€å¯ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    historyApiFallback<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡ä¼ é€’å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨é…ç½®é€‰é¡¹è¯¸å¦‚ <code>rewrites</code>:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    historyApiFallback<span class="token operator">:</span> <span class="token punctuation">{</span>\n      rewrites<span class="token operator">:</span> <span class="token punctuation">[</span>\n        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\/$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">\'https://webpack.docschina.org/views/landing.html\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\/subpage</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">\'https://webpack.docschina.org/views/subpage.html\'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> to<span class="token operator">:</span> <span class="token string">\'https://webpack.docschina.org/views/404.html\'</span> <span class="token punctuation">}</span>\n      <span class="token punctuation">]</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>åœ¨è·¯å¾„ä¸­ä½¿ç”¨ç‚¹æ—¶ï¼ˆä¸ Angular ç›¸åŒï¼‰ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ <code>disableDotRule</code>ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    historyApiFallback<span class="token operator">:</span> <span class="token punctuation">{</span>\n      disableDotRule<span class="token operator">:</span> <span class="token boolean">true</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --history-api-fallback</code></pre> <p>æœ‰å…³æ›´å¤šé€‰é¡¹å’Œä¿¡æ¯ï¼Œè¯·å‚è§ <a href="https://github.com/bripkens/connect-history-api-fallback">connect-history-api-fallback</a> æ–‡æ¡£ã€‚</p> <h2 id="devserverhost"><code>devServer.host</code> <a href="#devserverhost" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string = \'localhost\'</code></p> <p>æŒ‡å®šè¦ä½¿ç”¨çš„ hostã€‚å¦‚æœä½ å¸Œæœ›æœåŠ¡å™¨å¯ä»å¤–éƒ¨è®¿é—®ï¼Œè¯·æŒ‰ä»¥ä¸‹æ–¹å¼è¿›è¡Œé…ç½®ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    host<span class="token operator">:</span> <span class="token string">\'0.0.0.0\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --host <span class="token number">0.0</span>.0.0</code></pre> <h2 id="devserverhot"><code>devServer.hot</code> <a href="#devserverhot" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>å¯ç”¨ webpack çš„ <a href="concepts/hot-module-replacement/index.htm"/*tpa=https://webpack.docschina.org/concepts/hot-module-replacement/*/>Hot Module Replacement</a> åŠŸèƒ½ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    hot<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <blockquote class="tip"> <p>è¯·æ³¨æ„ï¼Œè¦å®Œå…¨å¯ç”¨ HMR ï¼Œéœ€è¦ <a href="plugins/hot-module-replacement-plugin/index.htm"/*tpa=https://webpack.docschina.org/plugins/hot-module-replacement-plugin/*/><code>webpack.HotModuleReplacementPlugin</code></a>ã€‚å¦‚æœä½¿ç”¨ --hot é€‰é¡¹å¯åŠ¨ <code>webpack</code> æˆ– <code>webpack-dev-server</code>ï¼Œè¯¥æ’ä»¶å°†è‡ªåŠ¨æ·»åŠ ï¼Œå› æ­¤ä½ å¯èƒ½ä¸éœ€è¦å°†å…¶æ·»åŠ åˆ° <code>webpack.config.js</code> ä¸­ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ <a href="concepts/hot-module-replacement/index.htm"/*tpa=https://webpack.docschina.org/concepts/hot-module-replacement/*/>HMR æ¦‚è§ˆç« èŠ‚</a>ã€‚</p> </blockquote> <h2 id="devserverhotonly"><code>devServer.hotOnly</code> <a href="#devserverhotonly" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>å¯ç”¨çƒ­æ¨¡å—æ›¿æ¢ï¼ˆè¯·å‚è§ <a href="#devserverhot"><code>devServer.hot</code></a> ï¼‰ï¼Œè€Œæ— éœ€é¡µé¢åˆ·æ–°ä½œä¸ºæ„å»ºå¤±è´¥æ—¶çš„å›é€€ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    hotOnly<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --hot only</code></pre> <h2 id="devserverhttp2"><code>devServer.http2</code> <a href="#devserverhttp2" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = false</code></p> <p>ä½¿ç”¨ <a href="https://www.npmjs.com/package/spdy">spdy</a> æä¾› HTTP/2 æœåŠ¡ã€‚å¯¹äº Node 10.0.0 åŠæ›´é«˜ç‰ˆæœ¬ï¼Œæ­¤é€‰é¡¹å°†è¢«å¿½ç•¥ï¼Œå› ä¸º spdy åœ¨è¿™äº›ç‰ˆæœ¬ä¸­å·²è¢«ç ´åã€‚ä¸€æ—¦ <a href="https://expressjs.com/">Express</a> æ”¯æŒï¼Œå¼€å‘æœåŠ¡å™¨å°†è¿ç§»åˆ° Node å†…ç½®çš„ HTTP/2ã€‚</p> <p>å¦‚æœæœªå°† <code>devServer.http2</code> æ˜¾å¼è®¾ç½®ä¸º false ï¼Œåˆ™åœ¨å¯ç”¨ <a href="#devserverhttps"><code>devServer.https</code></a> æ—¶å°†é»˜è®¤ä¸º true ã€‚ å¦‚æœå¯ç”¨ <code>devServer.http2</code>ï¼Œä½†æœåŠ¡å™¨æ— æ³•é€šè¿‡ HTTP/2 æä¾›æœåŠ¡ï¼Œåˆ™æœåŠ¡å™¨é»˜è®¤ä¸º HTTPSã€‚</p> <p>HTTP/2 å¸¦æœ‰è‡ªç­¾åè¯ä¹¦ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    http2<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡ <a href="#devserverhttps">https</a> é…ç½®ä½ è‡ªå·±çš„è¯ä¹¦æ–‡ä»¶:</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    http2<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    https<span class="token operator">:</span> <span class="token punctuation">{</span>\n      key<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">\'https://webpack.docschina.org/path/to/server.key\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      cert<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">\'https://webpack.docschina.org/path/to/server.crt\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      ca<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">\'https://webpack.docschina.org/path/to/ca.pem\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --http2</code></pre> <p>è¦é€šè¿‡CLIä½¿ç”¨è‡ªå·±çš„è¯ä¹¦ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹</p> <pre><code class="hljs language-bash">webpack serve --http2 --key ./path/to/server.key --cert ./path/to/server.crt --cacert ./path/to/ca.pem</code></pre> <h2 id="devserverhttps"><code>devServer.https</code> <a href="#devserverhttps" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code> <code>object</code></p> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¼€å‘æœåŠ¡å™¨å°†é€šè¿‡HTTPæä¾›æœåŠ¡ã€‚å¯ä»¥é€‰æ‹©ä½¿ç”¨HTTPSé€šè¿‡HTTP/2æä¾›æœåŠ¡ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    https<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>æ ¹æ®ä¸Šè¿°é…ç½®ï¼Œå°†ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥æä¾›è‡ªå·±çš„è¯ä¹¦ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    https<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    key<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">\'https://webpack.docschina.org/path/to/server.key\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    cert<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">\'https://webpack.docschina.org/path/to/server.crt\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    ca<span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">\'https://webpack.docschina.org/path/to/ca.pem\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>è¯¥å¯¹è±¡ç›´æ¥ä¼ é€’åˆ° Node.js HTTPS æ¨¡å—ï¼Œå› æ­¤è¯·å‚é˜… <a href="https://nodejs.org/api/https.html">HTTPS documentation</a> ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚</p> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --https</code></pre> <p>è¦é€šè¿‡ CLI ä½¿ç”¨è‡ªå·±çš„è¯ä¹¦ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹</p> <pre><code class="hljs language-bash">webpack serve --https --key ./path/to/server.key --cert ./path/to/server.crt --cacert ./path/to/ca.pem</code></pre> <h2 id="devserverindex"><code>devServer.index</code> <a href="#devserverindex" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string</code></p> <p>è®¾ç½® index æ–‡ä»¶çš„æ–‡ä»¶åã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    index<span class="token operator">:</span> <span class="token string">\'https://webpack.docschina.org/index.html\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserverinfo---cli-only"><code>devServer.info</code> - CLI only <a href="#devserverinfo---cli-only" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>è¾“å‡º cli ä¿¡æ¯ã€‚é»˜è®¤æƒ…å†µä¸‹å¯ç”¨ã€‚</p> <pre><code class="hljs language-bash">webpack serve --info <span class="token boolean">false</span></code></pre> <h2 id="devserverinjectclient"><code>devServer.injectClient</code> <a href="#devserverinjectclient" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = false</code> <code>function (compilerConfig) => boolean</code></p> <p>å‘ <code>devServer</code> æ³¨å…¥ä¸€ä¸ªå®¢æˆ·ç«¯ã€‚è®¾ç½® <code>devServer.injectClient</code> å€¼ä¸º <code>true</code> æ—¶ï¼Œä¼šå‘æœåŠ¡æ³¨å…¥å®¢æˆ·ç«¯ã€‚ä¹Ÿå¯ä»¥è®¾ç½®æ¡ä»¶æ³¨å…¥å‡½æ•°ï¼š</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">injectClient</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">compilerConfig</span><span class="token punctuation">)</span> <span class="token operator">=></span> compilerConfig<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">\'only-include\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserverinjecthot"><code>devServer.injectHot</code> <a href="#devserverinjecthot" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = false</code> <code>function (compilerConfig) => boolean</code></p> <p>å‘Šè¯‰ <code>devServer</code> æ³¨å…¥çƒ­æ¨¡å—æ›¿æ¢ã€‚è®¾ç½® <code>devServer.injectHot</code> å€¼ä¸º <code>true</code> æ—¶ï¼Œä¼šå§‹ç»ˆæ³¨å…¥ã€‚ä¹Ÿå¯ä»¥è®¾ç½®æ¡ä»¶æ³¨å…¥å‡½æ•°ï¼š</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">injectHot</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">compilerConfig</span><span class="token punctuation">)</span> <span class="token operator">=></span> compilerConfig<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">\'only-include\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <blockquote class="warning"> <p>ä½¿ç”¨å‰è¯·ç¡®ä¿ <a href="#devserverhot"><code>devServer.hot</code></a> çš„å€¼è®¾ç½®ä¸º <code>true</code>ï¼Œå› ä¸º <code>devServer.injectHot</code> ä»…é€‚ç”¨äº HMRã€‚</p> </blockquote> <h2 id="devserverinline"><code>devServer.inline</code> <a href="#devserverinline" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>åœ¨å¼€å‘æœåŠ¡å™¨çš„ä¸¤ç§ä¸åŒæ¨¡å¼ä¹‹é—´åˆ‡æ¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºå°†å¯ç”¨ <strong>inlineæ¨¡å¼</strong>ã€‚è¿™æ„å‘³ç€å°†åœ¨ bundle ä¸­æ’å…¥è„šæœ¬ä»¥è¿›è¡Œå®æ—¶é‡æ–°åŠ è½½ï¼Œå¹¶ä¸”æ„å»ºæ¶ˆæ¯å°†å‡ºç°åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­ã€‚</p> <p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>iframeæ¨¡å¼</strong>ï¼Œå®ƒåœ¨é€šçŸ¥æ ä¸‹ä½¿ç”¨å¸¦æœ‰æœ‰å…³æ„å»ºæ¶ˆæ¯çš„<code>&#x3C;iframe></code>ã€‚ åˆ‡æ¢åˆ° <strong>iframeæ¨¡å¼</strong>ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    inline<span class="token operator">:</span> <span class="token boolean">false</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --inline <span class="token boolean">false</span></code></pre> <blockquote class="tip"> <p>å¯¹äº <a href="plugins/hot-module-replacement-plugin/index.htm"/*tpa=https://webpack.docschina.org/plugins/hot-module-replacement-plugin/*/>Hot Module Replacement</a> ï¼Œå»ºè®®ä½¿ç”¨ä¸²è”æ¨¡å¼ï¼Œå› ä¸ºå®ƒåŒ…å«æ¥è‡ª websocket çš„ HMR è§¦å‘å™¨ã€‚ è½®è¯¢æ¨¡å¼å¯ä»¥ç”¨ä½œæ›¿ä»£æ–¹æ³•ï¼Œä½†éœ€è¦é™„åŠ çš„å…¥å£ç‚¹<code>\'webpack/hot/poll?1000\'</code>ã€‚</p> </blockquote> <h2 id="devserverlazy-"><code>devServer.lazy</code> ğŸ”‘ <a href="#devserverlazy-" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>å¯ç”¨ <code>devServer.lazy</code> æ—¶ï¼Œå¼€å‘æœåŠ¡å™¨ä»…åœ¨æ”¶åˆ°è¯·æ±‚æ—¶æ‰ç¼–è¯‘æ†ç»‘è½¯ä»¶ã€‚ è¿™æ„å‘³ç€webpackå°†ä¸ä¼šç›‘è§†ä»»ä½•æ–‡ä»¶æ›´æ”¹ã€‚ æˆ‘ä»¬ç§°è¿™ç§æ–¹å¼ä¸ºâ€œæ‡’æƒ°æ¨¡å¼(<strong>lazy mode</strong>)â€ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    lazy<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --lazy</code></pre> <blockquote class="tip"> <p><a href="#devserverwatchoptions-"><code>watchOptions</code></a> ä¸ä¼šæœ‰ä»»ä½•å‰¯ä½œç”¨å½“ä½¿ç”¨ <strong>lazy mode</strong> æ—¶ã€‚</p> </blockquote> <blockquote class="tip"> <p>å¦‚æœæ˜¯é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨, è¯·ç¡®ä¿ <strong>inline mode</strong> å¤„äºç¦ç”¨çŠ¶æ€ã€‚</p> </blockquote> <h2 id="devserverlivereload"><code>devServer.liveReload</code> <a href="#devserverlivereload" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = true</code></p> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ£€æµ‹åˆ°æ–‡ä»¶æ›´æ”¹æ—¶ï¼Œå¼€å‘æœåŠ¡å™¨å°†é‡æ–°åŠ è½½/åˆ·æ–°é¡µé¢ã€‚ å¿…é¡»ç¦ç”¨ <a href="#devserverhot"><code>devServer.hot</code></a> é€‰é¡¹æˆ–å¿…é¡»å¯ç”¨ <a href="#devserverwatchcontentbase"><code>devServer.watchContentBase</code></a> é€‰é¡¹ï¼Œæ‰èƒ½ä½¿ liveReload ç”Ÿæ•ˆã€‚ é€šè¿‡å°†å…¶è®¾ç½®ä¸º false æ¥ç¦ç”¨ devServer.liveReloadï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    liveReload<span class="token operator">:</span> <span class="token boolean">false</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --no-live-reload</code></pre> <h2 id="devservermimetypes-"><code>devServer.mimeTypes</code> ğŸ”‘ <a href="#devservermimetypes-" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>object</code></p> <p>å…è®¸ dev-server æ³¨å†Œè‡ªå®šä¹‰çš„mimeç±»å‹ã€‚ è¯¥å¯¹è±¡è¢«ä¼ é€’åˆ°åº•å±‚çš„ <code>webpack-dev-middleware</code>ã€‚ æœ‰å…³ä½¿ç”¨è¯´æ˜ï¼Œè¯·å‚è§ <a href="https://github.com/webpack/webpack-dev-middleware#mimetypes">documentation</a> ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    mimeTypes<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">\'text/html\'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">\'phtml\'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devservernoinfo-"><code>devServer.noInfo</code> ğŸ”‘ <a href="#devservernoinfo-" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = false</code></p> <p>å‘Šè¯‰å¼€å‘æœåŠ¡å™¨ç¦æ­¢æ˜¾ç¤ºè¯¸å¦‚ Webpack æ†ç»‘åŒ…ä¿¡æ¯ä¹‹ç±»çš„æ¶ˆæ¯ã€‚ é”™è¯¯å’Œè­¦å‘Šä»å°†æ˜¾ç¤ºã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    noInfo<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserveronlistening"><code>devServer.onListening</code> <a href="#devserveronlistening" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>function (server)</code></p> <p>æä¾›ä¸€ä¸ªé€‰é¡¹ï¼Œå½“ <code>webpack-dev-server</code> å¼€å§‹ç›‘å¬ç«¯å£ä¸Šçš„è¿æ¥æ—¶ï¼Œæ‰§è¡Œè‡ªå®šä¹‰åŠŸèƒ½ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">onListening</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">const</span> port <span class="token operator">=</span> server<span class="token punctuation">.</span>listeningApp<span class="token punctuation">.</span><span class="token function">address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>port<span class="token punctuation">;</span>\n      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Listening on port:\'</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserveropen"><code>devServer.open</code> <a href="#devserveropen" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = false</code> <code>string</code> <code>object</code></p> <p>å‘Šè¯‰ dev-server åœ¨æœåŠ¡å™¨å¯åŠ¨åæ‰“å¼€æµè§ˆå™¨ã€‚ å°†å…¶è®¾ç½®ä¸º <code>true</code> ä»¥æ‰“å¼€é»˜è®¤æµè§ˆå™¨ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    open<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>æä¾›è¦ä½¿ç”¨çš„æµè§ˆå™¨åç§°ï¼Œè€Œä¸æ˜¯é»˜è®¤åç§°ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    open<span class="token operator">:</span> <span class="token string">\'Google Chrome\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>å¦‚æœè¦åœ¨æ‰“å¼€æµè§ˆå™¨æ—¶ä½¿ç”¨æ ‡å¿—ï¼Œä¾‹å¦‚æ‰“å¼€éšèº«çª—å£ï¼ˆ <code>--incognito</code> æ ‡å¿—ï¼‰ï¼Œåˆ™å¯ä»¥å°† <code>open</code> è®¾ç½®ä¸ºå¯¹è±¡ã€‚ è¯¥å¯¹è±¡æ¥å—æ‰€æœ‰ <a href="https://www.npmjs.com/package/open">open</a> é€‰é¡¹ï¼Œ<code>app</code> å±æ€§å¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¿…é¡»æ˜¯æµè§ˆå™¨åç§°ï¼Œå…¶ä»–åé¢çš„å…ƒç´ æ˜¯è¦ä½¿ç”¨çš„æ ‡å¿—ã€‚ ä¾‹å¦‚ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    open<span class="token operator">:</span> <span class="token punctuation">{</span>\n      app<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">\'Google Chrome\'</span><span class="token punctuation">,</span> <span class="token string">\'--incognito\'</span><span class="token punctuation">,</span> <span class="token string">\'--other-flag\'</span><span class="token punctuation">]</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --open <span class="token string">\'Google Chrome\'</span></code></pre> <blockquote class="tip"> <p>æµè§ˆå™¨åº”ç”¨ç¨‹åºåç§°å–å†³äºå¹³å°ã€‚ ä¸è¦åœ¨å¯é‡ç”¨æ¨¡å—ä¸­å¯¹å…¶è¿›è¡Œç¡¬ç¼–ç ã€‚ ä¾‹å¦‚ï¼Œ<code>\'Chrome\'</code> åœ¨macOSä¸Šæ˜¯ <code>\'Google Chrome\'</code> ï¼Œåœ¨Linuxä¸Šæ˜¯ <code>\'Google Chrome\'</code> åœ¨Windowsä¸Šæ˜¯ <code>\'Chrome\'</code> ã€‚</p> </blockquote> <h2 id="devserveropenpage"><code>devServer.openPage</code> <a href="#devserveropenpage" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string</code> <code>[string]</code></p> <p>æŒ‡å®šæ‰“å¼€æµè§ˆå™¨æ—¶è¦æµè§ˆçš„é¡µé¢ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    openPage<span class="token operator">:</span> <span class="token string">\'/different/page\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --open-page /different/page</code></pre> <p>å¦‚æœå¸Œæœ›æŒ‡å®šå¤šä¸ªé¡µé¢åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    openPage<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">\'/different/page1\'</span><span class="token punctuation">,</span> <span class="token string">\'/different/page2\'</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --open-page /different/page1,/different/page2</code></pre> <h2 id="devserveroverlay"><code>devServer.overlay</code> <a href="#devserveroverlay" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = false</code> <code>object: { errors boolean = false, warnings boolean = false }</code></p> <p>å‡ºç°ç¼–è¯‘å™¨é”™è¯¯æˆ–è­¦å‘Šæ—¶ï¼Œåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºå…¨å±è¦†ç›–ã€‚ å¦‚æœåªæƒ³æ˜¾ç¤ºç¼–è¯‘å™¨é”™è¯¯ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    overlay<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>å¦‚æœè¦æ˜¾ç¤ºè­¦å‘Šå’Œé”™è¯¯ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    overlay<span class="token operator">:</span> <span class="token punctuation">{</span>\n      warnings<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      errors<span class="token operator">:</span> <span class="token boolean">true</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserverpfx"><code>devServer.pfx</code> <a href="#devserverpfx" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string</code></p> <p>é€šè¿‡CLIä½¿ç”¨æ—¶ï¼Œæ˜¯SSL .pfxæ–‡ä»¶çš„è·¯å¾„ã€‚ å¦‚æœåœ¨é€‰é¡¹ä¸­ä½¿ç”¨ï¼Œåˆ™å®ƒåº”è¯¥æ˜¯.pfxæ–‡ä»¶çš„å­—èŠ‚æµã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    pfx<span class="token operator">:</span> <span class="token string">\'https://webpack.docschina.org/path/to/file.pfx\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --pfx ./path/to/file.pfx</code></pre> <h2 id="devserverpfxpassphrase"><code>devServer.pfxPassphrase</code> <a href="#devserverpfxpassphrase" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string</code></p> <p>å°†å¯†ç çŸ­è¯­è½¬æ¢ä¸ºSSL PFXæ–‡ä»¶ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    pfxPassphrase<span class="token operator">:</span> <span class="token string">\'passphrase\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --pfx-passphrase passphrase</code></pre> <h2 id="devserverport"><code>devServer.port</code> <a href="#devserverport" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>number</code></p> <p>æŒ‡å®šç«¯å£å·ä»¥ä¾¦å¬ä»¥ä¸‹è¯·æ±‚ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    port<span class="token operator">:</span> <span class="token number">8080</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --port <span class="token number">8080</span></code></pre> <h2 id="devserverproxy"><code>devServer.proxy</code> <a href="#devserverproxy" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>object</code> <code>[object, function]</code></p> <p>å½“æ‹¥æœ‰å•ç‹¬çš„APIåç«¯å¼€å‘æœåŠ¡å™¨å¹¶ä¸”å¸Œæœ›åœ¨åŒä¸€åŸŸä¸Šå‘é€APIè¯·æ±‚æ—¶ï¼Œä»£ç†æŸäº›URLå¯èƒ½ä¼šå¾ˆæœ‰ç”¨ã€‚</p> <p>å¼€å‘æœåŠ¡å™¨ä½¿ç”¨åŠŸèƒ½å¼ºå¤§çš„ <a href="https://github.com/chimurai/http-proxy-middleware">http-proxy-middleware</a> è½¯ä»¶åŒ…ã€‚ æŸ¥çœ‹å…¶ <a href="https://github.com/chimurai/http-proxy-middleware#options">documentation</a> äº†è§£æ›´å¤šé«˜çº§ç”¨æ³•ã€‚ è¯·æ³¨æ„ï¼Œ<code>http-proxy-middleware</code> çš„æŸäº›åŠŸèƒ½ä¸éœ€è¦<code>target</code>é”®ï¼Œä¾‹å¦‚ å®ƒçš„ <code>router</code> åŠŸèƒ½ï¼Œä½†æ˜¯ä»ç„¶éœ€è¦åœ¨æ­¤å¤„çš„é…ç½®ä¸­åŒ…å«<code>target</code>ï¼Œå¦åˆ™<code>webpack-dev-server</code> ä¸ä¼šå°†å…¶ä¼ é€’ç»™ <code>http-proxy-middleware</code>ï¼‰ã€‚</p> <p>ä½¿ç”¨åç«¯åœ¨ <code>localhost:3000</code> ä¸Šï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥å¯ç”¨ä»£ç†ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token string">\'/api\'</span><span class="token operator">:</span> <span class="token string">\'http://localhost:3000/\'</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>ç°åœ¨ï¼Œå¯¹ <code>/api/users</code> çš„è¯·æ±‚ä¼šå°†è¯·æ±‚ä»£ç†åˆ° <code>http://localhost:3000/api/users</code>ã€‚</p> <p>å¦‚æœä¸å¸Œæœ›ä¼ é€’<code>/api</code>ï¼Œåˆ™éœ€è¦é‡å†™è·¯å¾„ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token string">\'/api\'</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n        target<span class="token operator">:</span> <span class="token string">\'http://localhost:3000/\'</span><span class="token punctuation">,</span>\n        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">\'^/api\'</span> <span class="token operator">:</span> <span class="token string">\'\'</span><span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†ä¸æ¥å—åœ¨ HTTPS ä¸Šè¿è¡Œä¸”è¯ä¹¦æ— æ•ˆçš„åç«¯æœåŠ¡å™¨ã€‚ å¦‚æœéœ€è¦ï¼Œå¯ä»¥è¿™æ ·ä¿®æ”¹é…ç½®ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token string">\'/api\'</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n        target<span class="token operator">:</span> <span class="token string">\'https://other-server.example.com\'</span><span class="token punctuation">,</span>\n        secure<span class="token operator">:</span> <span class="token boolean">false</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>æœ‰æ—¶ä¸æƒ³ä»£ç†æ‰€æœ‰å†…å®¹ã€‚ å¯ä»¥åŸºäºå‡½æ•°çš„è¿”å›å€¼ç»•è¿‡ä»£ç†ã€‚</p> <p>åœ¨è¯¥åŠŸèƒ½ä¸­ï¼Œå¯ä»¥è®¿é—®è¯·æ±‚ï¼Œå“åº”å’Œä»£ç†é€‰é¡¹ã€‚</p> <ul> <li>è¿”å› <code>null</code> æˆ– <code>undefined</code> ä»¥ç»§ç»­ä½¿ç”¨ä»£ç†å¤„ç†è¯·æ±‚ã€‚</li> <li>è¿”å› <code>false</code> ä¼šä¸ºè¯·æ±‚äº§ç”Ÿ404é”™è¯¯ã€‚</li> <li>è¿”å›æä¾›æœåŠ¡çš„è·¯å¾„ï¼Œè€Œä¸æ˜¯ç»§ç»­ä»£ç†è¯·æ±‚ã€‚</li> </ul> <p>ä¾‹å¦‚ã€‚ å¯¹äºæµè§ˆå™¨è¯·æ±‚ï¼Œæƒ³è¦æä¾› HTML é¡µé¢ï¼Œä½†æ˜¯å¯¹äº API è¯·æ±‚ï¼Œæƒ³è¦ä»£ç†å®ƒã€‚ å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token string">\'/api\'</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n        target<span class="token operator">:</span> <span class="token string">\'http://localhost:3000/\'</span><span class="token punctuation">,</span>\n        <span class="token function-variable function">bypass</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> proxyOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n          <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>accept<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">\'html\'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Skipping proxy for browser request.\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n            <span class="token keyword">return</span> <span class="token string">\'https://webpack.docschina.org/index.html\'</span><span class="token punctuation">;</span>\n          <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>å¦‚æœæƒ³å°†å¤šä¸ªç‰¹å®šè·¯å¾„ä»£ç†åˆ°åŒä¸€ç›®æ ‡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå¸¦æœ‰ <code>context</code> å±æ€§çš„å¯¹è±¡çš„æ•°ç»„ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    proxy<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>\n      context<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">\'/auth\'</span><span class="token punctuation">,</span> <span class="token string">\'/api\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      target<span class="token operator">:</span> <span class="token string">\'http://localhost:3000/\'</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">]</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>è¯·æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸ä¼šä»£ç†å¯¹ root çš„è¯·æ±‚ã€‚ è¦å¯ç”¨æ ¹ä»£ç†ï¼Œåº”å°† <code>devServer.index</code> é€‰é¡¹æŒ‡å®šä¸ºè™šå‡å€¼ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    index<span class="token operator">:</span> <span class="token string">\'\'</span><span class="token punctuation">,</span> <span class="token comment">// specify to enable root proxying</span>\n    host<span class="token operator">:</span> <span class="token string">\'...\'</span><span class="token punctuation">,</span>\n    contentBase<span class="token operator">:</span> <span class="token string">\'...\'</span><span class="token punctuation">,</span>\n    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token function-variable function">context</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n      target<span class="token operator">:</span> <span class="token string">\'http://localhost:1234/\'</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä»£ç†æ—¶ä¼šä¿ç•™ä¸»æœºå¤´çš„æ¥æºï¼Œå¯ä»¥å°† <code>changeOrigin</code> è®¾ç½®ä¸º <code>true</code> ä»¥è¦†ç›–æ­¤è¡Œä¸ºã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¾‹å¦‚ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Virtual_hosting#Name-based">name-based virtual hosted sites</a>ï¼Œå®ƒå¾ˆæœ‰ç”¨ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>\n      <span class="token string">\'/api\'</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n        target<span class="token operator">:</span> <span class="token string">\'http://localhost:3000/\'</span><span class="token punctuation">,</span>\n        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserverprogress---cli-only"><code>devServer.progress</code> - CLI only <a href="#devserverprogress---cli-only" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>å°†è¿è¡Œè¿›åº¦è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚</p> <pre><code class="hljs language-bash">webpack serve --progress</code></pre> <h2 id="devserverpublic"><code>devServer.public</code> <a href="#devserverpublic" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string</code></p> <p>ä½¿ç”¨ <em>inlineæ¨¡å¼</em> å¹¶ä»£ç† dev-server æ—¶ï¼Œå†…è”å®¢æˆ·ç«¯è„šæœ¬å¹¶ä¸æ€»æ˜¯çŸ¥é“è¦è¿æ¥åˆ°å“ªé‡Œã€‚ å®ƒå°†å°è¯•åŸºäº <code>window.location</code> çŒœæµ‹æœåŠ¡å™¨çš„ URLï¼Œä½†æ˜¯å¦‚æœå¤±è´¥ï¼Œåˆ™éœ€è¦ä½¿ç”¨å®ƒã€‚</p> <p>ä¾‹å¦‚ï¼Œå¼€å‘æœåŠ¡å™¨ç”± nginx ä»£ç†ï¼Œå¹¶åœ¨ <code>myapp.test</code> ä¸Šå¯ç”¨ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token keyword">public</span><span class="token operator">:</span> <span class="token string">\'myapp.test:80\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --public myapp.test:80</code></pre> <h2 id="devserverpublicpath-"><code>devServer.publicPath</code> ğŸ”‘ <a href="#devserverpublicpath-" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string = \'/\'</code></p> <p>æ†ç»‘çš„æ–‡ä»¶å°†åœ¨æ­¤è·¯å¾„ä¸‹çš„æµè§ˆå™¨ä¸­å¯ç”¨ã€‚</p> <p>å‡è®¾æœåŠ¡å™¨åœ¨ <code>http://localhost:8080</code> ä¸‹è¿è¡Œï¼Œå¹¶ä¸” <a href="configuration/output/index.htm#outputfilename"/*tpa=https://webpack.docschina.org/configuration/output/#outputfilename*/><code>output.filename</code></a> è®¾ç½®ä¸º <code>bundle.js</code>ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>devServer.publicPath</code> ä¸º <code>\'/\'</code>ï¼Œå› æ­¤çš„æ†ç»‘è½¯ä»¶å¯ä»¥ä½œä¸º <code>http://localhost:8080/bundle.js</code> è·å¾—ã€‚</p> <p>æ›´æ”¹ <code>devServer.publicPath</code> ä»¥å°†æ†ç»‘è½¯ä»¶æ”¾åœ¨ç‰¹å®šç›®å½•ä¸‹ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    publicPath<span class="token operator">:</span> <span class="token string">\'/assets/\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>è¯¥æ†ç»‘åŒ…ç°åœ¨å°†ä»¥ <code>http://localhost:8080/assets/bundle.js</code> çš„å½¢å¼æä¾›ã€‚</p> <blockquote class="tip"> <p>ç¡®ä¿ <code>devServer.publicPath</code> å§‹ç»ˆä»¥æ­£æ–œæ å¼€å¤´å’Œç»“å°¾ã€‚</p> </blockquote> <p>ä¹Ÿå¯ä»¥ä½¿ç”¨å®Œæ•´çš„URLã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    publicPath<span class="token operator">:</span> <span class="token string">\'http://localhost:8080/assets/\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>è¯¥æ†ç»‘åŒ…ç°åœ¨å°†ä»¥ <code>http://localhost:8080/assets/bundle.js</code> çš„å½¢å¼æä¾›ã€‚</p> <blockquote class="tip"> <p>å»ºè®® <code>devServer.publicPath</code> ä¸ <a href="configuration/output/index.htm#outputpublicpath"/*tpa=https://webpack.docschina.org/configuration/output/#outputpublicpath*/><code>output.publicPath</code></a> ç›¸åŒã€‚</p> </blockquote> <h2 id="devserverquiet-"><code>devServer.quiet</code> ğŸ”‘ <a href="#devserverquiet-" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>å¯ç”¨ <code>devServer.quiet</code> åï¼Œé™¤äº†åˆå§‹å¯åŠ¨ä¿¡æ¯å¤–ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šå†™å…¥æ§åˆ¶å°ã€‚ è¿™ä¹Ÿæ„å‘³ç€æ¥è‡ªwebpackçš„é”™è¯¯æˆ–è­¦å‘Šæ˜¯ä¸å¯è§çš„ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    quiet<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --quiet</code></pre> <h2 id="devserverserveindex"><code>devServer.serveIndex</code> <a href="#devserverserveindex" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = true</code></p> <p>å‘Šè¯‰å¼€å‘æœåŠ¡å™¨å¯ç”¨åä½¿ç”¨ <a href="https://github.com/expressjs/serve-index"><code>serveIndex</code></a> ä¸­é—´ä»¶ã€‚</p> <p><a href="https://github.com/expressjs/serve-index"><code>serveIndex</code></a> ä¸­é—´ä»¶ä¼šåœ¨æŸ¥çœ‹æ²¡æœ‰index.htmlæ–‡ä»¶çš„ç›®å½•æ—¶ç”Ÿæˆç›®å½•åˆ—è¡¨ã€‚</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    serveIndex<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserversetup"><code>devServer.setup</code> <a href="#devserversetup" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>function (app, server)</code></p> <blockquote class="warning"> <p>è¿™ä¸ªé€‰é¡¹å°†è¢« <a href="#devserverbefore"><code>devServer.before</code></a> æ‰€æ”¯æŒï¼Œå¹¶å°†åœ¨v3.0.0ä¸­åˆ é™¤ã€‚</p> </blockquote> <p>åœ¨è¿™é‡Œï¼Œå¯ä»¥è®¿é—® Express åº”ç”¨ç¨‹åºå¯¹è±¡ï¼Œå¹¶å‘å…¶ä¸­æ·»åŠ è‡ªå·±çš„è‡ªå®šä¹‰ä¸­é—´ä»¶ã€‚ ä¾‹å¦‚ï¼Œä¸ºæŸäº›è·¯å¾„å®šä¹‰è‡ªå®šä¹‰å¤„ç†ç¨‹åºï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app<span class="token punctuation">,</span> server</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">\'/some/path\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> custom<span class="token operator">:</span> <span class="token string">\'response\'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserversockhost"><code>devServer.sockHost</code> <a href="#devserversockhost" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string</code></p> <p>å‘Šè¯‰è¿æ¥åˆ° <code>devServer</code> çš„å®¢æˆ·ç«¯ä½¿ç”¨æä¾›çš„å¥—æ¥å­—ä¸»æœºã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    sockHost<span class="token operator">:</span> <span class="token string">\'https://webpack.docschina.org/myhost.test\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserversockpath"><code>devServer.sockPath</code> <a href="#devserversockpath" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string = \'/sockjs-node\'</code></p> <p>è¿æ¥åˆ°é‡è£…æ’æ§½çš„è·¯å¾„ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    sockPath<span class="token operator">:</span> <span class="token string">\'/socket\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --sock-path /socket</code></pre> <h2 id="devserversockport"><code>devServer.sockPort</code> <a href="#devserversockport" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>number</code> <code>string</code></p> <p>å‘Šè¯‰è¿æ¥åˆ°<code>devServer</code>çš„å®¢æˆ·ç«¯ä½¿ç”¨æä¾›çš„å¥—æ¥å­—ç«¯å£ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    sockPort<span class="token operator">:</span> <span class="token number">8080</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserverstaticoptions"><code>devServer.staticOptions</code> <a href="#devserverstaticoptions" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>object</code></p> <p>å¯ä»¥é…ç½®é«˜çº§é€‰é¡¹ä»¥ä» <code>contentBase</code> æä¾›é™æ€æ–‡ä»¶ã€‚ æœ‰å…³å¯èƒ½çš„é€‰é¡¹ï¼Œè¯·å‚è§ <a href="http://expressjs.com/en/4x/api.html#express.static">Express documentation</a>ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    staticOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n      redirect<span class="token operator">:</span> <span class="token boolean">false</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <blockquote class="tip"> <p>è¿™ä»…åœ¨å°† <a href="#devservercontentbase"><code>devServer.contentBase</code></a> ç”¨ä½œå­—ç¬¦ä¸²æ—¶æœ‰æ•ˆã€‚</p> </blockquote> <h2 id="devserverstats-"><code>devServer.stats</code> ğŸ”‘ <a href="#devserverstats-" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string: \'none\' | \'errors-only\' | \'minimal\' | \'normal\' | \'verbose\'</code> <code>object</code></p> <p>æ­¤é€‰é¡¹ä½¿å¯ä»¥ç²¾ç¡®æ§åˆ¶æ˜¾ç¤ºå“ªäº›æ†ç»‘è½¯ä»¶ä¿¡æ¯ã€‚ å¦‚æœéœ€è¦ä¸€äº›æ†ç»‘è½¯ä»¶ä¿¡æ¯ï¼Œä½†åˆä¸æ˜¯å…¨éƒ¨ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¸­é—´ç«‹åœºã€‚</p> <p>è¦ä»…æ˜¾ç¤ºæ†ç»‘è½¯ä»¶ä¸­çš„é”™è¯¯ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    stats<span class="token operator">:</span> <span class="token string">\'errors-only\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ <a href="configuration/stats/index.htm"/*tpa=https://webpack.docschina.org/configuration/stats/*/><strong>stats documentation</strong></a>ã€‚</p> <blockquote class="tip"> <p>ä¸ <code>quiet</code> æˆ– <code>noInfo</code> ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œè¯¥é€‰é¡¹æ— æ•ˆã€‚</p> </blockquote> <h2 id="devserverstdin---cli-only"><code>devServer.stdin</code> - CLI only <a href="#devserverstdin---cli-only" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>å½“stdinç»“æŸæ—¶ï¼Œæ­¤é€‰é¡¹å°†å…³é—­æœåŠ¡å™¨ã€‚</p> <pre><code class="hljs language-bash">webpack serve --stdin</code></pre> <h2 id="devservertransportmode"><code>devServer.transportMode</code> <a href="#devservertransportmode" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>string = \'sockjs\': \'sockjs\' | \'ws\'</code> <code>object</code></p> <blockquote class="warning"> <p><code>transportMode</code> æ˜¯ä¸€ä¸ªå®éªŒæ€§é€‰é¡¹ï¼Œè¿™æ„å‘³ç€å…¶ç”¨æ³•å¯èƒ½ä¼šæ›´æ”¹ï¼Œè€Œä¸ä¼šå‘å‡ºè­¦å‘Šã€‚</p> </blockquote> <blockquote class="tip"> <p>å°†å­—ç¬¦ä¸²æä¾›ç»™d <code>devServer.transportMode</code> æ˜¯å°† <code>devServer.transportMode.client</code> å’Œ <code>devServer.transportMode.server</code> éƒ½è®¾ç½®ä¸ºç»™å®šå­—ç¬¦ä¸²å€¼çš„å¿«æ·æ–¹å¼ã€‚</p> </blockquote> <p>è¿™ä¸ªé€‰é¡¹å…è®¸æˆ‘ä»¬è¦ä¹ˆä¸ºå®¢æˆ·ç«¯/æœåŠ¡å™¨åˆ†åˆ«é€‰æ‹©å½“å‰çš„<code>devServer</code>ä¼ è¾“æ¨¡å¼ï¼Œè¦ä¹ˆæä¾›å®šåˆ¶çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨å®ç°ã€‚ è¿™å…è®¸æŒ‡å®šæµè§ˆå™¨æˆ–å…¶ä»–å®¢æˆ·ç«¯å¦‚ä½•ä¸<code>devServer</code>é€šä¿¡ã€‚</p> <p>å½“å‰çš„é»˜è®¤æ¨¡å¼æ˜¯ <a href="https://www.npmjs.com/package/sockjs"><code>\'sockjs\'</code></a>ã€‚ æ­¤æ¨¡å¼ä½¿ç”¨ <a href="https://github.com/sockjs/sockjs-node">SockJS-node</a> ä½œä¸ºæœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨ <a href="https://www.npmjs.com/package/sockjs-client">SockJS-client</a> åœ¨å®¢æˆ·ç«¯ä¸Šã€‚</p> <p>åœ¨ä¸‹ä¸€ä»£ä¸»è¦çš„ <code>devServer</code> ç‰ˆæœ¬ä¸­ï¼Œ<code>\'ws\'</code> æ¨¡å¼å°†æˆä¸ºé»˜è®¤æ¨¡å¼ã€‚ æ­¤æ¨¡å¼å°† <a href="https://www.npmjs.com/package/ws">ws</a> ç”¨ä½œæœåŠ¡å™¨ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯ä¸Šä½¿ç”¨æœ¬æœº WebSocketã€‚</p> <p>Use <code>\'ws\'</code> mode:</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    transportMode<span class="token operator">:</span> <span class="token string">\'ws\'</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <blockquote class="tip"> <p>æä¾›è‡ªå®šä¹‰å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å®ç°æ—¶ï¼Œè¯·ç¡®ä¿å®ƒä»¬å½¼æ­¤å…¼å®¹ï¼Œä»¥æˆåŠŸè¿›è¡Œé€šä¿¡ã€‚</p> </blockquote> <h3 id="devservertransportmodeclient"><code>devServer.transportMode.client</code> <a href="#devservertransportmodeclient" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>string</code> <code>path</code></p> <p>è¦åˆ›å»ºè‡ªå®šä¹‰å®¢æˆ·ç«¯å®ç°ï¼Œè¯·åˆ›å»ºä¸€ä¸ªæ‰©å±•å¹¶ç»§æ‰¿ <a href="../github.com/webpack/webpack-dev-server/blob/master/client-src/clients/BaseClient.js"/*tpa=https://github.com/webpack/webpack-dev-server/blob/master/client-src/clients/BaseClient.js*/><code>BaseClient</code></a>.</p> <p>ä½¿ç”¨<code>CustomServer.js</code>å¯¼å‡ºçš„ç±»å®ç°è‡ªå®šä¹‰WebSocketå®¢æˆ·ç«¯å¹¶å…¼å®¹<code>ws</code>æœåŠ¡ç«¯ï¼š</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    transportMode<span class="token operator">:</span> <span class="token punctuation">{</span>\n      client<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">\'./CustomClient\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      server<span class="token operator">:</span> <span class="token string">\'ws\'</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h3 id="devservertransportmodeserver"><code>devServer.transportMode.server</code> <a href="#devservertransportmodeserver" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h3> <p><code>string</code> <code>path</code> <code>function</code></p> <p>è¦åˆ›å»ºè‡ªå®šä¹‰æœåŠ¡å™¨å®ç°ï¼Œè¯·åˆ›å»ºä¸€ä¸ªæ‰©å±•å¹¶ç»§æ‰¿ <a href="../github.com/webpack/webpack-dev-server/blob/master/lib/servers/BaseServer.js"/*tpa=https://github.com/webpack/webpack-dev-server/blob/master/lib/servers/BaseServer.js*/><code>BaseServer</code></a>.</p> <p>ä½¿ç”¨<code>CustomServer.js</code>å¯¼å‡ºçš„ç±»å®ç°è‡ªå®šä¹‰WebSocketæœåŠ¡å™¨å¹¶å…¼å®¹<code>ws</code>å®¢æˆ·ç«¯ï¼š</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    transportMode<span class="token operator">:</span> <span class="token punctuation">{</span>\n      client<span class="token operator">:</span> <span class="token string">\'ws\'</span><span class="token punctuation">,</span>\n      server<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">\'./CustomServer\'</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>ä½¿ç”¨ <code>CustomServer.js</code> å¯¼å‡ºçš„ç±»å®ç°è‡ªå®šä¹‰WebSocketæœåŠ¡å™¨å¹¶å…¼å®¹ <code>ws</code> å®¢æˆ·ç«¯ï¼š</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    transportMode<span class="token operator">:</span> <span class="token punctuation">{</span>\n      client<span class="token operator">:</span> <span class="token string">\'ws\'</span><span class="token punctuation">,</span>\n      server<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'./CustomServer\'</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>ä½¿ç”¨è‡ªå®šä¹‰å…¼å®¹çš„WebSocketå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å®ç°ï¼š</p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    transportMode<span class="token operator">:</span> <span class="token punctuation">{</span>\n      client<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">\'./CustomClient\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      server<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">\'./CustomServer\'</span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <h2 id="devserveruselocalip"><code>devServer.useLocalIp</code> <a href="#devserveruselocalip" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>æ­¤é€‰é¡¹ä½¿æµè§ˆå™¨å¯ä»¥ä½¿ç”¨çš„æœ¬åœ°IPæ‰“å¼€ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    useLocalIp<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --use-local-ip</code></pre> <h2 id="devserverwatchcontentbase"><code>devServer.watchContentBase</code> <a href="#devserverwatchcontentbase" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean</code></p> <p>å‘Šè¯‰ dev-server ç›‘å¬ [<code>devServer.contentBase</code>]ï¼ˆï¼ƒdevservercontentbaseï¼‰é€‰é¡¹æä¾›çš„æ–‡ä»¶ã€‚ é»˜è®¤æƒ…å†µä¸‹ç¦ç”¨ã€‚ å¯ç”¨åï¼Œæ–‡ä»¶æ›´æ”¹å°†è§¦å‘æ•´ä¸ªé¡µé¢é‡æ–°åŠ è½½ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    watchContentBase<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>é€šè¿‡å‘½ä»¤è¡Œä½¿ç”¨</p> <pre><code class="hljs language-bash">webpack serve --watch-content-base</code></pre> <h2 id="devserverwatchoptions-"><code>devServer.watchOptions</code> ğŸ”‘ <a href="#devserverwatchoptions-" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>object</code></p> <p>æ§åˆ¶ç›‘å¬æ–‡ä»¶çš„é€‰é¡¹ã€‚</p> <p>webpack ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿæ¥é€šçŸ¥æ–‡ä»¶æ›´æ”¹ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¸èµ·ä½œç”¨ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼ˆNFSï¼‰æ—¶ã€‚ <a href="https://www.vagrantup.com/">Vagrant</a> ä¹Ÿæœ‰å¾ˆå¤šé—®é¢˜ã€‚ åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨è½®è¯¢ï¼š</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>\n      poll<span class="token operator">:</span> <span class="token boolean">true</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>å¦‚æœè¿™å¯¹æ–‡ä»¶ç³»ç»Ÿè´Ÿè·å¤ªé‡ï¼Œå¯ä»¥å°†å…¶è®¾ç½®ä¸ºæ•´æ•°ç”¨ä»¥è°ƒæ•´è½®è¯¢é—´éš”ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</p> <p>æŸ¥é˜… <a href="configuration/watch/index.htm"/*tpa=https://webpack.docschina.org/configuration/watch/*/>WatchOptions</a> äº†è§£æ›´å¤šã€‚</p> <h2 id="devserverwritetodisk-"><code>devServer.writeToDisk</code> ğŸ”‘ <a href="#devserverwritetodisk-" aria-hidden="true" tabindex="-1"><span class="header-link"></span></a></h2> <p><code>boolean = false</code> <code>function (filePath) => boolean</code></p> <p>å‘Šè¯‰ <code>devServer</code> å°†äº§ç”Ÿçš„æ–‡ä»¶å†™å…¥ç¡¬ç›˜ã€‚ å†™å…¥ä½ç½®ä¸º <a href="configuration/output/index.htm#outputpath"/*tpa=https://webpack.docschina.org/configuration/output/#outputpath*/>output.path</a> é…ç½®çš„ç›®å½•ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    writeToDisk<span class="token operator">:</span> <span class="token boolean">true</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <p>å¯ä»¥ç»™ <code>devServer.writeToDisk</code> ä¼ å…¥ä¸€ä¸ªå‡½æ•°ç”¨æ¥ç­›é€‰å“ªäº›æ–‡ä»¶éœ€è¦å†™å…¥ç¡¬ç›˜ã€‚ä¼ å…¥å‡½æ•°çš„ç”¨æ³•å’Œ<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>Array#filter</code></a> çš„ç”¨æ³•ä¸€è‡´ã€‚</p> <p><strong>webpack.config.js</strong></p> <pre><code class="hljs language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>\n  <span class="token comment">//...</span>\n  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token function-variable function">writeToDisk</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">filePath</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      <span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">superman\\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre> <blockquote class="tip"> <p>æœ‰å¯èƒ½éœ€è¦é€šè¿‡ <code>NODE_OPTIONS</code> è®¾ç½®ä¸€äº› Node.js çš„æ ‡è®°ï¼Œä¾‹å¦‚ï¼Œé…ç½® <code>HTTP_MAX_HEADER_SIZE</code>:</p> </blockquote> <p><strong>package.json</strong></p> <pre><code class="hljs language-json"><span class="token punctuation">{</span>\n  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token string">"NODE_OPTIONS=\'--max-http-header-size=100000\' webpack serve"</span>\n<span class="token punctuation">}</span></code></pre> '}}]);