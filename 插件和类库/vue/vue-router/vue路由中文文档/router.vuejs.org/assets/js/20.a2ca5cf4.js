(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{511:function(e,t,s){"use strict";s.r(t);var a=s(46),n=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"concordance-dynamique-de-route"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concordance-dynamique-de-route","aria-hidden":"true"}},[e._v("#")]),e._v(" Concordance dynamique de route")]),e._v(" "),s("p",[e._v("Vous allez très souvent associer des routes avec un motif donné à un même composant. Par exemple nous pourrions avoir le composant "),s("code",[e._v("User")]),e._v(" qui devrait être rendu pour tous les utilisateurs mais avec différents identifiants. Avec "),s("code",[e._v("vue-router")]),e._v(" nous pouvons utiliser des segments dynamiques dans le chemin de la route pour réaliser cela :")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" User "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  template"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'<div>Utilisateur</div>'")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" router "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("VueRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  routes"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Les segments dynamiques commencent avec la ponctuation deux-points")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" path"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/utilisateur/:id'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" User "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),s("p",[e._v("Maintenant des URL comme "),s("code",[e._v("/utilisateur/foo")]),e._v(" et "),s("code",[e._v("/utilisateur/bar")]),e._v(" seront chacun associé à la même route.")]),e._v(" "),s("p",[e._v("Un segment dynamique se repère avec les deux-points "),s("code",[e._v(":")]),e._v(". Quand une route concorde, la valeur du segment dynamique est exposée via "),s("code",[e._v("this.$route.params")]),e._v(" dans tous les composants. Et donc, nous pouvons faire le rendu de l'identifiant de l'utilisateur courant en mettant à jour le template de "),s("code",[e._v("User")]),e._v(" ainsi :")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" User "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  template"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'<div>Utilisateur {{ $route.params.id }}</div>'")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("Vous pouvez regarder un exemple en ligne "),s("a",{attrs:{href:"https://jsfiddle.net/yyx990803/4xfa2f19/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ici"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("Vous pouvez avoir plusieurs segments dynamiques pour une même route, et ils seront associés aux champs associés dans "),s("code",[e._v("$route.params")]),e._v(". Des exemples :")]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("motif")]),e._v(" "),s("th",[e._v("chemin concordant")]),e._v(" "),s("th",[e._v("$route.params")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("/utilisateur/:username")]),e._v(" "),s("td",[e._v("/utilisateur/evan")]),e._v(" "),s("td",[s("code",[e._v("{ username: 'evan' }")])])]),e._v(" "),s("tr",[s("td",[e._v("/utilisateur/:username/billet/:post_id")]),e._v(" "),s("td",[e._v("/utilisateur/evan/billet/123")]),e._v(" "),s("td",[s("code",[e._v("{ username: 'evan', post_id: 123 }")])])])])]),e._v(" "),s("p",[e._v("En plus de "),s("code",[e._v("$route.params")]),e._v(", l'objet "),s("code",[e._v("$route")]),e._v(" expose également d'autres informations utiles comme la "),s("code",[e._v("$route.query")]),e._v(" (s'il y a une requête dans l'URL), "),s("code",[e._v("https://router.vuejs.org/assets/js/$route.hash")]),e._v(", etc. Vous pouvez accéder à tous les détails de cela dans la "),s("RouterLink",{attrs:{to:"/fr/api/#the-route-object"}},[e._v("référence de l'API")]),e._v(".")],1),e._v(" "),s("h2",{attrs:{id:"reactivite-aux-changements-de-parametres"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#reactivite-aux-changements-de-parametres","aria-hidden":"true"}},[e._v("#")]),e._v(" Réactivité aux changements de paramètres")]),e._v(" "),s("p",[e._v("Une chose à noter quand vous utilisez des routes avec des paramètres (segments), c'est que lors de la navigation de l'utilisateur de "),s("code",[e._v("/utilisateur/foo")]),e._v(" vers "),s("code",[e._v("/utilisateur/bar")]),e._v(", "),s("strong",[e._v("la même instance de composant va être réutilisée")]),e._v(". Puisque les deux routes font le rendu du même composant, cela est plus performant que de détruire l'ancienne instance et d'en créer une nouvelle. "),s("strong",[e._v("Cependant, cela signifie également que les hooks de cycle de vie ne seront pas appelés")]),e._v(".")]),e._v(" "),s("p",[e._v("Pour réagir aux changements de paramètres dans le même composant, vous pouvez simplement observer l'objet "),s("code",[e._v("$route")]),e._v(" :")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" User "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  template"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'...'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  watch"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'$route'")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// réagir au changement de route...")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("Ou utiliser la "),s("RouterLink",{attrs:{to:"../../fr/guide/advanced/navigation-guards.html"/*tpa=https://router.vuejs.org/fr/guide/advanced/navigation-guards.html*/}},[e._v("fonction d'interception")]),e._v(" "),s("code",[e._v("beforeRouteUpdate")]),e._v(" introduite avec la 2.2 :")],1),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" User "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  template"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'...'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("beforeRouteUpdate")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// réagir au changement de route...")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// n'oubliez pas d'appeler `next()`")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h2",{attrs:{id:"motifs-de-concordance-avances"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#motifs-de-concordance-avances","aria-hidden":"true"}},[e._v("#")]),e._v(" Motifs de concordance avancés")]),e._v(" "),s("p",[s("code",[e._v("vue-router")]),e._v(" utilise "),s("a",{attrs:{href:"https://github.com/pillarjs/path-to-regexp/tree/v1.7.0",target:"_blank",rel:"noopener noreferrer"}},[e._v("path-to-regexp"),s("OutboundLink")],1),e._v(" comme moteur de concordance de chemin, il supporte donc plusieurs motifs de concordance avancés tels que la présence optionnelle de segments dynamiques, aucun ou plusieurs motifs, plus d'options par motifs, et même des motifs d'expressions régulières personnalisés. Consultez cette "),s("a",{attrs:{href:"https://github.com/pillarjs/path-to-regexp/tree/v1.7.0#parameters",target:"_blank",rel:"noopener noreferrer"}},[e._v("documentation"),s("OutboundLink")],1),e._v(" pour utiliser ces motifs avancés et "),s("a",{attrs:{href:"https://github.com/vuejs/vue-router/blob/dev/examples/route-matching/app.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("cet exemple"),s("OutboundLink")],1),e._v(" pour les utiliser avec "),s("code",[e._v("vue-router")]),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"priorite-de-concordance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#priorite-de-concordance","aria-hidden":"true"}},[e._v("#")]),e._v(" Priorité de concordance")]),e._v(" "),s("p",[e._v("Parfois la même URL peut être adressé par de multiples routes. Dans ce cas, la priorité de concordance est déterminée par l'ordre de la définition des routes : plus la route est définie tôt, plus sa priorité est élevée.")])])},[],!1,null,null,null);t.default=n.exports}}]);